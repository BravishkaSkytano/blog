---
layout: default
---
<article>
  <div class="mb-5 text-center">
    {% if page.image %}
    <img class="w-full h-auto" src="{{ page.image | relative_url }}" alt="cover image">
    {% endif %}
    <h1 class="mt-5">{{ page.title }}</h1>
    {% unless page.book %}
    <div class="flex justify-center items-center space-x-2">
      <span class="badge">{{ page.date | date_to_string: "ordinal", "US" }}</span>
      {% if page.modified %}<span class="badge">Modified {{ page.modified | date_to_string: "ordinal", "US" }}</span>{% endif %}
      <span class="badge">{{ content | number_of_words }} words</span>
    </div>
    {% if page.category %}
    <div class="flex justify-center items-center space-x-2 mt-3">
      <span class="badge">
        <a href="{{ '/categories' | relative_url }}#{{ page.category | slugify }}" class="no-underline">
          {{ page.category }}
        </a>
      </span>
    </div>
    {% endif %}
    {% if page.book %}
    <div class="flex justify-center items-center space-x-2 mt-3">
      <span class="badge capitalize">
        <a href="{{ '/books' | relative_url }}#{{ page.book }}" class="no-underline">
          {{ site.data.books | where: 'id', page.book | map: 'title' }}
        </a>
      </span>
    </div>
    {% endif %}
    <div class="flex justify-center items-center space-x-2 mt-3">
      {% for tag in page.tags %}
      <a class="badge no-underline" href="{{ '/tags' | relative_url }}#{{ tag | slugify }}">
        #{{ tag }}
      </a>
      {% endfor %}
    </div>
    {% endunless %}
  </div>
  {{ content }}
</article>

{% if page.book %}
<section class="flex flex-col items-center m-5">
  {% assign book-chapters = site.books | where: 'book', page.book %}
  {% for chapter in book-chapters %}
    {% if chapter.url == page.url %}
      {% assign prev_page_index = forloop.index | minus: 1 %}
      {% assign curr_page_index = forloop.index %}
      {% assign next_page_index = forloop.index | plus: 1 %}
    {% endif %}
  {% endfor %}
  
  <span class="text-sm">
    {% if book-chapters.size > 1 %}Chapter <span class="font-semibold">{{ curr_page_index }}</span> of <span class="font-semibold">{{ book-chapters.size }}</span>
    {% else %}More posts coming soon!{% endif %}
  </span>
  {% for chapter in book-chapters %}
  <div class="inline-flex mt-2 xs:mt-0">
    {% if prev_page_index == forloop.index %}
    <a class="button" href="{{ chapter.url | relative_url }}">
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 mr-2">
        <path fill-rule="evenodd" d="M18 10a.75.75 0 01-.75.75H4.66l2.1 1.95a.75.75 0 11-1.02 1.1l-3.5-3.25a.75.75 0 010-1.1l3.5-3.25a.75.75 0 111.02 1.1l-2.1 1.95h12.59A.75.75 0 0118 10z" clip-rule="evenodd" />
      </svg>
      Prev
    </a>
    {% endif %}{% if next_page_index == forloop.index %}
    <a class="button" href="{{ chapter.url | relative_url }}">
      Next
      <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5 ml-2">
        <path fill-rule="evenodd" d="M2 10a.75.75 0 01.75-.75h12.59l-2.1-1.95a.75.75 0 111.02-1.1l3.5 3.25a.75.75 0 010 1.1l-3.5 3.25a.75.75 0 11-1.02-1.1l2.1-1.95H2.75A.75.75 0 012 10z" clip-rule="evenodd" />
      </svg>
    </a>
    {% endif %}
  </div>
  {% endfor %}
</section>
{% endif %}

{% include comments.html %}
