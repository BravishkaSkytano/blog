/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  QuickChangeTranslationeModal: () => QuickChangeTranslationeModal,
  default: () => MyBible
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");

// node_modules/async-mutex/index.mjs
var E_TIMEOUT = new Error("timeout while waiting for mutex to become available");
var E_ALREADY_LOCKED = new Error("mutex already locked");
var E_CANCELED = new Error("request for lock canceled");
var __awaiter$2 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Semaphore = class {
  constructor(_value, _cancelError = E_CANCELED) {
    this._value = _value;
    this._cancelError = _cancelError;
    this._weightedQueues = [];
    this._weightedWaiters = [];
  }
  acquire(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve, reject) => {
      if (!this._weightedQueues[weight - 1])
        this._weightedQueues[weight - 1] = [];
      this._weightedQueues[weight - 1].push({ resolve, reject });
      this._dispatch();
    });
  }
  runExclusive(callback, weight = 1) {
    return __awaiter$2(this, void 0, void 0, function* () {
      const [value, release] = yield this.acquire(weight);
      try {
        return yield callback(value);
      } finally {
        release();
      }
    });
  }
  waitForUnlock(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    return new Promise((resolve) => {
      if (!this._weightedWaiters[weight - 1])
        this._weightedWaiters[weight - 1] = [];
      this._weightedWaiters[weight - 1].push(resolve);
      this._dispatch();
    });
  }
  isLocked() {
    return this._value <= 0;
  }
  getValue() {
    return this._value;
  }
  setValue(value) {
    this._value = value;
    this._dispatch();
  }
  release(weight = 1) {
    if (weight <= 0)
      throw new Error(`invalid weight ${weight}: must be positive`);
    this._value += weight;
    this._dispatch();
  }
  cancel() {
    this._weightedQueues.forEach((queue) => queue.forEach((entry) => entry.reject(this._cancelError)));
    this._weightedQueues = [];
  }
  _dispatch() {
    var _a;
    for (let weight = this._value; weight > 0; weight--) {
      const queueEntry = (_a = this._weightedQueues[weight - 1]) === null || _a === void 0 ? void 0 : _a.shift();
      if (!queueEntry)
        continue;
      const previousValue = this._value;
      const previousWeight = weight;
      this._value -= weight;
      weight = this._value + 1;
      queueEntry.resolve([previousValue, this._newReleaser(previousWeight)]);
    }
    this._drainUnlockWaiters();
  }
  _newReleaser(weight) {
    let called = false;
    return () => {
      if (called)
        return;
      called = true;
      this.release(weight);
    };
  }
  _drainUnlockWaiters() {
    for (let weight = this._value; weight > 0; weight--) {
      if (!this._weightedWaiters[weight - 1])
        continue;
      this._weightedWaiters[weight - 1].forEach((waiter) => waiter());
      this._weightedWaiters[weight - 1] = [];
    }
  }
};
var __awaiter$1 = function(thisArg, _arguments, P, generator) {
  function adopt(value) {
    return value instanceof P ? value : new P(function(resolve) {
      resolve(value);
    });
  }
  return new (P || (P = Promise))(function(resolve, reject) {
    function fulfilled(value) {
      try {
        step(generator.next(value));
      } catch (e) {
        reject(e);
      }
    }
    function rejected(value) {
      try {
        step(generator["throw"](value));
      } catch (e) {
        reject(e);
      }
    }
    function step(result) {
      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);
    }
    step((generator = generator.apply(thisArg, _arguments || [])).next());
  });
};
var Mutex = class {
  constructor(cancelError) {
    this._semaphore = new Semaphore(1, cancelError);
  }
  acquire() {
    return __awaiter$1(this, void 0, void 0, function* () {
      const [, releaser] = yield this._semaphore.acquire();
      return releaser;
    });
  }
  runExclusive(callback) {
    return this._semaphore.runExclusive(() => callback());
  }
  isLocked() {
    return this._semaphore.isLocked();
  }
  waitForUnlock() {
    return this._semaphore.waitForUnlock();
  }
  release() {
    if (this._semaphore.isLocked())
      this._semaphore.release();
  }
  cancel() {
    return this._semaphore.cancel();
  }
};

// main.ts
var BUILD_END_TOAST = "Bible build finished!";
var SELECTED_TRANSLATION_OPTION = "<Selected reading translation, {0}>";
var SELECTED_TRANSLATION_OPTION_KEY = "default";
var DEFAULT_SETTINGS = {
  translation: SELECTED_TRANSLATION_OPTION_KEY,
  reading_translation: "WEB",
  bible_folder: "/My Bible/",
  book_folders_enabled: true,
  book_name_format: "{order} {book}",
  book_name_delimiter: " ",
  chapter_name_format: "{book} {chapter}",
  book_name_capitalization: "name_case",
  book_name_abbreviated: false,
  padded_order: true,
  padded_chapter: false,
  build_with_dynamic_verses: true,
  verse_body_format: "###### {verse}\n{verse_text}",
  chapter_body_format: "\n###### Navigation\n**[[{last_chapter_name}|\u23EA {last_chapter_name}]] | [[{chapter_index}|Chapters]] | [[{next_chapter_name}|{next_chapter_name} \u23E9]]**\n**[[{first_chapter_name}|First ({first_chapter})]] | [[{final_chapter_name}|Last ({final_chapter})]]**\n\n{verses}\n\n###### Navigation\n**[[{last_chapter_name}|\u23EA {last_chapter_name}]] | [[{chapter_index}|Chapters]] | [[{next_chapter_name}|{next_chapter_name} \u23E9]]**\n**[[{first_chapter_name}|First ({first_chapter})]] | [[{final_chapter_name}|Last ({final_chapter})]]**\n\n",
  index_enabled: true,
  index_name_format: "-- Bible --",
  index_link_format: "- [[{book_index}|{book}]]",
  index_format: "### Old testament\n{old_testament}\n### New testament\n{new_testament}\n### Apocrypha\n{apocrypha}",
  chapter_index_enabled: true,
  chapter_index_name_format: "-- {book} --",
  chapter_index_link_format: "- [[{chapter_name}|{chapter}]]",
  chapter_index_format: "###### Navigation\n*[[{index}|Books]]*\n\n### Chapters\n{chapters}\n",
  store_locally: false,
  _built_translation: "",
  set_translation: async function(val, plugin) {
    if (val === SELECTED_TRANSLATION_OPTION_KEY) {
      this.translation = val;
      return;
    }
    let has_translation = false;
    let translations = await plugin.bible_api.get_translations();
    if (!(val in translations)) {
      this.translation = await plugin.bible_api.get_default_translation();
    } else {
      this.translation = val;
    }
  }
};
function httpGet(theUrl) {
  return new Promise(async (ok, err) => {
    ok(await (0, import_obsidian.requestUrl)(theUrl).text);
  });
}
function is_alpha(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 39 && char < 42) {
      continue;
    }
    return false;
  }
  return true;
}
function is_alphanumeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 64 && char < 91 || char > 96 && char < 123 || char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
function is_numeric(string) {
  for (let char_str of string) {
    let char = char_str.charCodeAt(0);
    if (char > 47 && char < 58) {
      continue;
    }
    return false;
  }
  return true;
}
async function save_file(path, content) {
  let file_path = (0, import_obsidian.normalizePath)(path);
  let file = this.app.vault.getAbstractFileByPath(file_path);
  if (file instanceof import_obsidian.TFile) {
    await this.app.vault.modify(file, content);
  } else if (file === null) {
    await this.app.vault.create(
      file_path,
      content
    );
  }
}
function translation_to_display_name(translation) {
  return "{0} - {1} - {2}".format(translation.language, translation.abbreviated_name, translation.display_name);
}
var MyBible = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.bible_api = new BollsLifeBibleAPI();
    this.bible_api.plugin = this;
    await this.settings.set_translation(this.settings.translation, this);
    this.addCommand({
      id: "create_bible_files",
      name: "Build Bible",
      callback: async () => {
        new BuilderModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "quick_change_translation",
      name: "Change translation",
      callback: async () => {
        let modal = new QuickChangeTranslationeModal(this);
        modal.translations = await this.bible_api.get_translations();
        modal.onChose = (translation) => {
          this.settings.reading_translation = translation.abbreviated_name;
        };
        modal.open();
      }
    });
    this.addCommand({
      id: "clear_cache",
      name: "Clear local files",
      callback: async () => {
        new ClearLocalFilesModal(this.app, this).open();
      }
    });
    this.addCommand({
      id: "download_bible",
      name: "Download translation",
      callback: async () => {
        let modal = new QuickChangeTranslationeModal(this);
        modal.translations = await this.bible_api.get_translations();
        modal.onChose = async (translation) => {
          await this.bible_api.user_download_translation(
            translation.abbreviated_name
          );
        };
        modal.open();
      }
    });
    this.registerMarkdownCodeBlockProcessor("verse", async (source, element, context) => {
      const ref = source.trim().replace(/[:-]/g, " ").split(" ");
      let book = null;
      let book_id = -1;
      let chapter = -1;
      let verse = -1;
      let verse_end = -1;
      let maybe_translation = null;
      let i = 0;
      while (i != ref.length) {
        if (i == 0) {
          book = (book || "") + ref[i];
        } else {
          if (!is_alpha(ref[i])) {
            break;
          }
          book += " " + ref[i];
        }
        i += 1;
      }
      if (is_numeric(book || "")) {
        book_id = Number(book);
        book = null;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        chapter = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_numeric(ref[i])) {
        verse_end = Number(ref[i]);
        i += 1;
      }
      if (i != ref.length && is_alphanumeric(ref[i])) {
        maybe_translation = ref[i];
        i += 1;
      }
      let translation = maybe_translation || this.settings.reading_translation;
      if (book !== null) {
        book_id = await this.bible_api.book_id(this.settings._built_translation || translation, book);
      }
      book = (await this.bible_api.get_book_data(translation, book_id)).name;
      let text = "";
      if (book.length === 0) {
        text = "[Book and chapter must be provided]";
      } else if (chapter === -1) {
        text = "[Chapter must be provided]";
      } else if (verse === -1) {
        let verses = await this.bible_api.get_chapter(
          translation,
          book_id,
          chapter
        );
        for (const verse_i_ of Object.keys(verses)) {
          const verse_i = Number(verse_i_);
          let verse2 = verses[verse_i];
          text += "<sup>" + verse_i + "</sup> " + verse2;
          if (verse_i != Object.keys(verses).length + 1) {
            text += " ";
          }
        }
        if (text.length === 0) {
          text = "<No text found for {1} {0} in translation {2}>".format(String(chapter), book, translation);
        }
      } else if (verse_end < verse) {
        text = await this.bible_api.get_verse(
          translation,
          book_id,
          chapter,
          verse
        );
        if (text.length === 0) {
          text = "<No text found for {1} {0}:{2} in translation {3}>".format(String(chapter), book, String(verse), translation);
        }
      } else {
        let verses = await this.bible_api.get_chapter(
          translation,
          book_id,
          chapter
        );
        let j = verse;
        while (j < verse_end + 1 && j < Object.keys(verses).length) {
          text += "<sup>" + j + "</sup> " + verses[j - 1];
          if (j != verse_end) {
            text += "<br>";
          }
          j += 1;
        }
        if (text.length === 0) {
          text = "<No text found for {1} {0}:{2}-{3} in translation {4}>".format(String(chapter), book, String(verse), String(verse_end), translation);
        }
      }
      let span = element.createSpan({
        text: ""
      });
      let tags = text.matchAll(
        /(?:<\s*([\w]*)\s*>(.*?)<\s*\/\1\s*>)|<\s*(br|\/br|br\/)\s*>|(.+?(?:(?=<\s*[/\\\w]*\s*>)|$))/gs
      );
      for (let match of tags) {
        let tag_type = match[1];
        let tag_text = match[2];
        let lone_tag_type = match[3];
        let normal_text = match[4];
        if (normal_text !== void 0) {
          span.createSpan({
            text: normal_text
          });
        } else if (lone_tag_type === "br") {
          span.createEl(lone_tag_type);
        } else if (lone_tag_type === "br/" || lone_tag_type === "/br") {
          span.createEl("br");
          span.createSpan({
            text: "\n"
          });
        } else if (lone_tag_type === "/J") {
        } else if (tag_type === "sup") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "sub") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "S") {
          span.createEl(
            "sub",
            { text: tag_text, attr: { style: "opacity: 0.5" } }
          );
        } else if (tag_type === "i") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "b") {
          span.createEl(tag_type, { text: tag_text });
        } else if (tag_type === "e") {
          span.createEl("i").createEl("q", { text: tag_text });
        } else {
          span.createSpan(
            { text: "<{0}>{1}</{0}>".format(tag_type, tag_text) }
          );
        }
      }
    });
    this.addSettingTab(new SettingsTab(this.app, this));
  }
  onunload() {
  }
  async build_bible() {
    let bible_path = (0, import_obsidian.normalizePath)(this.settings.bible_folder);
    let bible_folder = this.app.vault.getAbstractFileByPath(bible_path);
    if (bible_folder instanceof import_obsidian.TFile) {
      new ErrorModal(
        this.app,
        this,
        "Failed to build bible",
        'The bible folder defined in settings, "{0}", was expected to point to a folder, but it points to a file. Try changing the path to point to a folder, or change the file to a folder.'.format(this.settings.bible_folder)
      ).open();
      return;
    } else if (bible_folder === null) {
      this.app.vault.adapter.mkdir(bible_path);
    } else {
    }
    let folders_and_files = await this.app.vault.adapter.list(bible_path);
    if (folders_and_files.files.length + folders_and_files.folders.length != 0) {
      new ClearOldBibleFilesModal(this.app, this).open();
    } else {
      await this._build_bible(bible_path);
    }
  }
  async _build_bible(bible_path) {
    this.show_toast_progress(0, null);
    try {
      let translation = "";
      if (this.settings.translation == SELECTED_TRANSLATION_OPTION_KEY) {
        translation = this.settings.reading_translation;
      } else {
        translation = this.settings.translation;
      }
      this.settings._built_translation = translation;
      await this.saveSettings();
      let ctx = new BuildContext();
      ctx.plugin = this;
      ctx.translation = translation;
      ctx.books = await this.bible_api.get_books_data(ctx.translation);
      ctx.verse_counts = await this.bible_api.get_verse_count(ctx.translation);
      ctx.translation_texts = await this.bible_api.get_translation(ctx.translation);
      if (ctx.translation_texts !== void 0) {
        for (let book of ctx.books) {
          let to_remove = [];
          for (let i = 1; i != book.chapters.length + 1; i++) {
            let chapter_texts = ctx.translation_texts.books[book.id];
            let verses = chapter_texts[i] || {};
            if (Object.keys(verses).length === 0) {
              to_remove.push(i);
            }
          }
          for (const i of to_remove.reverse()) {
            book.chapters.remove(i);
          }
        }
      }
      let built_chapter_count = 0;
      let total_chapter_count = 0;
      for (const i in ctx.books) {
        total_chapter_count += ctx.books[i].chapters.length;
      }
      this.show_toast_progress(0, total_chapter_count);
      if (this.settings.index_enabled) {
        await save_file(
          "{0}/{1}.md".format(bible_path, ctx.format_index_name()),
          ctx.format_index()
        );
      }
      let file_promises = [];
      for (let book of ctx.books) {
        ctx.set_book(book);
        let texts_of_book = ctx.translation_texts.books[book.id];
        let book_path = bible_path;
        if (this.settings.book_folders_enabled) {
          book_path += "/" + ctx.format_book_name(this, ctx.book, this.settings.book_name_capitalization);
          this.app.vault.adapter.mkdir((0, import_obsidian.normalizePath)(book_path));
        }
        if (this.settings.chapter_index_enabled) {
          file_promises.push(save_file(
            "{0}/{1}.md".format(book_path, ctx.format_chapter_index_name(ctx.book)),
            ctx.format_chapter_index(ctx.book)
          ));
        }
        for (const chapter of ctx.book.chapters) {
          file_promises.push(new Promise(async () => {
            ctx.set_chapter(chapter);
            let texts_of_chapter = texts_of_book[chapter];
            ctx.verses_text = "";
            let added_verse_count = 0;
            for (const verse_key of Object.keys(texts_of_chapter)) {
              const verse = Number(verse_key);
              while (added_verse_count < verse) {
                ctx.verse = added_verse_count + 1;
                let text = ctx.format_verse_body(
                  this,
                  this.settings.build_with_dynamic_verses
                );
                ctx.verses_text += text;
                if (!(text.length === 0 && !this.settings.build_with_dynamic_verses) && verse_key !== Object.keys(texts_of_chapter).last()) {
                  ctx.verses_text += "\n";
                }
                added_verse_count += 1;
              }
            }
            let chapter_note_name = ctx.format_chapter_name();
            let note_body = ctx.format_chapter_body(this);
            let file_path = book_path + "/" + chapter_note_name + ".md";
            await save_file(file_path, note_body);
            built_chapter_count += 1;
            this.show_toast_progress(
              built_chapter_count,
              total_chapter_count
            );
          }));
        }
      }
      await Promise.all(file_promises);
    } catch (e) {
      this.show_toast_error(String(e));
      throw e;
    }
  }
  show_toast_error(error) {
    var _a;
    if (this.progress_notice !== null) {
      (_a = this.progress_notice) == null ? void 0 : _a.hide();
      this.progress_notice = null;
    }
    new import_obsidian.Notice("Error building bible: " + error, 0);
  }
  show_toast_progress(progress, finish) {
    var _a;
    if (progress === finish && finish != null) {
      (_a = this.progress_notice) == null ? void 0 : _a.hide();
      this.progress_notice = null;
      new import_obsidian.Notice(BUILD_END_TOAST);
      return;
    }
    if (this.progress_notice == null) {
      this.progress_notice = new import_obsidian.Notice("", 0);
    }
    let msg = "";
    if (finish == null) {
      msg = "Building bible...";
    } else {
      msg = "Building bible... ({0}/{1})".format(String(progress), String(finish));
    }
    this.progress_notice.setMessage(msg);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    let saving = {};
    Object.assign(saving, this.settings);
    for (const key in saving) {
      let value = DEFAULT_SETTINGS[key];
      if (saving[key] === value) {
        delete saving[key];
      }
    }
    await this.saveData(saving);
  }
};
var BuildContext = class {
  constructor() {
    this.translation = "";
    this.books = [];
    this.chapter = 0;
    this.prev_chapter = 0;
    this.next_chapter = 0;
    this.chapter_verse_count = 0;
    this.verses_text = "";
    this.verse = 0;
  }
  /// Find index of book by ID
  find_book(book_id) {
    for (let i of this.books.keys()) {
      if (this.books[i].id === book_id) {
        return i;
      }
    }
    throw new Error("No book by id ${book_id}");
  }
  abbreviate_book_name(name, delimeter) {
    return name.replace(delimeter, "").slice(0, 3);
  }
  format_book_name(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name, delim);
    }
    return plugin.settings.book_name_format.replace(
      /{order}/g,
      String(book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{book}/g, book_name).replace(/{translation}/g, String(this.translation));
  }
  format_book_name_without_order(plugin, book, casing) {
    let delim = plugin.settings.book_name_delimiter;
    let book_name = this.to_case(book.name, casing, delim);
    if (plugin.settings.book_name_abbreviated) {
      book_name = this.abbreviate_book_name(book_name, delim);
    }
    return book_name;
  }
  format_chapter_body(plugin) {
    let casing = plugin.settings.book_name_capitalization;
    return plugin.settings.chapter_body_format.replace(/{verses}/g, this.verses_text).replace(/{book}/g, this.format_book_name_without_order(plugin, this.book, casing)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name()).replace(/{chapter_index}/g, this.format_chapter_index_name(this.book)).replace(/{last_chapter}/g, String(this.prev_chapter)).replace(/{last_chapter_name}/g, this.format_chapter_name("last")).replace(/{last_chapter_book}/g, this.format_book_name_without_order(plugin, this.prev_book, casing)).replace(/{next_chapter}/g, String(this.next_chapter)).replace(/{next_chapter_name}/g, this.format_chapter_name("next")).replace(/{next_chapter_book}/g, this.format_book_name_without_order(plugin, this.next_book, casing)).replace(/{first_chapter}/g, String(this.book.chapters.first())).replace(/{first_chapter_name}/g, this.format_chapter_name("first")).replace(/{final_chapter}/g, String(this.book.chapters.last())).replace(/{final_chapter_name}/g, this.format_chapter_name("final")).replace(/{translation}/g, String(this.translation));
  }
  format_chapter_name(tense = "current", custom_chapter = null) {
    let format = this.plugin.settings.chapter_name_format;
    if (format.length == 0) {
      format = DEFAULT_SETTINGS.chapter_name_format;
    }
    let chapter_pad_by = 3;
    if (this.book.chapters.length < 10) {
      chapter_pad_by = 1;
    } else if (this.book.chapters.length < 100) {
      chapter_pad_by = 2;
    }
    let casing = this.plugin.settings.book_name_capitalization;
    let delim = this.plugin.settings.book_name_delimiter;
    let book_name = "";
    let order = -1;
    let chapter = custom_chapter;
    switch (tense) {
      case "current": {
        book_name = this.format_book_name_without_order(this.plugin, this.book, casing);
        order = this.book.id;
        chapter = this.chapter;
        break;
      }
      case "last": {
        book_name = this.format_book_name_without_order(this.plugin, this.prev_book, casing);
        order = this.prev_book.id;
        chapter = this.prev_chapter;
        break;
      }
      case "next": {
        book_name = this.format_book_name_without_order(this.plugin, this.next_book, casing);
        order = this.next_book.id;
        chapter = this.next_chapter;
        break;
      }
      case "first": {
        book_name = this.format_book_name_without_order(this.plugin, this.book, casing);
        order = this.book.id;
        chapter = this.book.chapters.first() || 1;
        break;
      }
      case "final": {
        book_name = this.format_book_name_without_order(this.plugin, this.book, casing);
        order = this.book.id;
        chapter = this.book.chapters.last() || 1;
        break;
      }
      case "custom": {
        book_name = this.format_book_name_without_order(this.plugin, this.book, casing);
        order = this.book.id;
        chapter = custom_chapter;
        break;
      }
      default:
        throw new Error("Unmatched switch case at tense '{0}'".format(tense));
    }
    if (chapter == null) {
      throw new Error("Chapter is null");
    }
    return format.replace(/{book}/g, book_name).replace(
      /{order}/g,
      String(order).padStart(2 * Number(this.plugin.settings.padded_order), "0")
    ).replace(
      /{chapter}/g,
      String(chapter).padStart(chapter_pad_by * Number(this.plugin.settings.padded_chapter), "0")
    ).replace(/{translation}/g, String(this.translation));
  }
  format_verse_body(plugin, build_with_dynamic_verses) {
    let book_name = this.format_book_name_without_order(
      plugin,
      this.book,
      "current"
    );
    let verse_text = "";
    if (build_with_dynamic_verses) {
      verse_text = "``` verse\n{book_id} {chapter} {verse} \n```";
    } else {
      verse_text = this.translation_texts.books[this.book.id][this.chapter][this.verse];
      if (verse_text === void 0) {
        return "";
      }
      if (verse_text.contains("<")) {
        verse_text = verse_text.replace(/<\s*br\s*\/?>/g, "\n").replace(/<\s*i*\s*>\s*/g, "*").replace(/\s*<\/\s*i*\s*>/g, "*").replace(/<\/?\s*i*\s*\/?>/g, "*").replace(/<\/?\s*b*\s*\/?>/g, "**").replace(/<\s*S*\s*>/g, "<sup>*").replace(/<\/\s*S*\s*>/g, "*</sup>").replace(/<\/?\s*\w*\s*\/?>/g, "");
      }
    }
    return plugin.settings.verse_body_format.replace(/{verse_text}/g, verse_text).replace(/{verse}/g, String(this.verse)).replace(/{book}/g, book_name).replace(/{book_id}/g, String(this.book.id)).replace(
      /{order}/g,
      String(this.book.id).padStart(2 * Number(plugin.settings.padded_order), "0")
    ).replace(/{chapter}/g, String(this.chapter)).replace(/{chapter_name}/g, this.format_chapter_name()).replace(/{final_chapter}/g, String(this.book.chapters)).replace(/{translation}/g, String(this.translation));
  }
  format_chapter_index(book) {
    let book_name = this.format_book_name_without_order(
      this.plugin,
      book,
      this.plugin.settings.book_name_capitalization
    );
    let chapter_links = "";
    for (let i = 0; i != book.chapters.length; i++) {
      let chapter = book.get_chapter_number(i);
      let link = this.plugin.settings.chapter_index_link_format.replace(/{order}/g, String(book.id).padStart(2 * Number(this.plugin.settings.padded_order), "0")).replace(/{book}/g, book_name).replace(/{book_index}/g, this.format_chapter_index_name(book)).replace(/{translation}/g, String(this.translation)).replace(/{chapter}/g, String(chapter)).replace(/{chapter_name}/g, this.format_chapter_name("custom", chapter));
      if (i != book.chapters.length - 1) {
        link += "\n";
      }
      chapter_links += link;
    }
    return this.plugin.settings.chapter_index_format.replace(/{order}/g, String(book.id).padStart(2 * Number(this.plugin.settings.padded_order), "0")).replace(/{book}/g, book_name).replace(/{book_index}/g, this.format_chapter_index_name(book)).replace(/{translation}/g, String(this.translation)).replace(/{index}/g, this.format_index_name()).replace(/{chapters}/g, chapter_links);
  }
  format_chapter_index_name(book) {
    let book_name = this.format_book_name_without_order(
      this.plugin,
      book,
      this.plugin.settings.book_name_capitalization
    );
    return this.plugin.settings.chapter_index_name_format.replace(/{order}/g, String(book.id).padStart(2 * Number(this.plugin.settings.padded_order), "0")).replace(/{book}/g, book_name).replace(/{translation}/g, String(this.translation));
  }
  format_index_name() {
    return this.plugin.settings.index_name_format.replace(/{translation}/g, this.translation);
  }
  format_index() {
    let old_t_links = "";
    let new_t_links = "";
    let apocr_links = "";
    for (const i in this.books) {
      let book_name = this.format_book_name_without_order(
        this.plugin,
        this.books[i],
        this.plugin.settings.book_name_capitalization
      );
      let link = this.plugin.settings.index_link_format.replace(/{order}/g, String(this.books[i].id).padStart(2 * Number(this.plugin.settings.padded_order), "0")).replace(/{book}/g, book_name).replace(/{book_index}/g, this.format_chapter_index_name(this.books[i])).replace(/{translation}/g, String(this.translation)) + "\n";
      if (this.books[i].id < 40) {
        old_t_links += link;
      } else if (this.books[i].id < 67) {
        new_t_links += link;
      } else {
        apocr_links += link;
      }
    }
    old_t_links = old_t_links.slice(0, old_t_links.length - 1);
    new_t_links = new_t_links.slice(0, new_t_links.length - 1);
    apocr_links = apocr_links.slice(0, apocr_links.length - 1);
    return this.plugin.settings.index_format.replace(/{translation}/g, this.translation).replace(/{old_testament}/g, old_t_links).replace(/{new_testament}/g, new_t_links).replace(/{apocrypha}/g, apocr_links);
  }
  set_book(book) {
    this.book = book;
    let [next_book, next_chapter] = this.next_chapter_of(this.book, this.chapter);
    let [prev_book, prev_chapter] = this.prev_chapter_of(this.book, this.chapter);
    this.next_book = next_book;
    this.next_chapter = next_chapter;
    this.prev_book = prev_book;
    this.prev_chapter = prev_chapter;
  }
  next_chapter_of(book, chapter) {
    let next_book = book;
    if (chapter === book.chapters.last()) {
      let book_i = this.find_book(book.id);
      if (book_i == this.books.length - 1) {
        next_book = this.books[0];
      } else {
        next_book = this.books[book_i + 1];
      }
    }
    let next_chapter = chapter + 1;
    if (next_book.id !== book.id) {
      next_chapter = next_book.chapters[0];
    }
    return [next_book, next_chapter];
  }
  prev_chapter_of(book, chapter) {
    let prev_book = book;
    if (chapter === book.chapters.first()) {
      let book_i = this.find_book(book.id);
      if (book_i == 0) {
        prev_book = this.books[this.books.length - 1];
      } else {
        prev_book = this.books[book_i - 1];
      }
    }
    let prev_chapter = chapter - 1;
    if (prev_book.id !== book.id) {
      prev_chapter = prev_book.chapters[prev_book.chapters.length - 1];
    }
    return [prev_book, prev_chapter];
  }
  set_chapter(chapter) {
    this.chapter = chapter;
    this.set_book(this.book);
  }
  // Sets the capitalization of the given name depending on *name_case*.
  to_case(name, name_case, delimeter) {
    name = name.replace(/ /g, delimeter);
    if (name_case == "lower_case") {
      name = name.toLowerCase();
    } else if (name_case == "upper_case") {
      name = name.toUpperCase();
    }
    return name;
  }
  get_verse_count() {
    return this.verse_counts.get_count_for(this.book.id, this.chapter);
  }
};
var VerseCounts = class {
  get_count_for(book, chapter) {
    return this.books[book][chapter] || 0;
  }
};
var BookData = class {
  constructor(id, name, chapters) {
    this.id = id;
    this.name = name;
    this.chapters = chapters;
  }
  /// Returns the number of the chapter at index
  get_chapter_number(index) {
    if (index >= this.chapters.length) {
      throw new Error("");
    }
    return this.chapters[index];
  }
  has_chapter(chapter) {
    return this.chapters.find((value, _, __) => value === chapter) !== void 0;
  }
};
var SyncCache = class {
  constructor() {
    this.syncs = {};
  }
  async sync(key, body) {
    if (!(key in this.syncs)) {
      this.syncs[key] = new SyncCacheItem();
    }
    let sync_item = this.syncs[key];
    sync_item.ref_count += 1;
    try {
      await sync_item.mutex.acquire().then(async () => {
        sync_item.data = await body();
        sync_item.mutex.cancel();
        sync_item.mutex.release();
      }).catch((e) => {
        if (e === E_CANCELED) {
        } else {
          throw e;
        }
      });
    } finally {
      sync_item.ref_count -= 1;
      if (sync_item.ref_count === 0) {
        delete this.syncs[key];
      }
    }
    return sync_item.data;
  }
};
var SyncCacheItem = class {
  constructor() {
    this.mutex = new Mutex();
    this.data = null;
    this.ref_count = 0;
  }
};
var BibleAPI = class {
  constructor() {
    this.cache_clear_timer = null;
    this.sync_cache = new SyncCache();
  }
  async _get_book_data(translation, book_id) {
    throw new Error("unimplemented");
  }
  async _get_books_data(translation) {
    throw new Error("unimplemented");
  }
  async _get_chapter(translation, book_id, chapter) {
    throw new Error("unimplemented");
  }
  async _get_translation(translation) {
    throw new Error("unimplemented");
  }
  async _get_translations() {
    throw new Error("unimplemented");
  }
  async get_default_translation() {
    throw new Error("unimplemented");
  }
  async _get_verse(translation, book_id, chapter, verse) {
    let chapter_data = await this.get_chapter(
      translation,
      book_id,
      chapter
    );
    return chapter_data[verse] || "";
  }
  async _get_verse_count(translation) {
    throw new Error("unimplemented");
  }
  /// Downloads a translation and saves it locally.
  async user_download_translation(translation) {
    let notify = new import_obsidian.Notice(
      "Downloading {0} translation".format(translation),
      0
    );
    let promises = [];
    let translation_data = await this.get_translation(translation);
    for (const book_id_ in translation_data.books) {
      const book_id = Number(book_id_);
      const chapters = translation_data.books[book_id];
      for (const chapter_key of Object.keys(chapters)) {
        const chapter = Number(chapter_key);
        const chapter_data = chapters[chapter];
        promises.push(this.save_chapter_data(
          chapter_data,
          translation,
          book_id,
          chapter
        ));
      }
    }
    notify.hide();
    notify = new import_obsidian.Notice("Saving {0} translation files".format(translation), 0);
    await Promise.all(promises);
    notify.hide();
    new import_obsidian.Notice("Download complete");
  }
  // Get book ID from translation and book name
  async book_id(translation, book_name) {
    let books = await this.get_books_data(translation);
    for (let i of books.keys()) {
      if (books[i].name === book_name) {
        return books[i].id;
      }
    }
    if (book_name in DEFAULT_NAME_MAP) {
      return DEFAULT_NAME_MAP[book_name];
    }
    throw new Error(
      "Translation '{0}' has no book named '{1}'".format(translation, book_name)
    );
  }
  async get_book_data(translation, book_id) {
    let book_key = "{0} {1}".format(translation, String(book_id));
    let data = await this.sync_cache.sync(
      "get_book_data_" + book_key,
      () => this._get_book_data(translation, book_id)
    );
    if (data == null) {
      throw new Error();
    }
    return data;
  }
  async get_books_data(translation) {
    return await this.sync_cache.sync(
      "get_books_data_" + translation,
      () => this._get_books_data(translation)
    );
  }
  async cache_chapter(translation, book_id, chapter, chapter_data, save_locally) {
    let key = this.make_chapter_key(translation, book_id, chapter);
    let cache_path = this.get_cache_path();
    this.plugin.app.vault.adapter.mkdir(cache_path);
    let cached_file_name = "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
    let cached_file_path = (0, import_obsidian.normalizePath)(
      cache_path + "/" + cached_file_name
    );
    if (chapter_data != null && !await this.plugin.app.vault.adapter.exists(cached_file_path)) {
      await this.plugin.app.vault.adapter.write(
        cached_file_path,
        this.make_chapter_file(chapter_data)
      );
    }
    if (this.cache_clear_timer !== null && this.cache_clear_timer_promise_err !== null) {
      this.cache_clear_timer_promise_err(null);
    }
    this.cache_clear_timer = new Promise((ok, err) => {
      this.cache_clear_timer_promise_err = err;
      setTimeout(ok, 6e4 * 60);
    });
    this.cache_clear_timer.then(() => this.clear_local_files()).catch((err) => {
    });
  }
  async get_chapter(translation, book_id, chapter) {
    let chapter_key = this.make_chapter_key(translation, book_id, chapter);
    let file_name = this.make_chapter_file_name(translation, book_id, chapter);
    let download_path = this.get_download_path();
    this.plugin.app.vault.adapter.mkdir(download_path);
    let download_file_path = (0, import_obsidian.normalizePath)(
      download_path + "/" + file_name
    );
    let cache_path = this.get_cache_path();
    this.plugin.app.vault.adapter.mkdir(cache_path);
    let cached_file_path = (0, import_obsidian.normalizePath)(
      cache_path + "/" + file_name
    );
    let data = await this.sync_cache.sync(
      "get_chapter_" + chapter_key,
      async () => {
        if (await this.plugin.app.vault.adapter.exists(download_file_path)) {
          return await this.load_chapter_file(download_path, file_name);
        } else if (await this.plugin.app.vault.adapter.exists(cached_file_path)) {
          return await this.load_chapter_file(cache_path, file_name);
        }
        return await this._get_chapter(
          translation,
          book_id,
          chapter
        );
      }
    );
    if (data === null || Object.keys(data).length == 0) {
      return [];
    }
    new Promise(async (ok, err) => {
      try {
        if (!await this.plugin.app.vault.adapter.exists(download_file_path)) {
          this.cache_chapter(
            translation,
            book_id,
            chapter,
            data,
            this.plugin.settings.store_locally
          );
        }
        ok(null);
      } catch (e) {
        err(e);
      }
    });
    return data;
  }
  get_cache_path() {
    return (0, import_obsidian.normalizePath)(this.plugin.manifest.dir + "/.mybiblecache");
  }
  get_download_path() {
    return (0, import_obsidian.normalizePath)(this.plugin.manifest.dir + "/.chapters");
  }
  async get_translation(translation) {
    return await this.sync_cache.sync(
      "get_translation_" + translation,
      () => this._get_translation(translation)
    );
  }
  async _get_default_translation() {
    return await this.sync_cache.sync(
      "get_default_translation",
      () => this._get_default_translation()
    );
  }
  async get_translations() {
    return await this.sync_cache.sync(
      "get_translations",
      () => this._get_translations()
    );
  }
  async get_verse(translation, book_id, chapter, verse) {
    let key = "get_verse_{0}_{1}_{2}_{3}".format(translation, String(book_id), String(chapter), String(verse));
    return await this.sync_cache.sync(
      key,
      () => this._get_verse(
        translation,
        book_id,
        chapter,
        verse
      )
    );
  }
  async get_verse_count(translation) {
    return await this.sync_cache.sync(
      "get_verse_count_" + translation,
      () => this._get_verse_count(translation)
    );
  }
  async clear_local_files() {
    this.cache_clear_timer = null;
    let cache_path = this.get_cache_path();
    if (await this.plugin.app.vault.adapter.exists(cache_path)) {
      if (!await this.plugin.app.vault.adapter.trashSystem(cache_path)) {
        await this.plugin.app.vault.adapter.trashLocal(cache_path);
      }
    }
    let download_path = this.get_download_path();
    if (await this.plugin.app.vault.adapter.exists(download_path)) {
      if (!await this.plugin.app.vault.adapter.trashSystem(download_path)) {
        await this.plugin.app.vault.adapter.trashLocal(download_path);
      }
    }
  }
  async load_chapter_file(folder, path) {
    this.plugin.app.vault.adapter.mkdir(folder);
    let raw = await this.plugin.app.vault.adapter.read(folder + "/" + path);
    let verse_list = [];
    if (raw.startsWith("[")) {
      verse_list = JSON.parse(raw);
    } else {
      verse_list = raw.split("\n");
    }
    let verses = {};
    for (let i = 0; i != verse_list.length; i++) {
      if (verse_list[i].length == 0) {
        continue;
      }
      verses[i + 1] = verse_list[i];
    }
    return verses;
  }
  make_chapter_file(chapter_data) {
    let added_verse_count = 0;
    let body = "";
    for (let i = 1; added_verse_count !== Object.keys(chapter_data).length; i++) {
      if (i in chapter_data) {
        body += chapter_data[i];
        added_verse_count += 1;
      }
      if (added_verse_count !== Object.keys(chapter_data).length) {
        body += "\n";
      }
    }
    return body;
  }
  /// Makes the file name for downloaded chapters
  make_chapter_file_name(translation, book_id, chapter) {
    return "{0} {1} {2}.txt".format(translation, String(book_id), String(chapter));
  }
  make_chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
  /// Saves chapter data to local disk
  async save_chapter_data(chapter_data, translation, book_id, chapter) {
    let path = this.get_download_path();
    this.plugin.app.vault.adapter.mkdir(path);
    let file_name = this.make_chapter_file_name(translation, book_id, chapter);
    let file_path = (0, import_obsidian.normalizePath)(
      path + "/" + file_name
    );
    if (!await this.plugin.app.vault.adapter.exists(file_path)) {
      let body = "";
      for (const i_ in chapter_data) {
        const i = Number(i_);
        body += chapter_data[i];
        if (i !== Object.keys(chapter_data).length) {
          body += "\n";
        }
      }
      await this.plugin.app.vault.adapter.write(
        file_path,
        body
      );
    }
  }
};
var BollsLifeBibleAPI = class extends BibleAPI {
  constructor() {
    super(...arguments);
    this.translations = {};
    this.translation_maps = {};
    this.cache_clear_timer = null;
    this.sync_cache = new SyncCache();
  }
  async _get_chapter(translation, book_id, chapter) {
    try {
      let verse_data_list = JSON.parse(await httpGet(
        "https://bolls.life/get-chapter/{0}/{1}/{2}/".format(translation, String(book_id), String(chapter))
      ));
      let texts = {};
      for (const data of verse_data_list) {
        let verse = data["verse"];
        texts[verse] = data["text"];
      }
      return texts;
    } catch (e) {
      if (e instanceof Error && e.message.startsWith("No book exists by name")) {
        return [];
      }
      throw e;
    }
  }
  async _get_translation(translation) {
    let verses = JSON.parse(
      await httpGet(
        "https://bolls.life/static/translations/{0}.json".format(translation)
      )
    );
    let bible = {
      translation,
      books: {}
    };
    await new Promise(async (ok, err) => {
      try {
        let i = 0;
        let curr_book_id = -1;
        let curr_chapter = -1;
        for (const data of verses) {
          let verse = data["verse"];
          curr_book_id = data["book"];
          curr_chapter = data["chapter"];
          if (!(curr_book_id in bible.books)) {
            bible.books[curr_book_id] = [];
          }
          if (!(curr_chapter in bible.books[curr_book_id])) {
            bible.books[curr_book_id][curr_chapter] = {};
          }
          bible.books[curr_book_id][curr_chapter][verse] = data["text"];
          i += 1;
        }
        ok(null);
      } catch (e) {
        err(e);
      }
    }).catch((e) => {
      throw e;
    });
    return bible;
  }
  async _get_book_data(translation, book_id) {
    let books = await this.get_books_data(translation);
    for (let book of books) {
      if (book.id == book_id) {
        return book;
      }
    }
    throw new Error();
  }
  async _get_books_data(translation) {
    let books = await this.get_translation_map(translation);
    books.sort(function(x, y) {
      if (x.id < y.id) {
        return -1;
      }
      if (x.id > y.id) {
        return 1;
      }
      return 0;
    });
    return books;
  }
  async _get_default_translation() {
    return "YLT";
  }
  async _get_translations() {
    if (Object.keys(this.translations).length === 0) {
      let list = JSON.parse(await httpGet(
        "https://bolls.life/static/bolls/app/views/languages.json"
      ));
      for (let language of list) {
        for (let item of language["translations"]) {
          if (item["short_name"] in this.translations) {
            throw new Error("Translation already added to map");
          }
          this.translations[item["short_name"]] = {
            abbreviated_name: item["short_name"],
            display_name: item["full_name"],
            language: language["language"]
          };
        }
      }
    }
    return this.translations;
  }
  async _get_verse_count(translation) {
    let json = JSON.parse(await httpGet(
      "https://bolls.life/get-verse-counts/{0}/".format(translation)
    ));
    let counts = new VerseCounts();
    counts.books = json;
    return counts;
  }
  async book_to_id(translation, book) {
    let book_ = book.toLowerCase();
    let map = await this.get_translation_map(translation);
    for (let i in map) {
      let book_data = map[i];
      if (book_ == book_data["name"].toLowerCase()) {
        return Number(i) + 1;
      }
    }
    throw new Error("No book exists by name {0}.".format(book));
  }
  chapter_key(translation, book_id, chapter) {
    return "{0}.{1}.{2}".format(translation, String(book_id), String(chapter));
  }
  async generate_translation_map(translation) {
    let map = await (0, import_obsidian.requestUrl)(
      "https://bolls.life/get-books/{0}/".format(translation)
    ).json;
    let book_data = [];
    for (let item of map) {
      let chapter_list = [...Array(item["chapters"]).keys()].map((x) => x + 1);
      book_data.push(new BookData(
        item["bookid"],
        item["name"],
        chapter_list
      ));
    }
    this.translation_maps[translation] = book_data;
  }
  async id_to_book(translation, book_id) {
    let map = await this.get_translation_map(translation);
    return map[book_id - 1]["name"];
  }
  async get_translation_map(translation) {
    if (!(translation in this.translation_maps)) {
      await this.generate_translation_map(translation);
    }
    return this.translation_maps[translation];
  }
};
var BuilderModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
    this.render();
  }
  render() {
    let containerEl = this.contentEl;
    new import_obsidian.Setting(containerEl).nameEl.createEl("h1", { text: "Book builder" });
    this.renderBibleFolder(new import_obsidian.Setting(containerEl));
    new import_obsidian.Setting(containerEl).setName("Translation").setDesc('Builds your Bible according to the layout of this tranlsation. If "Build with dynamic verses" is active, then the text from this version will be built into your Bible.').addDropdown(async (drop) => {
      drop.addOption(SELECTED_TRANSLATION_OPTION_KEY, SELECTED_TRANSLATION_OPTION.format(this.plugin.settings.reading_translation));
      let translations = await this.plugin.bible_api.get_translations();
      let translations_list = [];
      for (const key in translations) {
        translations_list.push(key);
      }
      translations_list = translations_list.sort((a, b) => {
        if (translations[a].language < translations[b].language) {
          return -1;
        }
        if (translations[a].language > translations[b].language) {
          return 1;
        }
        if (a < b) {
          return -1;
        }
        if (a > b) {
          return 1;
        }
        return 0;
      });
      for (const i in translations_list) {
        let key = translations_list[i];
        drop.addOption(
          key,
          translation_to_display_name(translations[key])
        );
      }
      drop.onChange(async (value) => {
        await this.plugin.settings.set_translation(value, this.plugin);
        await this.plugin.saveSettings();
      });
      drop.setValue(this.plugin.settings.translation);
    });
    this.renderBuildButton(new import_obsidian.Setting(containerEl));
    new import_obsidian.Setting(containerEl).nameEl.createEl("h3", { text: "Chapters" });
    this.renderChapterName(new import_obsidian.Setting(containerEl));
    this.renderChapterFormat(new import_obsidian.Setting(containerEl));
    new import_obsidian.Setting(containerEl).setName("Pad numbers").setDesc('When active, pads chapter numbers with extra zeros. For example, "Psalms 5" becomes "Psalms 005".').addToggle((toggle) => toggle.setTooltip("Toggle alignment padding of chapter numbers").setValue(this.plugin.settings.padded_chapter).onChange(async (value) => {
      this.plugin.settings.padded_chapter = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).nameEl.createEl("h3", { text: "Verses" });
    this.renderVerseFormat(new import_obsidian.Setting(containerEl));
    new import_obsidian.Setting(containerEl).setName("Build with dynamic verses").setDesc("When active, your Bible will be built with verse references that can be quickly changed when you switch translations. When inactive, the text of the translation is built directly into your Bible.").addToggle((toggle) => toggle.setTooltip("Toggle generating with dynamic verses").setValue(this.plugin.settings.build_with_dynamic_verses).onChange(async (value) => {
      this.plugin.settings.build_with_dynamic_verses = value;
      await this.plugin.saveSettings();
    }));
    let books_header = new import_obsidian.Setting(containerEl);
    books_header.nameEl.createEl("h3", { text: "Books" });
    books_header.addToggle((toggle) => {
      toggle.setTooltip("Toggle if books should generate folders").setValue(this.plugin.settings.book_folders_enabled).onChange(async (value) => {
        this.plugin.settings.book_folders_enabled = value;
        await this.plugin.saveSettings();
      });
    });
    this.renderBookFormat(new import_obsidian.Setting(containerEl));
    this.renderNameDelimeter(new import_obsidian.Setting(containerEl));
    this.renderBookCapitalization(new import_obsidian.Setting(containerEl));
    this.renderBookAbbreviation(new import_obsidian.Setting(containerEl));
    this.renderPaddedOrderNums(new import_obsidian.Setting(containerEl));
    let index_header = new import_obsidian.Setting(containerEl);
    let index_name = new import_obsidian.Setting(containerEl);
    let index_links = new import_obsidian.Setting(containerEl);
    let index_body = new import_obsidian.Setting(containerEl);
    index_header.addToggle((toggle) => {
      toggle.setTooltip("Toggle book index generation").setValue(this.plugin.settings.index_enabled).onChange(async (value) => {
        this.plugin.settings.index_enabled = value;
        await this.plugin.saveSettings();
      });
    }).nameEl.createEl("h3", { text: "Book index" });
    this.renderIndexName(index_name);
    this.renderIndexBookLink(index_links);
    this.renderIndexBody(index_body);
    let chapter_index_header = new import_obsidian.Setting(containerEl);
    let chapter_index_name = new import_obsidian.Setting(containerEl);
    let chapter_index_links = new import_obsidian.Setting(containerEl);
    let chapter_index_body = new import_obsidian.Setting(containerEl);
    chapter_index_header.addToggle((toggle) => {
      toggle.setTooltip("Toggle chapter index generation").setValue(this.plugin.settings.chapter_index_enabled).onChange(async (value) => {
        this.plugin.settings.chapter_index_enabled = value;
        await this.plugin.saveSettings();
      });
    }).nameEl.createEl("h3", { text: "Chapter indexs" });
    this.renderChapterIndexName(chapter_index_name);
    this.renderChapterIndexLink(chapter_index_links);
    this.renderChapterIndexBody(chapter_index_body);
    this.renderBuildButton(new import_obsidian.Setting(containerEl));
  }
  // Top renderers
  renderBibleFolder(setting) {
    setting.clear();
    setting.setName("Folder").setDesc("The path to the folder where your Bible will be placed. The folder should be empty for your Bible. If the path does not exist it will be created.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.bible_folder = DEFAULT_SETTINGS.bible_folder;
        this.renderBibleFolder(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.bible_folder).setValue(this.plugin.settings.bible_folder).onChange(async (value) => {
        this.plugin.settings.bible_folder = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderBuildButton(setting) {
    setting.addButton(
      (btn) => btn.setButtonText("Build").setTooltip("Build your bible").setCta().onClick(async (_) => {
        this.close();
        await this.plugin.build_bible();
      })
    );
  }
  // Book renderers
  renderBookFormat(setting) {
    setting.clear();
    setting.setName("Name format").setDesc('The format for the names of the folders of each book of the bible. For example, "{order} {name}" would become "2 Exodus". Leave blank to not have folders for each book.').addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.book_name_format = DEFAULT_SETTINGS.book_name_format;
        this.renderBookFormat(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.book_name_format).setValue(this.plugin.settings.book_name_format).onChange(async (value) => {
        this.plugin.settings.book_name_format = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderBookAbbreviation(setting) {
    setting.clear();
    setting.setName("Abbreviate names").setDesc('When active, The names of books will be abbreviated to three letters. For example, "Genesis" becomes "Gen" and "1 Kings" becomes "1Ki". (May cause issues in some translations.)').addToggle(
      (toggle) => toggle.setTooltip("Toggle book name abbreviation").setValue(this.plugin.settings.book_name_abbreviated).onChange(async (value) => {
        this.plugin.settings.book_name_abbreviated = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderBookCapitalization(setting) {
    setting.clear();
    setting.setName("Name capitalization").setDesc("Dictates the capitalization of book names.").addDropdown(
      (drop) => drop.addOption("lower_case", "Lower case").addOption("name_case", "Name case").addOption("upper_case", "Upper case").setValue(this.plugin.settings.book_name_capitalization).onChange(async (value) => {
        this.plugin.settings.book_name_capitalization = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderNameDelimeter(setting) {
    setting.clear();
    setting.setName("Name delimiter").setDesc('The characters separating words in book names, such as the spaces in "1 John" or "Song of Solomon".').addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.book_name_delimiter = DEFAULT_SETTINGS.book_name_delimiter;
        this.renderNameDelimeter(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder('Example: "' + DEFAULT_SETTINGS.book_name_delimiter + '"').setValue(this.plugin.settings.book_name_delimiter).onChange(async (value) => {
        this.plugin.settings.book_name_delimiter = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderPaddedOrderNums(setting) {
    setting.clear();
    setting.setName("Pad order numbers").setDesc('When Active, pads order numbers with extra zeros. For example, "1 Genesis" would become "01 Gensis" when active.').addToggle(
      (toggle) => toggle.setTooltip("Toggle alignment padding of book order numbers").setValue(this.plugin.settings.padded_order).onChange(async (value) => {
        this.plugin.settings.padded_order = value;
        await this.plugin.saveSettings();
      })
    );
  }
  // Chapter renderers
  renderChapterFormat(setting) {
    setting.clear();
    setting.setName("Body format").setDesc("The format for the contents of chapters.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.chapter_body_format = DEFAULT_SETTINGS.chapter_body_format;
        this.renderChapterFormat(setting);
        await this.plugin.saveSettings();
      })
    ).addTextArea(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.chapter_body_format).setValue(this.plugin.settings.chapter_body_format).onChange(
        async (value) => {
          this.plugin.settings.chapter_body_format = value;
          await this.plugin.saveSettings();
        }
      )
    );
  }
  renderChapterName(setting) {
    setting.clear();
    setting.setName("Name format").setDesc('The format for the names of chapters. For example, "{book} {chapter}" would become "Psalms 23".').addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.chapter_name_format = DEFAULT_SETTINGS.chapter_name_format;
        this.renderChapterName(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder(this.plugin.settings.chapter_name_format).setValue(this.plugin.settings.chapter_name_format).onChange(async (value) => {
        this.plugin.settings.chapter_name_format = value;
        await this.plugin.saveSettings();
      })
    );
  }
  // Verse renders
  renderVerseFormat(setting) {
    setting.clear();
    setting.setName("Format").setDesc("Formatting for individual verses.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.verse_body_format = DEFAULT_SETTINGS.verse_body_format;
        this.renderVerseFormat(setting);
        await this.plugin.saveSettings();
      })
    ).addTextArea(
      (text) => text.setPlaceholder("Example: " + DEFAULT_SETTINGS.verse_body_format).setValue(this.plugin.settings.verse_body_format).onChange(async (value) => {
        this.plugin.settings.verse_body_format = value;
        await this.plugin.saveSettings();
      })
    );
  }
  // Book index
  renderIndexName(setting) {
    setting.clear();
    setting.setName("Name format").setDesc("The format for the name of the book index.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.index_name_format = DEFAULT_SETTINGS.index_name_format;
        this.renderIndexName(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.index_name_format).setValue(this.plugin.settings.index_name_format).onChange(async (value) => {
        this.plugin.settings.index_name_format = value;
        await this.plugin.saveSettings();
      })
    );
  }
  renderIndexBookLink(setting) {
    setting.clear();
    setting.setName("Book element format").setDesc("The format for each book element in a list.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.index_link_format = DEFAULT_SETTINGS.index_link_format;
        this.renderIndexBookLink(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.index_link_format).setValue(this.plugin.settings.index_link_format).onChange(async (value) => {
        this.plugin.settings.index_link_format = value;
        await this.plugin.saveSettings();
      })
    );
    setting.setDisabled(!this.plugin.settings.index_enabled);
  }
  renderIndexBody(setting) {
    setting.clear();
    setting.setName("Body format").setDesc("The format for the content of the book index.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.index_format = DEFAULT_SETTINGS.index_format;
        this.renderIndexBody(setting);
        await this.plugin.saveSettings();
      })
    ).addTextArea(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.index_format).setValue(this.plugin.settings.index_format).onChange(async (value) => {
        this.plugin.settings.index_format = value;
        await this.plugin.saveSettings();
      })
    );
    setting.setDisabled(!this.plugin.settings.index_enabled);
  }
  // Chapter index
  renderChapterIndexName(setting) {
    setting.clear();
    setting.setName("Name format").setDesc("The format for the name of the chapter index.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.chapter_index_name_format = DEFAULT_SETTINGS.chapter_index_name_format;
        this.renderChapterIndexName(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.chapter_index_name_format).setValue(this.plugin.settings.chapter_index_name_format).onChange(async (value) => {
        this.plugin.settings.chapter_index_name_format = value;
        await this.plugin.saveSettings();
      })
    );
    setting.setDisabled(!this.plugin.settings.index_enabled);
  }
  renderChapterIndexLink(setting) {
    setting.clear();
    setting.setName("Chapter element format").setDesc("The format for each chapter element in a list.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.chapter_index_link_format = DEFAULT_SETTINGS.chapter_index_link_format;
        this.renderChapterIndexLink(setting);
        await this.plugin.saveSettings();
      })
    ).addText(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.chapter_index_link_format).setValue(this.plugin.settings.chapter_index_link_format).onChange(async (value) => {
        this.plugin.settings.chapter_index_link_format = value;
        await this.plugin.saveSettings();
      })
    );
    setting.setDisabled(!this.plugin.settings.index_enabled);
  }
  renderChapterIndexBody(setting) {
    setting.clear();
    setting.setName("Chapter format").setDesc("The format for the content of the chapter index.").addExtraButton(
      (btn) => btn.setIcon("rotate-ccw").setTooltip("Reset value").onClick(async () => {
        this.plugin.settings.chapter_index_format = DEFAULT_SETTINGS.chapter_index_format;
        this.renderChapterIndexBody(setting);
        await this.plugin.saveSettings();
      })
    ).addTextArea(
      (text) => text.setPlaceholder(DEFAULT_SETTINGS.chapter_index_format).setValue(this.plugin.settings.chapter_index_format).onChange(async (value) => {
        this.plugin.settings.chapter_index_format = value;
        await this.plugin.saveSettings();
      })
    );
    setting.setDisabled(!this.plugin.settings.index_enabled);
  }
  refresh() {
    this.contentEl.empty();
    this.render();
  }
};
var ErrorModal = class extends import_obsidian.Modal {
  constructor(app, plugin, title, body) {
    super(app);
    this.plugin = plugin;
    this.title = title;
    this.body = body;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("h1", { text: this.title });
    contentEl.createEl("span", { text: this.body });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Close").onClick(() => {
        this.close();
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearLocalFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Clear local files?" });
    contentEl.createEl("span", {
      text: "You are about to clear out all files added by My Bible from your file system. This includes temporay cached chapters and translations you manually downloaded.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear these files?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear files").setCta().onClick(async () => {
        this.close();
        await this.plugin.bible_api.clear_local_files();
        new import_obsidian.Notice("Files cleared!");
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ClearOldBibleFilesModal = class extends import_obsidian.Modal {
  constructor(app, plugin) {
    super(app);
    this.plugin = plugin;
  }
  onOpen() {
    const { contentEl } = this;
    let bible_path = this.plugin.settings.bible_folder;
    contentEl.createEl("h1", { text: "Bible folder is not empty" });
    contentEl.createEl("span", {
      text: "The Bible folder in your settings is not empty. If you built a Bible in this folder before the new bible may be interlaced with the old one.".format(bible_path)
    });
    contentEl.createEl("p", {
      text: "Do you want to clear the folder before building your Bible?"
    });
    contentEl.createEl("p", {});
    new import_obsidian.Setting(contentEl).addButton(
      (btn) => btn.setButtonText("Cancel").onClick(() => {
        this.close();
      })
    ).addButton(
      (btn) => btn.setButtonText("Build without clearing").setCta().onClick(async () => {
        this.close();
        await this.plugin._build_bible(bible_path);
      })
    ).addButton(
      (btn) => btn.setButtonText("Clear and build").setCta().onClick(async () => {
        this.close();
        let notice = new import_obsidian.Notice("Clearing bible folder...", 0);
        let abstract = this.app.vault.getAbstractFileByPath(
          (0, import_obsidian.normalizePath)(bible_path)
        );
        if (abstract != null) {
          await this.app.vault.delete(abstract, true);
        }
        this.app.vault.adapter.mkdir((0, import_obsidian.normalizePath)(bible_path));
        notice.hide();
        await this.plugin._build_bible(bible_path);
      })
    );
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var QuickChangeTranslationeModal = class extends import_obsidian.FuzzySuggestModal {
  constructor(plugin) {
    super(plugin.app);
    this.plugin = plugin;
  }
  // Returns all available suggestions.
  getItems() {
    let translations_list = Object.keys(this.translations).map((k) => this.translations[k]);
    return translations_list;
  }
  getItemText(item) {
    return translation_to_display_name(item);
  }
  // Perform action on the selected suggestion.
  onChooseItem(item, evt) {
    if (this.onChose !== null) {
      this.onChose(item);
    }
  }
};
var SettingsTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Translation").setDesc("The version of the Bible that will be displayed in dynamic verses.").addDropdown(async (drop) => {
      let translations = await this.plugin.bible_api.get_translations();
      let translations_list = [];
      for (const key in translations) {
        translations_list.push(key);
      }
      translations_list = translations_list.sort((a, b) => {
        if (translations[a].language < translations[b].language) {
          return -1;
        }
        if (translations[a].language > translations[b].language) {
          return 1;
        }
        if (a < b) {
          return -1;
        }
        if (a > b) {
          return 1;
        }
        return 0;
      });
      for (const i in translations_list) {
        let key = translations_list[i];
        drop.addOption(
          key,
          "{0} - {1} - {2}".format(
            translations[key].language,
            key,
            translations[key].display_name
          )
        );
      }
      drop.onChange(async (value) => {
        this.plugin.settings.reading_translation = value;
        await this.plugin.saveSettings();
      });
      drop.setValue(this.plugin.settings.reading_translation);
    });
    new import_obsidian.Setting(containerEl).setDesc("Looking for build settings? They have been moved to the `Book builder` menu. You can access the menu via the `My Bible: Build Bible` command.");
  }
};
var DEFAULT_NAME_MAP = {
  "Genesis": 1,
  "Exodus": 2,
  "Leviticus": 3,
  "Numbers": 4,
  "Deuteronomy": 5,
  "Joshua": 6,
  "Judges": 7,
  "Ruth": 8,
  "1 Samuel": 9,
  "2 Samuel": 10,
  "1 Kings": 11,
  "2 Kings": 12,
  "1 Chronicles": 13,
  "2 Chronicles": 14,
  "Ezra": 15,
  "Nehemiah": 16,
  "Esther": 17,
  "Job": 18,
  "Psalms": 19,
  "Psalm": 19,
  // Alternate spelling
  "Proverbs": 20,
  "Ecclesiastes": 21,
  "Song of Solomon": 22,
  "Isaiah": 23,
  "Jeremiah": 24,
  "Lamentations": 25,
  "Ezekiel": 26,
  "Daniel": 27,
  "Hosea": 28,
  "Joel": 29,
  "Amos": 30,
  "Obadiah": 31,
  "Jonah": 32,
  "Micah": 33,
  "Nahum": 34,
  "Habakkuk": 35,
  "Zephaniah": 36,
  "Haggai": 37,
  "Zechariah": 38,
  "Malachi": 39,
  "Matthew": 40,
  "Mark": 41,
  "Luke": 42,
  "John": 43,
  "Acts": 44,
  "Romans": 45,
  "1 Corinthians": 46,
  "2 Corinthians": 47,
  "Galatians": 48,
  "Ephesians": 49,
  "Philippians": 50,
  "Colossians": 51,
  "1 Thessalonians": 52,
  "2 Thessalonians": 53,
  "1 Timothy": 54,
  "2 Timothy": 55,
  "Titus": 56,
  "Philemon": 57,
  "Hebrews": 58,
  "James": 59,
  "1 Peter": 60,
  "2 Peter": 61,
  "1 John": 62,
  "2 John": 63,
  "3 John": 64,
  "Jude": 65,
  "Revelation": 66,
  "1 Esdras": 67,
  "Tobit": 68,
  "Judith": 69,
  "Wisdom": 70,
  "Sirach": 71,
  "Epistle of Jeremiah": 72,
  "Baruch": 73,
  "1 Maccabees": 74,
  "2 Maccabees": 75,
  "3 Maccabees": 76,
  "2 Esdras": 77,
  "Susanna": 78,
  "Bel and Dragon": 79,
  "4 Maccabees": 80,
  "Greek Additions to Esther": 81,
  "3 Holy Children's Song": 82,
  "Prayer of Manasseh": 83,
  "Azariah": 88
  // Jump in number
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJub2RlX21vZHVsZXMvYXN5bmMtbXV0ZXgvaW5kZXgubWpzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRBcHAsXG5cdE1vZGFsLFxuXHROb3RpY2UsXG5cdFBsdWdpbixcblx0UGx1Z2luU2V0dGluZ1RhYixcblx0U2V0dGluZyxcblx0RnV6enlTdWdnZXN0TW9kYWwsXG5cdFRGaWxlLFxuXHRURm9sZGVyLFxuXHRub3JtYWxpemVQYXRoLFxuXHRyZXF1ZXN0VXJsLFxufSBmcm9tICdvYnNpZGlhbic7XG5cbmltcG9ydCB7IEVfQ0FOQ0VMRUQsIE11dGV4IH0gZnJvbSAnYXN5bmMtbXV0ZXgnO1xuXG5jb25zdCBCVUlMRF9FTkRfVE9BU1QgPSBcIkJpYmxlIGJ1aWxkIGZpbmlzaGVkIVwiO1xuY29uc3QgU0VMRUNURURfVFJBTlNMQVRJT05fT1BUSU9OID0gXCI8U2VsZWN0ZWQgcmVhZGluZyB0cmFuc2xhdGlvbiwgezB9PlwiXG5jb25zdCBTRUxFQ1RFRF9UUkFOU0xBVElPTl9PUFRJT05fS0VZID0gXCJkZWZhdWx0XCJcblxuLy8gUmVtZW1iZXIgdG8gcmVuYW1lIHRoZXNlIGNsYXNzZXMgYW5kIGludGVyZmFjZXMhXG5cbmNsYXNzIE15QmlibGVTZXR0aW5ncyB7XG5cdHRyYW5zbGF0aW9uOiBzdHJpbmc7XG5cdHJlYWRpbmdfdHJhbnNsYXRpb246IHN0cmluZ1xuXHRiaWJsZV9mb2xkZXI6IHN0cmluZztcblxuXHRzdG9yZV9sb2NhbGx5OiBib29sZWFuO1xuXG5cdHBhZGRlZF9vcmRlcjogYm9vbGVhbjtcblx0Ym9va19mb2xkZXJzX2VuYWJsZWQ6IGJvb2xlYW47XG5cdGJvb2tfbmFtZV9mb3JtYXQ6IHN0cmluZztcblx0Ym9va19uYW1lX2RlbGltaXRlcjogc3RyaW5nO1xuXHRib29rX25hbWVfY2FwaXRhbGl6YXRpb246IHN0cmluZztcblx0Ym9va19uYW1lX2FiYnJldmlhdGVkOiBib29sZWFuO1xuXG5cdHBhZGRlZF9jaGFwdGVyOiBib29sZWFuO1xuXHRjaGFwdGVyX25hbWVfZm9ybWF0OiBzdHJpbmc7XG5cdGNoYXB0ZXJfYm9keV9mb3JtYXQ6IHN0cmluZztcblxuXHRidWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzOiBib29sZWFuO1xuXHR2ZXJzZV9ib2R5X2Zvcm1hdDogc3RyaW5nO1xuXG5cdGluZGV4X2VuYWJsZWQ6IGJvb2xlYW5cblx0aW5kZXhfbmFtZV9mb3JtYXQ6IHN0cmluZ1xuXHRpbmRleF9mb3JtYXQ6IHN0cmluZ1xuXHRpbmRleF9saW5rX2Zvcm1hdDogc3RyaW5nXG5cblx0Y2hhcHRlcl9pbmRleF9lbmFibGVkOiBib29sZWFuXG5cdGNoYXB0ZXJfaW5kZXhfbmFtZV9mb3JtYXQ6IHN0cmluZ1xuXHRjaGFwdGVyX2luZGV4X2Zvcm1hdDogc3RyaW5nXG5cdGNoYXB0ZXJfaW5kZXhfbGlua19mb3JtYXQ6IHN0cmluZ1xuXG5cdF9idWlsdF90cmFuc2xhdGlvbjogc3RyaW5nO1xuXG5cdGFzeW5jIHNldF90cmFuc2xhdGlvbih2YWw6IHN0cmluZywgcGx1Z2luOiBNeUJpYmxlKSB7XG5cdFx0dGhyb3cgXCJVbmltcGxlbWVudGVkXCJcblx0fVxufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeUJpYmxlU2V0dGluZ3MgPSB7XG5cdHRyYW5zbGF0aW9uOiBTRUxFQ1RFRF9UUkFOU0xBVElPTl9PUFRJT05fS0VZLFxuXHRyZWFkaW5nX3RyYW5zbGF0aW9uOiBcIldFQlwiLFxuXHRiaWJsZV9mb2xkZXI6IFwiL015IEJpYmxlL1wiLFxuXHRib29rX2ZvbGRlcnNfZW5hYmxlZDogdHJ1ZSxcblx0Ym9va19uYW1lX2Zvcm1hdDogXCJ7b3JkZXJ9IHtib29rfVwiLFxuXHRib29rX25hbWVfZGVsaW1pdGVyOiBcIiBcIixcblx0Y2hhcHRlcl9uYW1lX2Zvcm1hdDogXCJ7Ym9va30ge2NoYXB0ZXJ9XCIsXG5cdGJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbjogXCJuYW1lX2Nhc2VcIixcblx0Ym9va19uYW1lX2FiYnJldmlhdGVkOiBmYWxzZSxcblx0cGFkZGVkX29yZGVyOiB0cnVlLFxuXHRwYWRkZWRfY2hhcHRlcjogZmFsc2UsXG5cdGJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXM6IHRydWUsXG5cdHZlcnNlX2JvZHlfZm9ybWF0OiBcIiMjIyMjIyB7dmVyc2V9XFxuXCJcblx0XHQrIFwie3ZlcnNlX3RleHR9XCJcblx0LFxuXHRjaGFwdGVyX2JvZHlfZm9ybWF0OiBcIlxcblwiXG5cdFx0KyBcIiMjIyMjIyBOYXZpZ2F0aW9uXFxuXCJcblx0XHQrIFwiKipbW3tsYXN0X2NoYXB0ZXJfbmFtZX18XHUyM0VBIHtsYXN0X2NoYXB0ZXJfbmFtZX1dXSB8IFtbe2NoYXB0ZXJfaW5kZXh9fENoYXB0ZXJzXV0gfCBbW3tuZXh0X2NoYXB0ZXJfbmFtZX18e25leHRfY2hhcHRlcl9uYW1lfSBcdTIzRTldXSoqXFxuXCJcblx0XHQrIFwiKipbW3tmaXJzdF9jaGFwdGVyX25hbWV9fEZpcnN0ICh7Zmlyc3RfY2hhcHRlcn0pXV0gfCBbW3tmaW5hbF9jaGFwdGVyX25hbWV9fExhc3QgKHtmaW5hbF9jaGFwdGVyfSldXSoqXFxuXCJcblx0XHQrIFwiXFxuXCJcblx0XHQrIFwie3ZlcnNlc31cXG5cIlxuXHRcdCsgXCJcXG5cIlxuXHRcdCsgXCIjIyMjIyMgTmF2aWdhdGlvblxcblwiXG5cdFx0KyBcIioqW1t7bGFzdF9jaGFwdGVyX25hbWV9fFx1MjNFQSB7bGFzdF9jaGFwdGVyX25hbWV9XV0gfCBbW3tjaGFwdGVyX2luZGV4fXxDaGFwdGVyc11dIHwgW1t7bmV4dF9jaGFwdGVyX25hbWV9fHtuZXh0X2NoYXB0ZXJfbmFtZX0gXHUyM0U5XV0qKlxcblwiXG5cdFx0KyBcIioqW1t7Zmlyc3RfY2hhcHRlcl9uYW1lfXxGaXJzdCAoe2ZpcnN0X2NoYXB0ZXJ9KV1dIHwgW1t7ZmluYWxfY2hhcHRlcl9uYW1lfXxMYXN0ICh7ZmluYWxfY2hhcHRlcn0pXV0qKlxcblwiXG5cdFx0KyBcIlxcblwiXG5cdCxcblx0aW5kZXhfZW5hYmxlZDogdHJ1ZSxcblx0aW5kZXhfbmFtZV9mb3JtYXQ6IFwiLS0gQmlibGUgLS1cIixcblx0aW5kZXhfbGlua19mb3JtYXQ6IFwiLSBbW3tib29rX2luZGV4fXx7Ym9va31dXVwiLFxuXHRpbmRleF9mb3JtYXQ6IFwiXCJcblx0XHQrIFwiIyMjIE9sZCB0ZXN0YW1lbnRcXG5cIlxuXHRcdCsgXCJ7b2xkX3Rlc3RhbWVudH1cXG5cIlxuXHRcdCsgXCIjIyMgTmV3IHRlc3RhbWVudFxcblwiXG5cdFx0KyBcIntuZXdfdGVzdGFtZW50fVxcblwiXG5cdFx0KyBcIiMjIyBBcG9jcnlwaGFcXG5cIlxuXHRcdCsgXCJ7YXBvY3J5cGhhfVwiXG5cdCxcblx0Y2hhcHRlcl9pbmRleF9lbmFibGVkOiB0cnVlLFxuXHRjaGFwdGVyX2luZGV4X25hbWVfZm9ybWF0OiBcIi0tIHtib29rfSAtLVwiLFxuXHRjaGFwdGVyX2luZGV4X2xpbmtfZm9ybWF0OiBcIi0gW1t7Y2hhcHRlcl9uYW1lfXx7Y2hhcHRlcn1dXVwiLFxuXHRjaGFwdGVyX2luZGV4X2Zvcm1hdDogXCJcIlxuXHRcdCsgXCIjIyMjIyMgTmF2aWdhdGlvblxcblwiXG5cdFx0KyBcIipbW3tpbmRleH18Qm9va3NdXSpcXG5cIlxuXHRcdCsgXCJcXG5cIlxuXHRcdCsgXCIjIyMgQ2hhcHRlcnNcXG5cIlxuXHRcdCsgXCJ7Y2hhcHRlcnN9XFxuXCJcblx0LFxuXHRzdG9yZV9sb2NhbGx5OiBmYWxzZSxcblxuXHRfYnVpbHRfdHJhbnNsYXRpb246IFwiXCIsXG5cblx0c2V0X3RyYW5zbGF0aW9uOiBhc3luYyBmdW5jdGlvbiAodmFsOiBzdHJpbmcsIHBsdWdpbjogTXlCaWJsZSk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGlmICh2YWwgPT09IFNFTEVDVEVEX1RSQU5TTEFUSU9OX09QVElPTl9LRVkpIHtcblx0XHRcdHRoaXMudHJhbnNsYXRpb24gPSB2YWxcblx0XHRcdHJldHVyblxuXHRcdH1cblxuXHRcdGxldCBoYXNfdHJhbnNsYXRpb24gPSBmYWxzZTtcblx0XHRsZXQgdHJhbnNsYXRpb25zID0gKGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpKTtcblx0XHRpZiAoISh2YWwgaW4gdHJhbnNsYXRpb25zKSkge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IGF3YWl0IHBsdWdpbi5iaWJsZV9hcGkuZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb24oKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy50cmFuc2xhdGlvbiA9IHZhbDtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gaHR0cEdldCh0aGVVcmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG5cdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAob2ssIGVycikgPT4ge1xuXHRcdG9rKGF3YWl0IHJlcXVlc3RVcmwodGhlVXJsKS50ZXh0KTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIGlzX2FscGhhKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiAzOSAmJiBjaGFyIDwgNDIpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfYWxwaGFudW1lcmljKHN0cmluZzogc3RyaW5nKTogYm9vbGVhbiB7XG5cdGZvciAobGV0IGNoYXJfc3RyIG9mIHN0cmluZykge1xuXHRcdGxldCBjaGFyID0gY2hhcl9zdHIuY2hhckNvZGVBdCgwKTtcblx0XHRpZiAoKGNoYXIgPiA2NCAmJiBjaGFyIDwgOTEpIHx8IChjaGFyID4gOTYgJiYgY2hhciA8IDEyMykgfHwgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpKSB7XG5cdFx0XHQvLyBDaGFyYWN0ZXIgaXMgYSBjYXBpdGFsIG9yIGxvd2VyY2FzZSBsZXR0ZXIsIGNvbnRpbnVlXG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Ly8gQ2hhcmFjdGVyIGlzIG5vdCBhIGNhcGl0YWwgb3IgbG93ZXJjYXNlIGxldHRlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgdXBwZXJjYXNlIG9yIGxvd2VyY2FzZSBsZXR0ZXJzLCByZXR1cm4gdHJ1ZVxuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gaXNfbnVtZXJpYyhzdHJpbmc6IHN0cmluZyk6IGJvb2xlYW4ge1xuXHRmb3IgKGxldCBjaGFyX3N0ciBvZiBzdHJpbmcpIHtcblx0XHRsZXQgY2hhciA9IGNoYXJfc3RyLmNoYXJDb2RlQXQoMCk7XG5cdFx0aWYgKGNoYXIgPiA0NyAmJiBjaGFyIDwgNTgpIHtcblx0XHRcdC8vIENoYXJhY3RlciBpcyBhIG51bWJlciwgY29udGludWVcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHQvLyBDaGFyYWN0ZXIgaXMgbm90IG51bWJlciwgcmV0dXJuIGZhbHNlXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdC8vIEFsbCBjaGFyYWN0ZXJzIHdlcmUgbnVtYmVycywgcmV0dXJuIHRydWVcblx0cmV0dXJuIHRydWU7XG59XG5cblxuYXN5bmMgZnVuY3Rpb24gc2F2ZV9maWxlKHBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKSB7XG5cdGxldCBmaWxlX3BhdGggPSBub3JtYWxpemVQYXRoKHBhdGgpO1xuXHRsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlX3BhdGgpXG5cdGlmIChmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgY29udGVudClcblx0fSBlbHNlIGlmIChmaWxlID09PSBudWxsKSB7XG5cdFx0YXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKFxuXHRcdFx0ZmlsZV9wYXRoLFxuXHRcdFx0Y29udGVudCxcblx0XHQpXG5cdH1cbn1cblxuZnVuY3Rpb24gdHJhbnNsYXRpb25fdG9fZGlzcGxheV9uYW1lKHRyYW5zbGF0aW9uOlRyYW5zbGF0aW9uKTpzdHJpbmcge1xuXHRyZXR1cm4gXCJ7MH0gLSB7MX0gLSB7Mn1cIlxuXHRcdC5mb3JtYXQodHJhbnNsYXRpb24ubGFuZ3VhZ2UsIHRyYW5zbGF0aW9uLmFiYnJldmlhdGVkX25hbWUsIHRyYW5zbGF0aW9uLmRpc3BsYXlfbmFtZSlcblx0O1xufVxuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE15QmlibGUgZXh0ZW5kcyBQbHVnaW4ge1xuXHRiaWJsZV9hcGk6IEJpYmxlQVBJXG5cdHNldHRpbmdzOiBNeUJpYmxlU2V0dGluZ3Ncblx0cHJvZ3Jlc3Nfbm90aWNlOiBOb3RpY2UgfCBudWxsXG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cblx0XHR0aGlzLmJpYmxlX2FwaSA9IG5ldyBCb2xsc0xpZmVCaWJsZUFQSSgpO1xuXHRcdHRoaXMuYmlibGVfYXBpLnBsdWdpbiA9IHRoaXM7XG5cblx0XHRhd2FpdCB0aGlzLnNldHRpbmdzLnNldF90cmFuc2xhdGlvbih0aGlzLnNldHRpbmdzLnRyYW5zbGF0aW9uLCB0aGlzKTtcblxuXHRcdC8vIFRoaXMgYWRkcyBhIHNpbXBsZSBjb21tYW5kIHRoYXQgY2FuIGJlIHRyaWdnZXJlZCBhbnl3aGVyZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ2NyZWF0ZV9iaWJsZV9maWxlcycsXG5cdFx0XHRuYW1lOiAnQnVpbGQgQmlibGUnLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bmV3IEJ1aWxkZXJNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdxdWlja19jaGFuZ2VfdHJhbnNsYXRpb24nLFxuXHRcdFx0bmFtZTogJ0NoYW5nZSB0cmFuc2xhdGlvbicsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRsZXQgbW9kYWwgPSBuZXcgUXVpY2tDaGFuZ2VUcmFuc2xhdGlvbmVNb2RhbCh0aGlzKVxuXHRcdFx0XHRtb2RhbC50cmFuc2xhdGlvbnMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfdHJhbnNsYXRpb25zKClcblx0XHRcdFx0bW9kYWwub25DaG9zZSA9IHRyYW5zbGF0aW9uID0+IHtcblx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLnJlYWRpbmdfdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbi5hYmJyZXZpYXRlZF9uYW1lXG5cdFx0XHRcdH1cblx0XHRcdFx0bW9kYWwub3BlbigpXG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdjbGVhcl9jYWNoZScsXG5cdFx0XHRuYW1lOiAnQ2xlYXIgbG9jYWwgZmlsZXMnLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bmV3IENsZWFyTG9jYWxGaWxlc01vZGFsKHRoaXMuYXBwLCB0aGlzKS5vcGVuKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdkb3dubG9hZF9iaWJsZScsXG5cdFx0XHRuYW1lOiAnRG93bmxvYWQgdHJhbnNsYXRpb24nLFxuXHRcdFx0Y2FsbGJhY2s6IGFzeW5jICgpID0+IHtcblx0XHRcdFx0bGV0IG1vZGFsID0gbmV3IFF1aWNrQ2hhbmdlVHJhbnNsYXRpb25lTW9kYWwodGhpcylcblx0XHRcdFx0bW9kYWwudHJhbnNsYXRpb25zID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpXG5cdFx0XHRcdG1vZGFsLm9uQ2hvc2UgPSBhc3luYyB0cmFuc2xhdGlvbiA9PiB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5iaWJsZV9hcGkudXNlcl9kb3dubG9hZF90cmFuc2xhdGlvbihcblx0XHRcdFx0XHRcdHRyYW5zbGF0aW9uLmFiYnJldmlhdGVkX25hbWVcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH1cblx0XHRcdFx0bW9kYWwub3BlbigpXG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dGhpcy5yZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yKFwidmVyc2VcIiwgYXN5bmMgKHNvdXJjZSwgZWxlbWVudCwgY29udGV4dCkgPT4ge1xuXHRcdFx0Y29uc3QgcmVmID0gc291cmNlLnRyaW0oKS5yZXBsYWNlKC9bOi1dL2csIFwiIFwiKS5zcGxpdChcIiBcIik7XG5cblx0XHRcdGxldCBib29rOnN0cmluZ3xudWxsID0gbnVsbDtcblx0XHRcdGxldCBib29rX2lkID0gLTE7XG5cdFx0XHRsZXQgY2hhcHRlciA9IC0xO1xuXHRcdFx0bGV0IHZlcnNlID0gLTE7XG5cdFx0XHRsZXQgdmVyc2VfZW5kID0gLTE7XG5cdFx0XHRsZXQgbWF5YmVfdHJhbnNsYXRpb246IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXHRcdFx0bGV0IGkgPSAwO1xuXG5cdFx0XHR3aGlsZSAoaSAhPSByZWYubGVuZ3RoKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgYm9vayBuYW1lXG5cdFx0XHRcdGlmIChpID09IDApIHtcblx0XHRcdFx0XHQvLyBBbHdheXMgYWRkIGZpcnN0IGl0ZW0sIG5vIG1hdHRlciB3aGF0IGl0IGlzXG5cdFx0XHRcdFx0Ym9vayA9IChib29rIHx8IFwiXCIpICsgcmVmW2ldO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIE9ubHkgYWRkIGl0ZW1zIHRoYXQgYXJlIHdvcmRzLCBhbmQgbm90IG51bWJlcnNcblx0XHRcdFx0XHRpZiAoIWlzX2FscGhhKHJlZltpXSkpIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRib29rICs9IFwiIFwiICsgcmVmW2ldXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpICs9IDE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoaXNfbnVtZXJpYyhib29rIHx8IFwiXCIpKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgYm9va19pZFxuXHRcdFx0XHRib29rX2lkID0gTnVtYmVyKGJvb2spO1xuXHRcdFx0XHRib29rID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19udW1lcmljKHJlZltpXSkpIHtcblx0XHRcdFx0Ly8gQ29tcG9zZSBjaGFwdGVyXG5cdFx0XHRcdGNoYXB0ZXIgPSBOdW1iZXIocmVmW2ldKTtcblx0XHRcdFx0aSArPSAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaSAhPSByZWYubGVuZ3RoICYmIGlzX251bWVyaWMocmVmW2ldKSkge1xuXHRcdFx0XHQvLyBDb21wb3NlIHZlcnNlXG5cdFx0XHRcdHZlcnNlID0gTnVtYmVyKHJlZltpXSk7XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0aWYgKGkgIT0gcmVmLmxlbmd0aCAmJiBpc19udW1lcmljKHJlZltpXSkpIHtcblx0XHRcdFx0Ly8gQ29tcG9zZSByYW5nZVxuXHRcdFx0XHR2ZXJzZV9lbmQgPSBOdW1iZXIocmVmW2ldKTtcblx0XHRcdFx0aSArPSAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaSAhPSByZWYubGVuZ3RoICYmIGlzX2FscGhhbnVtZXJpYyhyZWZbaV0pKSB7XG5cdFx0XHRcdC8vIENvbXBvc2UgdHJhbnNsYXRpb25cblx0XHRcdFx0bWF5YmVfdHJhbnNsYXRpb24gPSByZWZbaV07XG5cdFx0XHRcdGkgKz0gMTtcblx0XHRcdH1cblxuXHRcdFx0bGV0IHRyYW5zbGF0aW9uID0gbWF5YmVfdHJhbnNsYXRpb24gfHwgdGhpcy5zZXR0aW5ncy5yZWFkaW5nX3RyYW5zbGF0aW9uO1xuXHRcdFx0aWYgKGJvb2sgIT09IG51bGwpIHtcblx0XHRcdFx0Ym9va19pZCA9IGF3YWl0IHRoaXMuYmlibGVfYXBpXG5cdFx0XHRcdFx0LmJvb2tfaWQodGhpcy5zZXR0aW5ncy5fYnVpbHRfdHJhbnNsYXRpb258fHRyYW5zbGF0aW9uLCBib29rKTtcblx0XHRcdH1cblx0XHRcdGJvb2sgPSAoYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X2Jvb2tfZGF0YSh0cmFuc2xhdGlvbiwgYm9va19pZCkpLm5hbWU7XG5cdFx0XHRcblx0XHRcdGxldCB0ZXh0ID0gXCJcIjtcblx0XHRcdGlmIChib29rLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQm9vayBhbmQgY2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmIChjaGFwdGVyID09PSAtMSkge1xuXHRcdFx0XHR0ZXh0ID0gXCJbQ2hhcHRlciBtdXN0IGJlIHByb3ZpZGVkXVwiO1xuXHRcdFx0fSBlbHNlIGlmICh2ZXJzZSA9PT0gLTEpIHtcblx0XHRcdFx0Ly8gV2hvbGUgY2hhcHRlclxuXHRcdFx0XHRsZXQgdmVyc2VzID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X2NoYXB0ZXIoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHQpO1xuXHRcdFx0XHRmb3IgKGNvbnN0IHZlcnNlX2lfIG9mIE9iamVjdC5rZXlzKHZlcnNlcykpIHtcblx0XHRcdFx0XHRjb25zdCB2ZXJzZV9pID0gTnVtYmVyKHZlcnNlX2lfKVxuXHRcdFx0XHRcdGxldCB2ZXJzZSA9IHZlcnNlc1t2ZXJzZV9pXTtcblx0XHRcdFx0XHR0ZXh0ICs9IFwiPHN1cD5cIiArICh2ZXJzZV9pKSArIFwiPC9zdXA+IFwiICsgdmVyc2U7XG5cdFx0XHRcdFx0aWYgKHZlcnNlX2kgIT0gT2JqZWN0LmtleXModmVyc2VzKS5sZW5ndGgrMSkge1xuXHRcdFx0XHRcdFx0dGV4dCArPSBcIiBcIjtcblx0XHRcdFx0XHRcdC8vIHRleHQgKz0gXCI8YnI+XCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICh0ZXh0Lmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0XHRcdHRleHQgPSBcIjxObyB0ZXh0IGZvdW5kIGZvciB7MX0gezB9IGluIHRyYW5zbGF0aW9uIHsyfT5cIlxuXHRcdFx0XHRcdFx0LmZvcm1hdChTdHJpbmcoY2hhcHRlciksIGJvb2ssIHRyYW5zbGF0aW9uKVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKHZlcnNlX2VuZCA8IHZlcnNlKSB7XG5cdFx0XHRcdC8vIFNpbmdsZSB2ZXJzZVxuXHRcdFx0XHR0ZXh0ID0gYXdhaXQgdGhpcy5iaWJsZV9hcGkuZ2V0X3ZlcnNlKFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0XHR2ZXJzZSxcblx0XHRcdFx0KVxuXHRcdFx0XHRpZiAodGV4dC5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHR0ZXh0ID0gXCI8Tm8gdGV4dCBmb3VuZCBmb3IgezF9IHswfTp7Mn0gaW4gdHJhbnNsYXRpb24gezN9PlwiXG5cdFx0XHRcdFx0XHQuZm9ybWF0KFN0cmluZyhjaGFwdGVyKSwgYm9vaywgU3RyaW5nKHZlcnNlKSwgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdC8vIFZlcnNlIHJhbmdlXG5cdFx0XHRcdGxldCB2ZXJzZXMgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfY2hhcHRlcihcblx0XHRcdFx0XHR0cmFuc2xhdGlvbixcblx0XHRcdFx0XHRib29rX2lkLFxuXHRcdFx0XHRcdGNoYXB0ZXIsXG5cdFx0XHRcdCk7XG5cdFx0XHRcdGxldCBqID0gdmVyc2U7XG5cdFx0XHRcdHdoaWxlIChqIDwgdmVyc2VfZW5kICsgMSAmJiBqIDwgT2JqZWN0LmtleXModmVyc2VzKS5sZW5ndGgpIHtcblx0XHRcdFx0XHR0ZXh0ICs9IFwiPHN1cD5cIiArIGogKyBcIjwvc3VwPiBcIiArIHZlcnNlc1tqIC0gMV07XG5cdFx0XHRcdFx0aWYgKGogIT0gdmVyc2VfZW5kKSB7XG5cdFx0XHRcdFx0XHR0ZXh0ICs9IFwiPGJyPlwiO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRqICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHRleHQubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRcdFx0dGV4dCA9IFwiPE5vIHRleHQgZm91bmQgZm9yIHsxfSB7MH06ezJ9LXszfSBpbiB0cmFuc2xhdGlvbiB7NH0+XCJcblx0XHRcdFx0XHRcdC5mb3JtYXQoU3RyaW5nKGNoYXB0ZXIpLCBib29rLCBTdHJpbmcodmVyc2UpLCBTdHJpbmcodmVyc2VfZW5kKSwgdHJhbnNsYXRpb24pXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0bGV0IHNwYW4gPSBlbGVtZW50LmNyZWF0ZVNwYW4oe1xuXHRcdFx0XHR0ZXh0OiBcIlwiLFxuXHRcdFx0fSk7XG5cblx0XHRcdGxldCB0YWdzID0gdGV4dC5tYXRjaEFsbChcblx0XHRcdFx0Lyg/OjxcXHMqKFtcXHddKilcXHMqPiguKj8pPFxccypcXC9cXDFcXHMqPil8PFxccyooYnJ8XFwvYnJ8YnJcXC8pXFxzKj58KC4rPyg/Oig/PTxcXHMqWy9cXFxcXFx3XSpcXHMqPil8JCkpL2dzXG5cdFx0XHQpO1xuXHRcdFx0Zm9yIChsZXQgbWF0Y2ggb2YgdGFncykge1xuXHRcdFx0XHRsZXQgdGFnX3R5cGUgPSBtYXRjaFsxXTtcblx0XHRcdFx0bGV0IHRhZ190ZXh0ID0gbWF0Y2hbMl07XG5cdFx0XHRcdGxldCBsb25lX3RhZ190eXBlID0gbWF0Y2hbM107XG5cdFx0XHRcdGxldCBub3JtYWxfdGV4dCA9IG1hdGNoWzRdO1xuXG5cdFx0XHRcdGlmIChub3JtYWxfdGV4dCAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVTcGFuKHtcblx0XHRcdFx0XHRcdHRleHQ6IG5vcm1hbF90ZXh0LFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGxvbmVfdGFnX3R5cGUgPT09IFwiYnJcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwobG9uZV90YWdfdHlwZSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAobG9uZV90YWdfdHlwZSA9PT0gXCJici9cIiB8fCBsb25lX3RhZ190eXBlID09PSBcIi9iclwiKSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbChcImJyXCIpO1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlU3Bhbih7XG5cdFx0XHRcdFx0XHR0ZXh0OiBcIlxcblwiLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKGxvbmVfdGFnX3R5cGUgPT09IFwiL0pcIikge1xuXHRcdFx0XHRcdC8qIERvIG5vdGhpbmcgKi9cblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJzdXBcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwodGFnX3R5cGUsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwic3ViXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcIlNcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwoXG5cdFx0XHRcdFx0XHRcInN1YlwiLFxuXHRcdFx0XHRcdFx0eyB0ZXh0OiB0YWdfdGV4dCwgYXR0cjogeyBzdHlsZTogXCJvcGFjaXR5OiAwLjVcIiB9IH0sXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fSBlbHNlIGlmICh0YWdfdHlwZSA9PT0gXCJpXCIpIHtcblx0XHRcdFx0XHRzcGFuLmNyZWF0ZUVsKHRhZ190eXBlLCB7IHRleHQ6IHRhZ190ZXh0IH0pO1xuXHRcdFx0XHR9IGVsc2UgaWYgKHRhZ190eXBlID09PSBcImJcIikge1xuXHRcdFx0XHRcdHNwYW4uY3JlYXRlRWwodGFnX3R5cGUsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSBpZiAodGFnX3R5cGUgPT09IFwiZVwiKSB7XG5cdFx0XHRcdFx0Ly8vIEEgcXVvdGUgZnJvbSBmcm9tIGVsc2V3aGVyZSBpbiB0aGUgYmlibGUuXG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVFbChcImlcIikuY3JlYXRlRWwoXCJxXCIsIHsgdGV4dDogdGFnX3RleHQgfSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3Bhbi5jcmVhdGVTcGFuKFxuXHRcdFx0XHRcdFx0eyB0ZXh0OiBcIjx7MH0+ezF9PC97MH0+XCIuZm9ybWF0KHRhZ190eXBlLCB0YWdfdGV4dCkgfSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9KTtcblxuXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBTZXR0aW5nc1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cdH1cblxuXHRhc3luYyBidWlsZF9iaWJsZSgpIHtcblx0XHRsZXQgYmlibGVfcGF0aCA9IG5vcm1hbGl6ZVBhdGgodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpO1xuXG5cdFx0bGV0IGJpYmxlX2ZvbGRlciA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChiaWJsZV9wYXRoKTtcblx0XHRpZiAoYmlibGVfZm9sZGVyIGluc3RhbmNlb2YgVEZpbGUpIHtcblx0XHRcdC8vIENhbid0IGhhbmRsZSBpZiBiaWJsZSBwYXRoIGlzIGEgZmlsZS4gQWJvcnRcblx0XHRcdG5ldyBFcnJvck1vZGFsKFxuXHRcdFx0XHR0aGlzLmFwcCxcblx0XHRcdFx0dGhpcyxcblx0XHRcdFx0XCJGYWlsZWQgdG8gYnVpbGQgYmlibGVcIixcblx0XHRcdFx0XCJUaGUgYmlibGUgZm9sZGVyIGRlZmluZWQgaW4gc2V0dGluZ3MsIFxcXCJ7MH1cXFwiLCB3YXMgZXhwZWN0ZWQgdG8gcG9pbnQgdG8gYSBmb2xkZXIsIGJ1dCBpdCBwb2ludHMgdG8gYSBmaWxlLiBUcnkgY2hhbmdpbmcgdGhlIHBhdGggdG8gcG9pbnQgdG8gYSBmb2xkZXIsIG9yIGNoYW5nZSB0aGUgZmlsZSB0byBhIGZvbGRlci5cIlxuXHRcdFx0XHRcdC5mb3JtYXQodGhpcy5zZXR0aW5ncy5iaWJsZV9mb2xkZXIpLFxuXHRcdFx0KS5vcGVuKCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fSBlbHNlIGlmIChiaWJsZV9mb2xkZXIgPT09IG51bGwpIHtcblx0XHRcdC8vIEJpYmxlIHBhdGggZG9lc24ndCBleGlzdC4gQ3JlYXRlIGl0XG5cdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKGJpYmxlX3BhdGgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBCaWJsZSBwYXRoIGlzIGFscmVhZHkgYSB2YWxpZCBmb2xkZXIuIE5vIGFjdGlvbiBuZWVkZWRcblx0XHR9XG5cblx0XHRsZXQgZm9sZGVyc19hbmRfZmlsZXMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5hZGFwdGVyLmxpc3QoYmlibGVfcGF0aCk7XG5cdFx0aWYgKGZvbGRlcnNfYW5kX2ZpbGVzLmZpbGVzLmxlbmd0aCArIGZvbGRlcnNfYW5kX2ZpbGVzLmZvbGRlcnMubGVuZ3RoICE9IDApIHtcblx0XHRcdG5ldyBDbGVhck9sZEJpYmxlRmlsZXNNb2RhbCh0aGlzLmFwcCwgdGhpcykub3BlbigpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGF3YWl0IHRoaXMuX2J1aWxkX2JpYmxlKGJpYmxlX3BhdGgpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIF9idWlsZF9iaWJsZShiaWJsZV9wYXRoOiBzdHJpbmcpIHtcblx0XHR0aGlzLnNob3dfdG9hc3RfcHJvZ3Jlc3MoMCwgbnVsbClcblx0XHR0cnkge1xuXHRcdFx0bGV0IHRyYW5zbGF0aW9uID0gXCJcIlxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MudHJhbnNsYXRpb24gPT0gU0VMRUNURURfVFJBTlNMQVRJT05fT1BUSU9OX0tFWSkge1xuXHRcdFx0XHR0cmFuc2xhdGlvbiA9IHRoaXMuc2V0dGluZ3MucmVhZGluZ190cmFuc2xhdGlvblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJhbnNsYXRpb24gPSB0aGlzLnNldHRpbmdzLnRyYW5zbGF0aW9uXG5cdFx0XHR9XG5cdFxuXHRcdFx0Ly8gVE9ETzogQnVpbGQgYmlibGVzIGFjY29yZGluZyB0byB0cmFuc2xhdGlvbiBpbiBzZXR0aW5nc1xuXHRcdFx0dGhpcy5zZXR0aW5ncy5fYnVpbHRfdHJhbnNsYXRpb24gPSB0cmFuc2xhdGlvbjtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFxuXHRcdFx0bGV0IGN0eCA9IG5ldyBCdWlsZENvbnRleHQ7XG5cdFx0XHRjdHgucGx1Z2luID0gdGhpc1xuXHRcdFx0Y3R4LnRyYW5zbGF0aW9uID0gdHJhbnNsYXRpb247XG5cdFx0XHRjdHguYm9va3MgPSBhd2FpdCB0aGlzLmJpYmxlX2FwaS5nZXRfYm9va3NfZGF0YShjdHgudHJhbnNsYXRpb24pO1xuXHRcdFx0Y3R4LnZlcnNlX2NvdW50cyA9IGF3YWl0IHRoaXMuYmlibGVfYXBpLmdldF92ZXJzZV9jb3VudChjdHgudHJhbnNsYXRpb24pO1xuXHRcblx0XHRcdC8vIEdldCB0cmFuc2xhdGlvbiB0ZXh0c1xuXHRcdFx0Y3R4LnRyYW5zbGF0aW9uX3RleHRzID0gYXdhaXQgdGhpcy5iaWJsZV9hcGlcblx0XHRcdFx0XHQuZ2V0X3RyYW5zbGF0aW9uKGN0eC50cmFuc2xhdGlvbik7XG5cblx0XHRcdC8vIFJlbW92ZSBlbXB0eSBjaGFwdGVycyBmcm9tIGJvb2tzIChIQUNLOiBUaGlzIHNob3VsZCBiZSBkb25lIGluIGEgYmV0dGVyIHBsYWNlLCBidXQgdGhpcyBpcyB3aGVyZSBhbGwgdGhlIG5lZWRlZCBpbmZvcm1hdGlvbiBpcylcblx0XHRcdGlmIChjdHgudHJhbnNsYXRpb25fdGV4dHMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRmb3IgKGxldCBib29rIG9mIGN0eC5ib29rcykge1xuXHRcdFx0XHRcdGxldCB0b19yZW1vdmUgPSBbXVxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAxOyBpICE9IGJvb2suY2hhcHRlcnMubGVuZ3RoKzE7IGkrKykge1xuXHRcdFx0XHRcdFx0bGV0IGNoYXB0ZXJfdGV4dHMgPSBjdHgudHJhbnNsYXRpb25fdGV4dHMuYm9va3NbYm9vay5pZF1cblx0XHRcdFx0XHRcdGxldCB2ZXJzZXMgPSBjaGFwdGVyX3RleHRzW2ldIHx8IHt9XG5cdFx0XHRcdFx0XHRpZiAoT2JqZWN0LmtleXModmVyc2VzKS5sZW5ndGggPT09IDApIHtcblx0XHRcdFx0XHRcdFx0dG9fcmVtb3ZlLnB1c2goaSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBpIG9mIHRvX3JlbW92ZS5yZXZlcnNlKCkpIHtcblx0XHRcdFx0XHRcdGJvb2suY2hhcHRlcnMucmVtb3ZlKGkpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5vdGlmeSBwcm9ncmVzc1xuXHRcdFx0bGV0IGJ1aWx0X2NoYXB0ZXJfY291bnQgPSAwXG5cdFx0XHRsZXQgdG90YWxfY2hhcHRlcl9jb3VudCA9IDBcblx0XHRcdGZvciAoY29uc3QgaSBpbiBjdHguYm9va3MpIHtcblx0XHRcdFx0dG90YWxfY2hhcHRlcl9jb3VudCArPSBjdHguYm9va3NbaV0uY2hhcHRlcnMubGVuZ3RoXG5cdFx0XHR9XG5cdFx0XHR0aGlzLnNob3dfdG9hc3RfcHJvZ3Jlc3MoMCwgdG90YWxfY2hhcHRlcl9jb3VudClcblx0XG5cdFx0XHQvLyBJbmRleFxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuaW5kZXhfZW5hYmxlZCkge1xuXHRcdFx0XHRhd2FpdCBzYXZlX2ZpbGUoXG5cdFx0XHRcdFx0XCJ7MH0vezF9Lm1kXCIuZm9ybWF0KGJpYmxlX3BhdGgsIGN0eC5mb3JtYXRfaW5kZXhfbmFtZSgpKSxcblx0XHRcdFx0XHRjdHguZm9ybWF0X2luZGV4KCksXG5cdFx0XHRcdClcblx0XHRcdH1cblx0XG5cdFx0XHRsZXQgZmlsZV9wcm9taXNlczogQXJyYXk8UHJvbWlzZTxhbnk+PiA9IFtdO1xuXHRcblx0XHRcdGZvciAobGV0IGJvb2sgb2YgY3R4LmJvb2tzKSB7XG5cdFx0XHRcdGN0eC5zZXRfYm9vayhib29rKTtcblx0XHRcdFx0bGV0IHRleHRzX29mX2Jvb2sgPSBjdHgudHJhbnNsYXRpb25fdGV4dHMuYm9va3NbYm9vay5pZF1cblx0XG5cdFx0XHRcdC8vIEJvb2sgcGF0aFxuXHRcdFx0XHRsZXQgYm9va19wYXRoID0gYmlibGVfcGF0aDtcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MuYm9va19mb2xkZXJzX2VuYWJsZWQpIHtcblx0XHRcdFx0XHRib29rX3BhdGggKz0gXCIvXCIgKyBjdHguZm9ybWF0X2Jvb2tfbmFtZSh0aGlzLCBjdHguYm9vaywgdGhpcy5zZXR0aW5ncy5ib29rX25hbWVfY2FwaXRhbGl6YXRpb24pO1xuXHRcdFx0XHRcdHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIobm9ybWFsaXplUGF0aChib29rX3BhdGgpKTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gQ2hhcHRlciBpbmRleFxuXHRcdFx0XHRpZiAodGhpcy5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X2VuYWJsZWQpIHtcblx0XHRcdFx0XHRmaWxlX3Byb21pc2VzLnB1c2goc2F2ZV9maWxlKFxuXHRcdFx0XHRcdFx0XCJ7MH0vezF9Lm1kXCIuZm9ybWF0KGJvb2tfcGF0aCwgY3R4LmZvcm1hdF9jaGFwdGVyX2luZGV4X25hbWUoY3R4LmJvb2spKSxcblx0XHRcdFx0XHRcdGN0eC5mb3JtYXRfY2hhcHRlcl9pbmRleChjdHguYm9vayksXG5cdFx0XHRcdFx0KSlcblx0XHRcdFx0fVxuXHRcdFx0XHRcblx0XHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyIG9mIGN0eC5ib29rLmNoYXB0ZXJzKSB7XG5cdFx0XHRcdFx0ZmlsZV9wcm9taXNlcy5wdXNoKG5ldyBQcm9taXNlKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdGN0eC5zZXRfY2hhcHRlcihjaGFwdGVyKTtcblx0XHRcdFx0XHRcdGxldCB0ZXh0c19vZl9jaGFwdGVyID0gdGV4dHNfb2ZfYm9va1tjaGFwdGVyXVxuXG5cdFx0XHRcdFx0XHQvLyBBc3NlbWJsZSB2ZXJzZXNcblx0XHRcdFx0XHRcdGN0eC52ZXJzZXNfdGV4dCA9IFwiXCJcblx0XHRcdFx0XHRcdGxldCBhZGRlZF92ZXJzZV9jb3VudCA9IDBcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgdmVyc2Vfa2V5IG9mIE9iamVjdC5rZXlzKHRleHRzX29mX2NoYXB0ZXIpKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHZlcnNlID0gTnVtYmVyKHZlcnNlX2tleSlcblx0XHRcdFx0XHRcdFx0d2hpbGUgKGFkZGVkX3ZlcnNlX2NvdW50IDwgdmVyc2UpIHtcblx0XHRcdFx0XHRcdFx0XHRjdHgudmVyc2UgPSBhZGRlZF92ZXJzZV9jb3VudCArIDFcblx0XHRcdFx0XHRcdFx0XHRsZXQgdGV4dCA9IGN0eC5mb3JtYXRfdmVyc2VfYm9keShcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnNldHRpbmdzLmJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMsXG5cdFx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0XHRcdGN0eC52ZXJzZXNfdGV4dCArPSB0ZXh0XG5cdFx0XHRcdFx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdFx0XHRcdFx0ISh0ZXh0Lmxlbmd0aCA9PT0gMCAmJiAhdGhpcy5zZXR0aW5ncy5idWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzKVxuXHRcdFx0XHRcdFx0XHRcdFx0JiYgdmVyc2Vfa2V5ICE9PSBPYmplY3Qua2V5cyh0ZXh0c19vZl9jaGFwdGVyKS5sYXN0KCkpXG5cdFx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3R4LnZlcnNlc190ZXh0ICs9IFwiXFxuXCI7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGFkZGVkX3ZlcnNlX2NvdW50ICs9IDFcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFxuXHRcdFx0XHRcdFx0Ly8gQ2hhcHRlciBuYW1lXG5cdFx0XHRcdFx0XHRsZXQgY2hhcHRlcl9ub3RlX25hbWUgPSBjdHguZm9ybWF0X2NoYXB0ZXJfbmFtZSgpO1xuXHRcdFxuXHRcdFx0XHRcdFx0Ly8gQ2hhcHRlciBib2R5XG5cdFx0XHRcdFx0XHRsZXQgbm90ZV9ib2R5ID0gY3R4LmZvcm1hdF9jaGFwdGVyX2JvZHkodGhpcyk7XG5cdFx0XG5cdFx0XHRcdFx0XHQvLyBTYXZlIGZpbGVcblx0XHRcdFx0XHRcdGxldCBmaWxlX3BhdGggPSBib29rX3BhdGggKyBcIi9cIiArIGNoYXB0ZXJfbm90ZV9uYW1lICsgXCIubWRcIlxuXHRcdFxuXHRcdFx0XHRcdFx0YXdhaXQgc2F2ZV9maWxlKGZpbGVfcGF0aCwgbm90ZV9ib2R5KVxuXHRcdFx0XHRcdFx0YnVpbHRfY2hhcHRlcl9jb3VudCArPSAxXG5cdFx0XHRcdFx0XHR0aGlzLnNob3dfdG9hc3RfcHJvZ3Jlc3MoXG5cdFx0XHRcdFx0XHRcdGJ1aWx0X2NoYXB0ZXJfY291bnQsXG5cdFx0XHRcdFx0XHRcdHRvdGFsX2NoYXB0ZXJfY291bnQsXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0fSkpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRhd2FpdCBQcm9taXNlLmFsbChmaWxlX3Byb21pc2VzKTtcblx0XHR9IGNhdGNoIChlKSAge1xuXHRcdFx0dGhpcy5zaG93X3RvYXN0X2Vycm9yKFN0cmluZyhlKSlcblx0XHRcdHRocm93IGVcblx0XHR9XG5cdH1cblxuXHRzaG93X3RvYXN0X2Vycm9yKGVycm9yOnN0cmluZykge1xuXHRcdGlmICh0aGlzLnByb2dyZXNzX25vdGljZSAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5wcm9ncmVzc19ub3RpY2U/LmhpZGUoKVxuXHRcdFx0dGhpcy5wcm9ncmVzc19ub3RpY2UgPSBudWxsXG5cdFx0fVxuXHRcdG5ldyBOb3RpY2UoXCJFcnJvciBidWlsZGluZyBiaWJsZTogXCIgKyBlcnJvciwgMClcblx0fVxuXG5cdHNob3dfdG9hc3RfcHJvZ3Jlc3MocHJvZ3Jlc3M6IG51bWJlciwgZmluaXNoOiBudW1iZXJ8bnVsbCkge1xuXHRcdGlmIChwcm9ncmVzcyA9PT0gZmluaXNoICYmIGZpbmlzaCAhPSBudWxsKSB7XG5cdFx0XHR0aGlzLnByb2dyZXNzX25vdGljZT8uaGlkZSgpXG5cdFx0XHR0aGlzLnByb2dyZXNzX25vdGljZSA9IG51bGxcblx0XHRcdG5ldyBOb3RpY2UoQlVJTERfRU5EX1RPQVNUKVxuXHRcdFx0cmV0dXJuXG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMucHJvZ3Jlc3Nfbm90aWNlID09IG51bGwpIHtcblx0XHRcdHRoaXMucHJvZ3Jlc3Nfbm90aWNlID0gbmV3IE5vdGljZShcIlwiLCAwKVxuXHRcdH1cblxuXHRcdGxldCBtc2cgPSBcIlwiXG5cdFx0aWYgKGZpbmlzaCA9PSBudWxsKSB7XG5cdFx0XHRtc2cgPSBcIkJ1aWxkaW5nIGJpYmxlLi4uXCJcblx0XHR9IGVsc2Uge1xuXHRcdFx0bXNnID0gXCJCdWlsZGluZyBiaWJsZS4uLiAoezB9L3sxfSlcIlxuXHRcdFx0XHQuZm9ybWF0KFN0cmluZyhwcm9ncmVzcyksIFN0cmluZyhmaW5pc2gpKVxuXHRcdH1cblx0XHR0aGlzLnByb2dyZXNzX25vdGljZS5zZXRNZXNzYWdlKG1zZylcblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRsZXQgc2F2aW5nOlJlY29yZDxzdHJpbmcsIGFueT4gPSB7fVxuXHRcdE9iamVjdC5hc3NpZ24oc2F2aW5nLCB0aGlzLnNldHRpbmdzKVxuXHRcdGZvciAoY29uc3Qga2V5IGluIHNhdmluZykge1xuXHRcdFx0bGV0IHZhbHVlOmFueSA9IChERUZBVUxUX1NFVFRJTkdTIGFzIFJlY29yZDxzdHJpbmcsIGFueT4pW2tleV1cblx0XHRcdGlmIChzYXZpbmdba2V5XSA9PT0gdmFsdWUpIHtcblx0XHRcdFx0ZGVsZXRlIHNhdmluZ1trZXldXG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YShzYXZpbmcpXG5cdH1cbn1cblxuY2xhc3MgQnVpbGRDb250ZXh0IHtcblx0dHJhbnNsYXRpb246IHN0cmluZyA9IFwiXCJcblx0dHJhbnNsYXRpb25fdGV4dHM6IFRyYW5zbGF0aW9uRGF0YVxuXHRib29rczogQXJyYXk8Qm9va0RhdGE+ID0gW11cblx0Ym9vazogQm9va0RhdGFcblx0cHJldl9ib29rOiBCb29rRGF0YVxuXHRuZXh0X2Jvb2s6IEJvb2tEYXRhXG5cdGNoYXB0ZXI6IG51bWJlciA9IDBcblx0cHJldl9jaGFwdGVyOiBudW1iZXIgPSAwXG5cdG5leHRfY2hhcHRlcjogbnVtYmVyID0gMFxuXHRjaGFwdGVyczogQ2hhcHRlckRhdGFcblx0bGFzdF9jaGFwdGVyczogQ2hhcHRlckRhdGFcblx0bmV4dF9jaGFwdGVyczogQ2hhcHRlckRhdGFcblx0Y2hhcHRlcl92ZXJzZV9jb3VudDogbnVtYmVyID0gMFxuXHR2ZXJzZXNfdGV4dDogc3RyaW5nID0gXCJcIlxuXHR2ZXJzZTogbnVtYmVyID0gMFxuXHR2ZXJzZV9jb3VudHM6IFZlcnNlQ291bnRzXG5cdHBsdWdpbjogTXlCaWJsZVxuXG5cdC8vLyBGaW5kIGluZGV4IG9mIGJvb2sgYnkgSURcblx0ZmluZF9ib29rKGJvb2tfaWQ6Qm9va0lkKTpudW1iZXIge1xuXHRcdGZvciAobGV0IGkgb2YgdGhpcy5ib29rcy5rZXlzKCkpIHtcblx0XHRcdGlmICh0aGlzLmJvb2tzW2ldLmlkID09PSBib29rX2lkKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJObyBib29rIGJ5IGlkICR7Ym9va19pZH1cIik7XG5cdH1cblxuXHRhYmJyZXZpYXRlX2Jvb2tfbmFtZShuYW1lOnN0cmluZywgZGVsaW1ldGVyOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5hbWUucmVwbGFjZShkZWxpbWV0ZXIsIFwiXCIpLnNsaWNlKDAsMyk7XG5cdH1cblxuXHRmb3JtYXRfYm9va19uYW1lKHBsdWdpbjpNeUJpYmxlLCBib29rOkJvb2tEYXRhLCBjYXNpbmc6c3RyaW5nKTogc3RyaW5nIHtcblx0XHRsZXQgZGVsaW0gPSBwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2RlbGltaXRlclxuXHRcdGxldCBib29rX25hbWUgPSB0aGlzLnRvX2Nhc2UoYm9vay5uYW1lLCBjYXNpbmcsIGRlbGltKVxuXG5cdFx0aWYgKHBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQpIHtcblx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuYWJicmV2aWF0ZV9ib29rX25hbWUoYm9va19uYW1lLCBkZWxpbSlcblx0XHR9XG5cblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcoYm9vay5pZClcblx0XHRcdFx0XHQucGFkU3RhcnQoMiAqIE51bWJlcihwbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIFN0cmluZyh0aGlzLnRyYW5zbGF0aW9uKSlcblx0fVxuXG5cdGZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW46TXlCaWJsZSwgYm9vazpCb29rRGF0YSwgY2FzaW5nOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0bGV0IGRlbGltID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9kZWxpbWl0ZXJcblx0XHRsZXQgYm9va19uYW1lID0gdGhpcy50b19jYXNlKGJvb2submFtZSwgY2FzaW5nLCBkZWxpbSlcblxuXHRcdGlmIChwbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2FiYnJldmlhdGVkKSB7XG5cdFx0XHRib29rX25hbWUgPSB0aGlzLmFiYnJldmlhdGVfYm9va19uYW1lKGJvb2tfbmFtZSwgZGVsaW0pXG5cdFx0fVxuXG5cdFx0cmV0dXJuIGJvb2tfbmFtZVxuXHR9XG5cdFxuXHRmb3JtYXRfY2hhcHRlcl9ib2R5KHBsdWdpbjpNeUJpYmxlKTogc3RyaW5nIHtcblx0XHRsZXQgY2FzaW5nID0gcGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbjtcblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfYm9keV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKC97dmVyc2VzfS9nLCB0aGlzLnZlcnNlc190ZXh0KVxuXHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihwbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKSlcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcodGhpcy5ib29rLmlkKVxuXHRcdFx0XHRcdC5wYWRTdGFydCgyICogTnVtYmVyKHBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfb3JkZXIpLCBcIjBcIilcblx0XHRcdClcblx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcn0vZywgU3RyaW5nKHRoaXMuY2hhcHRlcikpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKCkpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJfaW5kZXh9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfaW5kZXhfbmFtZSh0aGlzLmJvb2spKVxuXHRcdFx0LnJlcGxhY2UoL3tsYXN0X2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLnByZXZfY2hhcHRlcikpXG5cdFx0XHQucmVwbGFjZSgve2xhc3RfY2hhcHRlcl9uYW1lfS9nLCB0aGlzLmZvcm1hdF9jaGFwdGVyX25hbWUoXCJsYXN0XCIpKVxuXHRcdFx0LnJlcGxhY2UoL3tsYXN0X2NoYXB0ZXJfYm9va30vZywgdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIocGx1Z2luLCB0aGlzLnByZXZfYm9vaywgY2FzaW5nKSlcblx0XHRcdC5yZXBsYWNlKC97bmV4dF9jaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5uZXh0X2NoYXB0ZXIpKVxuXHRcdFx0LnJlcGxhY2UoL3tuZXh0X2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKFwibmV4dFwiKSlcblx0XHRcdC5yZXBsYWNlKC97bmV4dF9jaGFwdGVyX2Jvb2t9L2csIHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHBsdWdpbiwgdGhpcy5uZXh0X2Jvb2ssIGNhc2luZykpXG5cdFx0XHQucmVwbGFjZSgve2ZpcnN0X2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmJvb2suY2hhcHRlcnMuZmlyc3QoKSkpXG5cdFx0XHQucmVwbGFjZSgve2ZpcnN0X2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKFwiZmlyc3RcIikpXG5cdFx0XHQucmVwbGFjZSgve2ZpbmFsX2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmJvb2suY2hhcHRlcnMubGFzdCgpKSlcblx0XHRcdC5yZXBsYWNlKC97ZmluYWxfY2hhcHRlcl9uYW1lfS9nLCB0aGlzLmZvcm1hdF9jaGFwdGVyX25hbWUoXCJmaW5hbFwiKSlcblx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIFN0cmluZyh0aGlzLnRyYW5zbGF0aW9uKSlcblx0fVxuXG5cdGZvcm1hdF9jaGFwdGVyX25hbWUodGVuc2U6c3RyaW5nPVwiY3VycmVudFwiLCBjdXN0b21fY2hhcHRlcjpudW1iZXJ8bnVsbCA9IG51bGwpOiBzdHJpbmcge1xuXHRcdGxldCBmb3JtYXQgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX25hbWVfZm9ybWF0O1xuXHRcdGlmIChmb3JtYXQubGVuZ3RoID09IDApIHtcblx0XHRcdGZvcm1hdCA9IERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9uYW1lX2Zvcm1hdDtcblx0XHR9XG5cdFx0bGV0IGNoYXB0ZXJfcGFkX2J5ID0gMztcblx0XHRpZiAodGhpcy5ib29rLmNoYXB0ZXJzLmxlbmd0aCA8IDEwKSB7XG5cdFx0XHRjaGFwdGVyX3BhZF9ieSA9IDE7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmJvb2suY2hhcHRlcnMubGVuZ3RoIDwgMTAwKSB7XG5cdFx0XHRjaGFwdGVyX3BhZF9ieSA9IDI7XG5cdFx0fVxuXG5cdFx0bGV0IGNhc2luZyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbjtcblx0XHRsZXQgZGVsaW0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyO1xuXHRcdGxldCBib29rX25hbWUgPSBcIlwiO1xuXHRcdGxldCBvcmRlciA9IC0xO1xuXHRcdGxldCBjaGFwdGVyID0gY3VzdG9tX2NoYXB0ZXJcblx0XHRzd2l0Y2ggKHRlbnNlKSB7XG5cdFx0XHRjYXNlIFwiY3VycmVudFwiOiB7XG5cdFx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHRoaXMucGx1Z2luLCB0aGlzLmJvb2ssIGNhc2luZyk7XG5cdFx0XHRcdG9yZGVyID0gdGhpcy5ib29rLmlkXG5cdFx0XHRcdGNoYXB0ZXIgPSB0aGlzLmNoYXB0ZXJcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwibGFzdFwiOiB7XG5cdFx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHRoaXMucGx1Z2luLCB0aGlzLnByZXZfYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0b3JkZXIgPSB0aGlzLnByZXZfYm9vay5pZFxuXHRcdFx0XHRjaGFwdGVyID0gdGhpcy5wcmV2X2NoYXB0ZXJcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwibmV4dFwiOiB7XG5cdFx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHRoaXMucGx1Z2luLCB0aGlzLm5leHRfYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0b3JkZXIgPSB0aGlzLm5leHRfYm9vay5pZFxuXHRcdFx0XHRjaGFwdGVyID0gdGhpcy5uZXh0X2NoYXB0ZXJcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiZmlyc3RcIjoge1xuXHRcdFx0XHRib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcih0aGlzLnBsdWdpbiwgdGhpcy5ib29rLCBjYXNpbmcpO1xuXHRcdFx0XHRvcmRlciA9IHRoaXMuYm9vay5pZFxuXHRcdFx0XHRjaGFwdGVyID0gdGhpcy5ib29rLmNoYXB0ZXJzLmZpcnN0KCkgfHwgMVxuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGNhc2UgXCJmaW5hbFwiOiB7XG5cdFx0XHRcdGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKHRoaXMucGx1Z2luLCB0aGlzLmJvb2ssIGNhc2luZyk7XG5cdFx0XHRcdG9yZGVyID0gdGhpcy5ib29rLmlkXG5cdFx0XHRcdGNoYXB0ZXIgPSB0aGlzLmJvb2suY2hhcHRlcnMubGFzdCgpIHx8IDFcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRjYXNlIFwiY3VzdG9tXCI6IHtcblx0XHRcdFx0Ym9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIodGhpcy5wbHVnaW4sIHRoaXMuYm9vaywgY2FzaW5nKTtcblx0XHRcdFx0b3JkZXIgPSB0aGlzLmJvb2suaWRcblx0XHRcdFx0Y2hhcHRlciA9IGN1c3RvbV9jaGFwdGVyO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVubWF0Y2hlZCBzd2l0Y2ggY2FzZSBhdCB0ZW5zZSAnezB9J1wiLmZvcm1hdCh0ZW5zZSkpO1xuXHRcdH1cblxuXHRcdGlmIChjaGFwdGVyID09IG51bGwpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkNoYXB0ZXIgaXMgbnVsbFwiKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZm9ybWF0XG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdC5yZXBsYWNlKFxuXHRcdFx0XHQve29yZGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcob3JkZXIpXG5cdFx0XHRcdFx0LnBhZFN0YXJ0KDIgKiBOdW1iZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tjaGFwdGVyfS9nLFxuXHRcdFx0XHRTdHJpbmcoY2hhcHRlcilcblx0XHRcdFx0XHQucGFkU3RhcnQoY2hhcHRlcl9wYWRfYnkgKiBOdW1iZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX2NoYXB0ZXIpLCBcIjBcIiksXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZSgve3RyYW5zbGF0aW9ufS9nLCBTdHJpbmcodGhpcy50cmFuc2xhdGlvbikpXG5cdH1cblxuXHRmb3JtYXRfdmVyc2VfYm9keShwbHVnaW46TXlCaWJsZSwgYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlczpib29sZWFuKTogc3RyaW5nIHtcblx0XHRsZXQgYm9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIoXG5cdFx0XHRwbHVnaW4sXG5cdFx0XHR0aGlzLmJvb2ssXG5cdFx0XHRcImN1cnJlbnRcIixcblx0XHQpO1xuXG5cdFx0bGV0IHZlcnNlX3RleHQgPSBcIlwiXG5cdFx0aWYgKGJ1aWxkX3dpdGhfZHluYW1pY192ZXJzZXMpIHtcblx0XHRcdHZlcnNlX3RleHQgPSBcImBgYCB2ZXJzZVxcblwiXG5cdFx0XHRcdCsgXCJ7Ym9va19pZH0ge2NoYXB0ZXJ9IHt2ZXJzZX0gXFxuXCJcblx0XHRcdFx0KyBcImBgYFwiXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZlcnNlX3RleHQgPSB0aGlzLnRyYW5zbGF0aW9uX3RleHRzLmJvb2tzW3RoaXMuYm9vay5pZF1bdGhpcy5jaGFwdGVyXVt0aGlzLnZlcnNlXVxuXHRcdFx0aWYgKHZlcnNlX3RleHQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRyZXR1cm4gXCJcIlxuXHRcdFx0fVxuXHRcdFx0aWYgKHZlcnNlX3RleHQuY29udGFpbnMoXCI8XCIpKSB7XG5cdFx0XHRcdHZlcnNlX3RleHQgPSB2ZXJzZV90ZXh0XG5cdFx0XHRcdFx0LnJlcGxhY2UoLzxcXHMqYnJcXHMqXFwvPz4vZywgXCJcXG5cIikgLy8gQnJlYWtsaW5lIHRhZ1xuXHRcdFx0XHRcdC5yZXBsYWNlKC88XFxzKmkqXFxzKj5cXHMqL2csIFwiKlwiKSAvLyBJdGFsaWNzIG9wZW4gdGFnXG5cdFx0XHRcdFx0LnJlcGxhY2UoL1xccyo8XFwvXFxzKmkqXFxzKj4vZywgXCIqXCIpIC8vIEl0YWxpY3Mgb3BlbiB0YWdcblx0XHRcdFx0XHQucmVwbGFjZSgvPFxcLz9cXHMqaSpcXHMqXFwvPz4vZywgXCIqXCIpIC8vIEl0YWxpY3MgZ2VuZXJhbCB0YWdcblx0XHRcdFx0XHQucmVwbGFjZSgvPFxcLz9cXHMqYipcXHMqXFwvPz4vZywgXCIqKlwiKSAvLyBCb2xkIHRhZ1xuXHRcdFx0XHRcdC5yZXBsYWNlKC88XFxzKlMqXFxzKj4vZywgXCI8c3VwPipcIikgLy8gU3Ryb25nIG9wZW5cblx0XHRcdFx0XHQucmVwbGFjZSgvPFxcL1xccypTKlxccyo+L2csIFwiKjwvc3VwPlwiKSAvLyBTdHJvbmcgY2xvc2Vcblx0XHRcdFx0XHQucmVwbGFjZSgvPFxcLz9cXHMqXFx3KlxccypcXC8/Pi9nLCBcIlwiKSAvLyBBbnkgb3RoZXIgdGFnc1xuXHRcdFx0XHQ7XG5cdFx0XHR9XG5cblx0XHR9XG5cblx0XHRyZXR1cm4gcGx1Z2luLnNldHRpbmdzLnZlcnNlX2JvZHlfZm9ybWF0XG5cdFx0XHQucmVwbGFjZSgve3ZlcnNlX3RleHR9L2csIHZlcnNlX3RleHQpXG5cdFx0XHQucmVwbGFjZSgve3ZlcnNlfS9nLCBTdHJpbmcodGhpcy52ZXJzZSkpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdC5yZXBsYWNlKC97Ym9va19pZH0vZywgU3RyaW5nKHRoaXMuYm9vay5pZCkpXG5cdFx0XHQucmVwbGFjZShcblx0XHRcdFx0L3tvcmRlcn0vZyxcblx0XHRcdFx0U3RyaW5nKHRoaXMuYm9vay5pZClcblx0XHRcdFx0XHQucGFkU3RhcnQoMiAqIE51bWJlcihwbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpXG5cdFx0XHQpXG5cdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJ9L2csIFN0cmluZyh0aGlzLmNoYXB0ZXIpKVxuXHRcdFx0LnJlcGxhY2UoL3tjaGFwdGVyX25hbWV9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfbmFtZSgpKVxuXHRcdFx0LnJlcGxhY2UoL3tmaW5hbF9jaGFwdGVyfS9nLCBTdHJpbmcodGhpcy5ib29rLmNoYXB0ZXJzKSlcblx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIFN0cmluZyh0aGlzLnRyYW5zbGF0aW9uKSlcblx0fVxuXG5cdGZvcm1hdF9jaGFwdGVyX2luZGV4KGJvb2s6IEJvb2tEYXRhKTogc3RyaW5nIHtcblx0XHRsZXQgYm9va19uYW1lID0gdGhpcy5mb3JtYXRfYm9va19uYW1lX3dpdGhvdXRfb3JkZXIoXG5cdFx0XHR0aGlzLnBsdWdpbixcblx0XHRcdGJvb2ssXG5cdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfY2FwaXRhbGl6YXRpb24sXG5cdFx0KTtcblxuXHRcdGxldCBjaGFwdGVyX2xpbmtzID0gXCJcIlxuXG5cdFx0Ly8gRm9ybWF0IGNoYXB0ZXIgbGlua3Ncblx0XHRmb3IgKGxldCBpID0gMDsgaSAhPSBib29rLmNoYXB0ZXJzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRsZXQgY2hhcHRlciA9IGJvb2suZ2V0X2NoYXB0ZXJfbnVtYmVyKGkpO1xuXHRcdFx0bGV0IGxpbmsgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X2xpbmtfZm9ybWF0XG5cdFx0XHRcdC5yZXBsYWNlKC97b3JkZXJ9L2csIFN0cmluZyhib29rLmlkKS5wYWRTdGFydCgyICogTnVtYmVyKHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlciksIFwiMFwiKSlcblx0XHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCBib29rX25hbWUpXG5cdFx0XHRcdC5yZXBsYWNlKC97Ym9va19pbmRleH0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9pbmRleF9uYW1lKGJvb2spKVxuXHRcdFx0XHQucmVwbGFjZSgve3RyYW5zbGF0aW9ufS9nLCBTdHJpbmcodGhpcy50cmFuc2xhdGlvbikpXG5cdFx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcn0vZywgU3RyaW5nKGNoYXB0ZXIpKVxuXHRcdFx0XHQucmVwbGFjZSgve2NoYXB0ZXJfbmFtZX0vZywgdGhpcy5mb3JtYXRfY2hhcHRlcl9uYW1lKFwiY3VzdG9tXCIsIGNoYXB0ZXIpKVxuXHRcdFx0O1xuXHRcdFx0aWYgKGkgIT0gYm9vay5jaGFwdGVycy5sZW5ndGgtMSkge1xuXHRcdFx0XHRsaW5rICs9IFwiXFxuXCJcblx0XHRcdH1cblx0XHRcdGNoYXB0ZXJfbGlua3MgKz0gbGlua1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X2Zvcm1hdFxuXHRcdFx0LnJlcGxhY2UoL3tvcmRlcn0vZywgU3RyaW5nKGJvb2suaWQpLnBhZFN0YXJ0KDIgKiBOdW1iZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpKVxuXHRcdFx0LnJlcGxhY2UoL3tib29rfS9nLCBib29rX25hbWUpXG5cdFx0XHQucmVwbGFjZSgve2Jvb2tfaW5kZXh9L2csIHRoaXMuZm9ybWF0X2NoYXB0ZXJfaW5kZXhfbmFtZShib29rKSlcblx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIFN0cmluZyh0aGlzLnRyYW5zbGF0aW9uKSlcblx0XHRcdC5yZXBsYWNlKC97aW5kZXh9L2csIHRoaXMuZm9ybWF0X2luZGV4X25hbWUoKSlcblx0XHRcdC5yZXBsYWNlKC97Y2hhcHRlcnN9L2csIGNoYXB0ZXJfbGlua3MpXG5cdFx0O1xuXHR9XG5cblx0Zm9ybWF0X2NoYXB0ZXJfaW5kZXhfbmFtZShib29rOiBCb29rRGF0YSk6IHN0cmluZyB7XG5cdFx0bGV0IGJvb2tfbmFtZSA9IHRoaXMuZm9ybWF0X2Jvb2tfbmFtZV93aXRob3V0X29yZGVyKFxuXHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHRib29rLFxuXHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2NhcGl0YWxpemF0aW9uLFxuXHRcdCk7XG5cdFx0cmV0dXJuIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfaW5kZXhfbmFtZV9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKC97b3JkZXJ9L2csIFN0cmluZyhib29rLmlkKS5wYWRTdGFydCgyICogTnVtYmVyKHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlciksIFwiMFwiKSlcblx0XHRcdC5yZXBsYWNlKC97Ym9va30vZywgYm9va19uYW1lKVxuXHRcdFx0LnJlcGxhY2UoL3t0cmFuc2xhdGlvbn0vZywgU3RyaW5nKHRoaXMudHJhbnNsYXRpb24pKVxuXHR9XG5cdFxuXHRmb3JtYXRfaW5kZXhfbmFtZSgpOiBzdHJpbmcge1xuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9uYW1lX2Zvcm1hdFxuXHRcdFx0LnJlcGxhY2UoL3t0cmFuc2xhdGlvbn0vZywgdGhpcy50cmFuc2xhdGlvbilcblx0fVxuXG5cdGZvcm1hdF9pbmRleCgpOiBzdHJpbmcge1xuXHRcdGxldCBvbGRfdF9saW5rcyA9IFwiXCJcblx0XHRsZXQgbmV3X3RfbGlua3MgPSBcIlwiXG5cdFx0bGV0IGFwb2NyX2xpbmtzID0gXCJcIlxuXG5cdFx0Ly8gRm9ybWF0IGFsbCBib29rIGxpbmtzXG5cdFx0Zm9yIChjb25zdCBpIGluIHRoaXMuYm9va3MpIHtcblx0XHRcdGxldCBib29rX25hbWUgPSB0aGlzLmZvcm1hdF9ib29rX25hbWVfd2l0aG91dF9vcmRlcihcblx0XHRcdFx0dGhpcy5wbHVnaW4sXG5cdFx0XHRcdHRoaXMuYm9va3NbaV0sXG5cdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbixcblx0XHRcdCk7XG5cblx0XHRcdGxldCBsaW5rID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfbGlua19mb3JtYXRcblx0XHRcdFx0LnJlcGxhY2UoL3tvcmRlcn0vZywgU3RyaW5nKHRoaXMuYm9va3NbaV0uaWQpLnBhZFN0YXJ0KDIgKiBOdW1iZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MucGFkZGVkX29yZGVyKSwgXCIwXCIpKVxuXHRcdFx0XHQucmVwbGFjZSgve2Jvb2t9L2csIGJvb2tfbmFtZSlcblx0XHRcdFx0LnJlcGxhY2UoL3tib29rX2luZGV4fS9nLCB0aGlzLmZvcm1hdF9jaGFwdGVyX2luZGV4X25hbWUodGhpcy5ib29rc1tpXSkpXG5cdFx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIFN0cmluZyh0aGlzLnRyYW5zbGF0aW9uKSlcblx0XHRcdFx0KyAnXFxuJ1xuXG5cdFx0XHRpZiAodGhpcy5ib29rc1tpXS5pZCA8IDQwKSB7XG5cdFx0XHRcdG9sZF90X2xpbmtzICs9IGxpbmsgXG5cdFx0XHR9IGVsc2UgaWYgKHRoaXMuYm9va3NbaV0uaWQgPCA2Nykge1xuXHRcdFx0XHRuZXdfdF9saW5rcyArPSBsaW5rIFxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0YXBvY3JfbGlua3MgKz0gbGluayBcblx0XHRcdH1cblx0XHR9XG5cblx0XHRvbGRfdF9saW5rcyA9IG9sZF90X2xpbmtzLnNsaWNlKDAsIG9sZF90X2xpbmtzLmxlbmd0aC0xKVxuXHRcdG5ld190X2xpbmtzID0gbmV3X3RfbGlua3Muc2xpY2UoMCwgbmV3X3RfbGlua3MubGVuZ3RoLTEpXG5cdFx0YXBvY3JfbGlua3MgPSBhcG9jcl9saW5rcy5zbGljZSgwLCBhcG9jcl9saW5rcy5sZW5ndGgtMSlcblxuXHRcdHJldHVybiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9mb3JtYXRcblx0XHRcdC5yZXBsYWNlKC97dHJhbnNsYXRpb259L2csIHRoaXMudHJhbnNsYXRpb24pXG5cdFx0XHQucmVwbGFjZSgve29sZF90ZXN0YW1lbnR9L2csIG9sZF90X2xpbmtzKVxuXHRcdFx0LnJlcGxhY2UoL3tuZXdfdGVzdGFtZW50fS9nLCBuZXdfdF9saW5rcylcblx0XHRcdC5yZXBsYWNlKC97YXBvY3J5cGhhfS9nLCBhcG9jcl9saW5rcylcblx0fVxuXG5cdHNldF9ib29rKGJvb2s6Qm9va0RhdGEpIHtcblx0XHR0aGlzLmJvb2sgPSBib29rO1xuXG5cdFx0bGV0IFtuZXh0X2Jvb2ssIG5leHRfY2hhcHRlcl0gPSB0aGlzLm5leHRfY2hhcHRlcl9vZih0aGlzLmJvb2ssIHRoaXMuY2hhcHRlcilcblx0XHRsZXQgW3ByZXZfYm9vaywgcHJldl9jaGFwdGVyXSA9IHRoaXMucHJldl9jaGFwdGVyX29mKHRoaXMuYm9vaywgdGhpcy5jaGFwdGVyKVxuXHRcdHRoaXMubmV4dF9ib29rID0gbmV4dF9ib29rXG5cdFx0dGhpcy5uZXh0X2NoYXB0ZXIgPSBuZXh0X2NoYXB0ZXJcblx0XHR0aGlzLnByZXZfYm9vayA9IHByZXZfYm9va1xuXHRcdHRoaXMucHJldl9jaGFwdGVyID0gcHJldl9jaGFwdGVyXG5cdH1cblxuXHRuZXh0X2NoYXB0ZXJfb2YoXG5cdFx0Ym9vazogQm9va0RhdGEsXG5cdFx0Y2hhcHRlcjpudW1iZXIsXG5cdCk6IFtuZXh0X2Jvb2s6Qm9va0RhdGEsIG5leHRfY2hhcHRlcjpudW1iZXJdIHtcblx0XHRsZXQgbmV4dF9ib29rOkJvb2tEYXRhID0gYm9va1xuXHRcdGlmIChjaGFwdGVyID09PSBib29rLmNoYXB0ZXJzLmxhc3QoKSkge1xuXHRcdFx0Ly8gVGhpcyBpcyB0aGUgZmluYWwgY2hhcHRlci4gTmV4dCBib29rIGlzIG5vdCB0aGUgc2FtZVxuXHRcdFx0Ly8gYXMgdGhlIGN1cnJlbnQgYm9va1xuXHRcdFx0bGV0IGJvb2tfaSA9IHRoaXMuZmluZF9ib29rKGJvb2suaWQpXG5cdFx0XHRpZiAoYm9va19pID09IHRoaXMuYm9va3MubGVuZ3RoLTEpIHtcblx0XHRcdFx0Ly8gYGJvb2tgIGlzIGxhc3QgYm9vay4gTmV4dCBib29rIGlzIGZpcnN0IGJvb2tcblx0XHRcdFx0bmV4dF9ib29rID0gdGhpcy5ib29rc1swXVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gU2V0IG5leHRfYm9vayB0byBib29rIGFmdGVyIGN1cnJlbnRcblx0XHRcdFx0bmV4dF9ib29rID0gdGhpcy5ib29rc1tib29rX2krMV1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgbmV4dF9jaGFwdGVyID0gY2hhcHRlcisxXG5cdFx0aWYgKG5leHRfYm9vay5pZCAhPT0gYm9vay5pZCkge1xuXHRcdFx0Ly8gR2V0IGZpcnN0IGNoYXB0ZXIgb2YgbmV4dCBib29rXG5cdFx0XHRuZXh0X2NoYXB0ZXIgPSBuZXh0X2Jvb2suY2hhcHRlcnNbMF1cblx0XHR9XG5cblx0XHRyZXR1cm4gW25leHRfYm9vaywgbmV4dF9jaGFwdGVyXVxuXHR9XG5cblx0cHJldl9jaGFwdGVyX29mKFxuXHRcdGJvb2s6IEJvb2tEYXRhLFxuXHRcdGNoYXB0ZXI6bnVtYmVyLFxuXHQpOiBbcHJldl9ib29rOkJvb2tEYXRhLCBwcmV2X2NoYXB0ZXI6bnVtYmVyXSB7XG5cdFx0bGV0IHByZXZfYm9vazpCb29rRGF0YSA9IGJvb2tcblx0XHRpZiAoY2hhcHRlciA9PT0gYm9vay5jaGFwdGVycy5maXJzdCgpKSB7XG5cdFx0XHQvLyBUaGlzIGlzIHRoZSBmaXJzdCBjaGFwdGVyLiBQcmV2aW91cyBib29rIGlzIG5vdCB0aGUgc2FtZVxuXHRcdFx0Ly8gYXMgdGhlIGN1cnJlbnQgYm9va1xuXHRcdFx0bGV0IGJvb2tfaSA9IHRoaXMuZmluZF9ib29rKGJvb2suaWQpXG5cdFx0XHRpZiAoYm9va19pID09IDApIHtcblx0XHRcdFx0Ly8gYGJvb2tgIGlzIGZpcnN0IGJvb2suIFByZXZpb3VzIGJvb2sgaXMgZmluYWwgYm9va1xuXHRcdFx0XHRwcmV2X2Jvb2sgPSB0aGlzLmJvb2tzW3RoaXMuYm9va3MubGVuZ3RoLTFdXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQvLyBTZXQgcHJldl9ib29rIHRvIGJvb2sgYmVmb3JlIGN1cnJlbnRcblx0XHRcdFx0cHJldl9ib29rID0gdGhpcy5ib29rc1tib29rX2ktMV1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRsZXQgcHJldl9jaGFwdGVyID0gY2hhcHRlci0xXG5cdFx0aWYgKHByZXZfYm9vay5pZCAhPT0gYm9vay5pZCkge1xuXHRcdFx0Ly8gR2V0IGxhc3QgY2hhcHRlciBvZiBwcmV2aW91cyBib29rXG5cdFx0XHRwcmV2X2NoYXB0ZXIgPSBwcmV2X2Jvb2suY2hhcHRlcnNbcHJldl9ib29rLmNoYXB0ZXJzLmxlbmd0aC0xXVxuXHRcdH1cblxuXHRcdHJldHVybiBbcHJldl9ib29rLCBwcmV2X2NoYXB0ZXJdXG5cdH1cblxuXHRzZXRfY2hhcHRlcihjaGFwdGVyOm51bWJlcikge1xuXHRcdHRoaXMuY2hhcHRlciA9IGNoYXB0ZXJcblx0XHR0aGlzLnNldF9ib29rKHRoaXMuYm9vaylcblx0fVxuXG5cdC8vIFNldHMgdGhlIGNhcGl0YWxpemF0aW9uIG9mIHRoZSBnaXZlbiBuYW1lIGRlcGVuZGluZyBvbiAqbmFtZV9jYXNlKi5cblx0dG9fY2FzZShuYW1lOnN0cmluZywgbmFtZV9jYXNlOnN0cmluZywgZGVsaW1ldGVyOnN0cmluZyk6IHN0cmluZyB7XG5cdFx0bmFtZSA9IG5hbWUucmVwbGFjZSgvIC9nLCBkZWxpbWV0ZXIpXG5cdFx0aWYgKG5hbWVfY2FzZSA9PSBcImxvd2VyX2Nhc2VcIikge1xuXHRcdFx0bmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKVxuXHRcdH0gZWxzZSBpZiAobmFtZV9jYXNlID09IFwidXBwZXJfY2FzZVwiKSB7XG5cdFx0XHRuYW1lID0gbmFtZS50b1VwcGVyQ2FzZSgpXG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG5cblx0Z2V0X3ZlcnNlX2NvdW50KCk6bnVtYmVyIHtcblx0XHRyZXR1cm4gdGhpcy52ZXJzZV9jb3VudHMuZ2V0X2NvdW50X2Zvcih0aGlzLmJvb2suaWQsIHRoaXMuY2hhcHRlcik7XG5cdH1cbn1cblxuY2xhc3MgVmVyc2VDb3VudHMge1xuXHRib29rczogUmVjb3JkPEJvb2tJZCwgUmVjb3JkPG51bWJlciwgbnVtYmVyPj5cblxuXHRnZXRfY291bnRfZm9yKGJvb2s6Qm9va0lkLCBjaGFwdGVyOm51bWJlcik6IG51bWJlciB7XG5cdFx0cmV0dXJuIHRoaXMuYm9va3NbYm9va11bY2hhcHRlcl0gfHwgMFxuXHR9XG59XG5cbmludGVyZmFjZSBUcmFuc2xhdGlvbkRhdGEge1xuXHR0cmFuc2xhdGlvbjogc3RyaW5nO1xuXHRib29rczogUmVjb3JkPEJvb2tJZCwgUmVjb3JkPG51bWJlciwgQ2hhcHRlckRhdGE+Pjtcbn1cbmNsYXNzIEJvb2tEYXRhIHtcblx0Ly8vIFRoZSBCb29rJ3MgbnVtZXJpYyBJRFxuXHRpZDogbnVtYmVyO1xuXHQvLy8gVGhlIGNoYXB0ZXJzIGluY2x1ZGVkIGluIHRoaXMgYm9vayBieSB0aGVpciBudW1lcmljIG9yZGVyXG5cdGNoYXB0ZXJzOiBudW1iZXJbXTtcblx0Ly8vIFRoZSBkaXNwbGF5IG5hbWUgZm9yIHRoZSBib29rXG5cdG5hbWU6IHN0cmluZztcblxuXHRjb25zdHJ1Y3RvcihpZDpudW1iZXIsIG5hbWU6c3RyaW5nLCBjaGFwdGVyczpudW1iZXJbXSkge1xuXHRcdHRoaXMuaWQgPSBpZFxuXHRcdHRoaXMubmFtZSA9IG5hbWVcblx0XHR0aGlzLmNoYXB0ZXJzID0gY2hhcHRlcnNcblx0fVxuXG5cdC8vLyBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdGhlIGNoYXB0ZXIgYXQgaW5kZXhcblx0Z2V0X2NoYXB0ZXJfbnVtYmVyKGluZGV4Om51bWJlcik6IG51bWJlciB7XG5cdFx0aWYgKGluZGV4ID49IHRoaXMuY2hhcHRlcnMubGVuZ3RoKSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJcIilcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuY2hhcHRlcnNbaW5kZXhdXG5cdH1cblxuXHRoYXNfY2hhcHRlcihjaGFwdGVyOm51bWJlcik6IGJvb2xlYW4ge1xuXHRcdHJldHVybiB0aGlzLmNoYXB0ZXJzLmZpbmQoKHZhbHVlLCBfLCBfXykgPT4gdmFsdWUgPT09IGNoYXB0ZXIpICE9PSB1bmRlZmluZWRcblx0fVxufVxuXG50eXBlIEJvb2tJZCA9IG51bWJlcjtcblxuLy8vIEEgcmVjb3JkIG9mIHZlcnNlcyB0byB0ZXh0c1xudHlwZSBDaGFwdGVyRGF0YSA9IFJlY29yZDxudW1iZXIsIHN0cmluZz47XG5cbi8vLyBFbnN1cmVzIGFsbCBjb3JvdXRpbmVzIHdhaXQgZm9yIHRoZSBzYW1lIHBpZWNlIG9mIGNvZGUgdG8gZmluaXNoXG5jbGFzcyBTeW5jQ2FjaGUge1xuXHRzeW5jczpSZWNvcmQ8c3RyaW5nLCBTeW5jQ2FjaGVJdGVtPiA9IHt9XG5cblx0YXN5bmMgc3luYyhrZXk6c3RyaW5nLCBib2R5OigpID0+IGFueSk6IFByb21pc2U8YW55PiB7XG5cdFx0aWYgKCEoa2V5IGluIHRoaXMuc3luY3MpKSB7XG5cdFx0XHR0aGlzLnN5bmNzW2tleV0gPSBuZXcgU3luY0NhY2hlSXRlbSgpXG5cdFx0fVxuXHRcdGxldCBzeW5jX2l0ZW0gPSB0aGlzLnN5bmNzW2tleV1cblxuXHRcdHN5bmNfaXRlbS5yZWZfY291bnQgKz0gMVxuXG5cblx0XHR0cnkge1xuXHRcdFx0YXdhaXQgc3luY19pdGVtLm11dGV4XG5cdFx0XHRcdC5hY3F1aXJlKClcblx0XHRcdFx0LnRoZW4oYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHN5bmNfaXRlbS5kYXRhID0gYXdhaXQgYm9keSgpXG5cdFxuXHRcdFx0XHRcdHN5bmNfaXRlbS5tdXRleC5jYW5jZWwoKVxuXHRcdFx0XHRcdHN5bmNfaXRlbS5tdXRleC5yZWxlYXNlKClcblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKGUgPT4ge1xuXHRcdFx0XHRcdGlmIChlID09PSBFX0NBTkNFTEVEKSB7XG5cdFx0XHRcdFx0XHQvKnBhc3MqL1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0O1xuXG5cdFx0fSBmaW5hbGx5IHtcblx0XHRcdHN5bmNfaXRlbS5yZWZfY291bnQgLT0gMVxuXHRcdFx0aWYgKHN5bmNfaXRlbS5yZWZfY291bnQgPT09IDApIHtcblx0XHRcdFx0ZGVsZXRlIHRoaXMuc3luY3Nba2V5XVxuXHRcdFx0fVxuXHRcdH1cblx0XHRcblx0XHRcblx0XHRyZXR1cm4gc3luY19pdGVtLmRhdGFcblx0fVxufVxuY2xhc3MgU3luY0NhY2hlSXRlbSB7XG5cdG11dGV4OiBNdXRleCA9IG5ldyBNdXRleCgpXG5cdGRhdGE6IGFueSA9IG51bGxcblx0cmVmX2NvdW50OiBudW1iZXIgPSAwXG59XG5cbmNsYXNzIEJpYmxlQVBJIHtcblx0Y2FjaGVfY2xlYXJfdGltZXI6IFByb21pc2U8bnVsbD4gfCBudWxsID0gbnVsbDtcblx0Y2FjaGVfY2xlYXJfdGltZXJfcHJvbWlzZV9lcnI6IChyZWFzb24/OiBhbnkpID0+IHZvaWQ7XG5cdHN5bmNfY2FjaGU6IFN5bmNDYWNoZSA9IG5ldyBTeW5jQ2FjaGUoKTtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGFzeW5jIF9nZXRfYm9va19kYXRhKHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6Qm9va0lkKTogUHJvbWlzZTxCb29rRGF0YT4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cdGFzeW5jIF9nZXRfYm9va3NfZGF0YSh0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxCb29rRGF0YT4+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRhc3luYyBfZ2V0X2NoYXB0ZXIoXG5cdFx0dHJhbnNsYXRpb246IHN0cmluZyxcblx0XHRib29rX2lkOiBudW1iZXIsXG5cdFx0Y2hhcHRlcjogbnVtYmVyLFxuXHQpOiBQcm9taXNlPENoYXB0ZXJEYXRhPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0YXN5bmMgX2dldF90cmFuc2xhdGlvbih0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxUcmFuc2xhdGlvbkRhdGE+IHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJ1bmltcGxlbWVudGVkXCIpXG5cdH1cblxuXHRhc3luYyBfZ2V0X3RyYW5zbGF0aW9ucygpOiBQcm9taXNlPFRyYW5zbGF0aW9ucz4ge1xuXHRcdHRocm93IG5ldyBFcnJvcihcInVuaW1wbGVtZW50ZWRcIilcblx0fVxuXG5cdGFzeW5jIGdldF9kZWZhdWx0X3RyYW5zbGF0aW9uKCk6IFByb21pc2U8c3RyaW5nPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0YXN5bmMgX2dldF92ZXJzZShcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0dmVyc2U6IG51bWJlcixcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRsZXQgY2hhcHRlcl9kYXRhID0gYXdhaXQgdGhpcy5nZXRfY2hhcHRlcihcblx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0Ym9va19pZCxcblx0XHRcdGNoYXB0ZXIsXG5cdFx0KTtcblx0XHRyZXR1cm4gY2hhcHRlcl9kYXRhW3ZlcnNlXSB8fCBcIlwiO1xuXHR9XG5cblx0YXN5bmMgX2dldF92ZXJzZV9jb3VudCh0cmFuc2xhdGlvbjpzdHJpbmcpOiBQcm9taXNlPFZlcnNlQ291bnRzPiB7XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwidW5pbXBsZW1lbnRlZFwiKVxuXHR9XG5cblx0Ly8vIERvd25sb2FkcyBhIHRyYW5zbGF0aW9uIGFuZCBzYXZlcyBpdCBsb2NhbGx5LlxuXHRhc3luYyB1c2VyX2Rvd25sb2FkX3RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uOnN0cmluZykge1xuXHRcdGxldCBub3RpZnkgPSBuZXcgTm90aWNlKFxuXHRcdFx0XCJEb3dubG9hZGluZyB7MH0gdHJhbnNsYXRpb25cIi5mb3JtYXQodHJhbnNsYXRpb24pLFxuXHRcdFx0MCxcblx0XHQpXG5cblx0XHRsZXQgcHJvbWlzZXMgPSBbXVxuXHRcdGxldCB0cmFuc2xhdGlvbl9kYXRhID0gYXdhaXQgdGhpcy5nZXRfdHJhbnNsYXRpb24odHJhbnNsYXRpb24pXG5cdFx0Zm9yIChjb25zdCBib29rX2lkXyBpbiB0cmFuc2xhdGlvbl9kYXRhLmJvb2tzKSB7XG5cdFx0XHRjb25zdCBib29rX2lkID0gTnVtYmVyKGJvb2tfaWRfKVxuXHRcdFx0Y29uc3QgY2hhcHRlcnMgPSB0cmFuc2xhdGlvbl9kYXRhLmJvb2tzW2Jvb2tfaWRdXG5cdFx0XHRmb3IgKGNvbnN0IGNoYXB0ZXJfa2V5IG9mIE9iamVjdC5rZXlzKGNoYXB0ZXJzKSkge1xuXHRcdFx0XHRjb25zdCBjaGFwdGVyID0gTnVtYmVyKGNoYXB0ZXJfa2V5KVxuXHRcdFx0XHRjb25zdCBjaGFwdGVyX2RhdGEgPSBjaGFwdGVyc1tjaGFwdGVyXVxuXHRcdFx0XHRwcm9taXNlcy5wdXNoKHRoaXMuc2F2ZV9jaGFwdGVyX2RhdGEoXG5cdFx0XHRcdFx0Y2hhcHRlcl9kYXRhLFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0KSlcblx0XHRcdH1cblx0XHR9XG5cblx0XHRub3RpZnkuaGlkZSgpXG5cdFx0bm90aWZ5ID0gbmV3IE5vdGljZShcIlNhdmluZyB7MH0gdHJhbnNsYXRpb24gZmlsZXNcIi5mb3JtYXQodHJhbnNsYXRpb24pLCAwKVxuXHRcdGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKVxuXG5cdFx0bm90aWZ5LmhpZGUoKVxuXHRcdG5ldyBOb3RpY2UoXCJEb3dubG9hZCBjb21wbGV0ZVwiKVxuXHR9XG5cblx0Ly8gR2V0IGJvb2sgSUQgZnJvbSB0cmFuc2xhdGlvbiBhbmQgYm9vayBuYW1lXG5cdGFzeW5jIGJvb2tfaWQodHJhbnNsYXRpb246c3RyaW5nLCBib29rX25hbWU6c3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcblx0XHRsZXQgYm9va3MgPSBhd2FpdCB0aGlzLmdldF9ib29rc19kYXRhKHRyYW5zbGF0aW9uKTtcblx0XHRmb3IgKGxldCBpIG9mIGJvb2tzLmtleXMoKSkge1xuXHRcdFx0aWYgKGJvb2tzW2ldLm5hbWUgPT09IGJvb2tfbmFtZSkge1xuXHRcdFx0XHRyZXR1cm4gYm9va3NbaV0uaWQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKGJvb2tfbmFtZSBpbiBERUZBVUxUX05BTUVfTUFQKSB7XG5cdFx0XHRyZXR1cm4gREVGQVVMVF9OQU1FX01BUFtib29rX25hbWVdO1xuXHRcdH1cblxuXHRcdHRocm93IG5ldyBFcnJvcihcblx0XHRcdFwiVHJhbnNsYXRpb24gJ3swfScgaGFzIG5vIGJvb2sgbmFtZWQgJ3sxfSdcIlxuXHRcdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uLCBib29rX25hbWUpXG5cdFx0KTtcblx0fVxuXG5cdGFzeW5jIGdldF9ib29rX2RhdGEodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDpCb29rSWQpOiBQcm9taXNlPEJvb2tEYXRhPiB7XG5cdFx0bGV0IGJvb2tfa2V5ID0gXCJ7MH0gezF9XCIuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCkpO1xuXG5cdFx0bGV0IGRhdGEgPSBhd2FpdCB0aGlzLnN5bmNfY2FjaGUuc3luYyhcblx0XHRcdFwiZ2V0X2Jvb2tfZGF0YV9cIiArIGJvb2tfa2V5LFxuXHRcdFx0KCkgPT4gdGhpcy5fZ2V0X2Jvb2tfZGF0YSh0cmFuc2xhdGlvbiwgYm9va19pZCksXG5cdFx0KVxuXG5cdFx0aWYgKGRhdGEgPT0gbnVsbCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGRhdGE7XG5cdH1cblxuXHRhc3luYyBnZXRfYm9va3NfZGF0YSh0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxBcnJheTxCb29rRGF0YT4+IHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5zeW5jX2NhY2hlLnN5bmMoXG5cdFx0XHRcImdldF9ib29rc19kYXRhX1wiICsgdHJhbnNsYXRpb24sXG5cdFx0XHQoKSA9PiB0aGlzLl9nZXRfYm9va3NfZGF0YSh0cmFuc2xhdGlvbiksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgY2FjaGVfY2hhcHRlcihcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0Y2hhcHRlcl9kYXRhOiBDaGFwdGVyRGF0YSB8IG51bGwsXG5cdFx0c2F2ZV9sb2NhbGx5OiBib29sZWFuLFxuXHQpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRsZXQga2V5ID0gdGhpcy5tYWtlX2NoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uLCBib29rX2lkLCBjaGFwdGVyKTtcblxuXHRcdC8vIFNhdmUgY2hhcHRlciB0byBsb2NhbCBmaWxlIHN5dGVtXG5cdFx0bGV0IGNhY2hlX3BhdGggPSB0aGlzLmdldF9jYWNoZV9wYXRoKCk7XG5cdFx0dGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIubWtkaXIoY2FjaGVfcGF0aCk7XG5cdFx0bGV0IGNhY2hlZF9maWxlX25hbWUgPSBcInswfSB7MX0gezJ9LnR4dFwiXG5cdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCksIFN0cmluZyhjaGFwdGVyKSk7XG5cdFx0bGV0IGNhY2hlZF9maWxlX3BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0Y2FjaGVfcGF0aCArIFwiL1wiICsgY2FjaGVkX2ZpbGVfbmFtZSxcblx0XHQpO1xuXHRcdGlmIChcblx0XHRcdGNoYXB0ZXJfZGF0YSAhPSBudWxsXG5cdFx0XHQmJiAhYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGNhY2hlZF9maWxlX3BhdGgpXG5cdFx0KSB7XG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci53cml0ZShcblx0XHRcdFx0Y2FjaGVkX2ZpbGVfcGF0aCxcblx0XHRcdFx0dGhpcy5tYWtlX2NoYXB0ZXJfZmlsZShjaGFwdGVyX2RhdGEpLFxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBTdGFydC9yZWZyZXNoIGNhY2hlIGNsZWFyIHRpbWVyXG5cdFx0aWYgKHRoaXMuY2FjaGVfY2xlYXJfdGltZXIgIT09IG51bGwgJiYgdGhpcy5jYWNoZV9jbGVhcl90aW1lcl9wcm9taXNlX2VyciAhPT0gbnVsbCkge1xuXHRcdFx0Ly8gQ2xlYXIgb3V0IG9sZCBwcm9taXNlXG5cdFx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyX3Byb21pc2VfZXJyKG51bGwpO1xuXHRcdH1cblx0XHR0aGlzLmNhY2hlX2NsZWFyX3RpbWVyID0gbmV3IFByb21pc2UoKG9rLCBlcnIpID0+IHtcblx0XHRcdHRoaXMuY2FjaGVfY2xlYXJfdGltZXJfcHJvbWlzZV9lcnIgPSBlcnI7XG5cdFx0XHRzZXRUaW1lb3V0KG9rLCA2MDAwMCAqIDYwKSAvLyBUaW1lb3V0IGFmdGVyIDEgaG91clxuXHRcdH0pO1xuXHRcdHRoaXMuY2FjaGVfY2xlYXJfdGltZXJcblx0XHRcdC50aGVuKCgpID0+IHRoaXMuY2xlYXJfbG9jYWxfZmlsZXMoKSlcblx0XHRcdC5jYXRjaChlcnIgPT4geyB9KTtcblx0fVxuXG5cdGFzeW5jIGdldF9jaGFwdGVyKFxuXHRcdHRyYW5zbGF0aW9uOiBzdHJpbmcsXG5cdFx0Ym9va19pZDogbnVtYmVyLFxuXHRcdGNoYXB0ZXI6IG51bWJlcixcblx0KTogUHJvbWlzZTxDaGFwdGVyRGF0YT4ge1xuXHRcdGxldCBjaGFwdGVyX2tleSA9IHRoaXMubWFrZV9jaGFwdGVyX2tleSh0cmFuc2xhdGlvbiwgYm9va19pZCwgY2hhcHRlcik7XG5cblx0XHRsZXQgZmlsZV9uYW1lID0gdGhpcy5tYWtlX2NoYXB0ZXJfZmlsZV9uYW1lKHRyYW5zbGF0aW9uLCBib29rX2lkLCBjaGFwdGVyKVxuXG5cdFx0bGV0IGRvd25sb2FkX3BhdGggPSB0aGlzLmdldF9kb3dubG9hZF9wYXRoKClcblx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5ta2Rpcihkb3dubG9hZF9wYXRoKVxuXHRcdGxldCBkb3dubG9hZF9maWxlX3BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0ZG93bmxvYWRfcGF0aCArIFwiL1wiICsgZmlsZV9uYW1lXG5cdFx0KVxuXG5cdFx0bGV0IGNhY2hlX3BhdGggPSB0aGlzLmdldF9jYWNoZV9wYXRoKClcblx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5ta2RpcihjYWNoZV9wYXRoKVxuXHRcdGxldCBjYWNoZWRfZmlsZV9wYXRoID0gbm9ybWFsaXplUGF0aChcblx0XHRcdGNhY2hlX3BhdGggKyBcIi9cIiArIGZpbGVfbmFtZVxuXHRcdClcblxuXHRcdGxldCBkYXRhID0gYXdhaXQgdGhpcy5zeW5jX2NhY2hlLnN5bmMoXG5cdFx0XHRcImdldF9jaGFwdGVyX1wiK2NoYXB0ZXJfa2V5LFxuXHRcdFx0YXN5bmMgKCkgPT4ge1xuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGxvYWQgY2hhcHRlciBsb2NhbGx5XG5cdFx0XHRcdGlmICggYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXJcblx0XHRcdFx0XHQuZXhpc3RzKGRvd25sb2FkX2ZpbGVfcGF0aClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Ly8gTG9hZCBmcm9tIGRvd25sb2FkXG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMubG9hZF9jaGFwdGVyX2ZpbGUoZG93bmxvYWRfcGF0aCwgZmlsZV9uYW1lKVxuXHRcdFx0XHR9IGVsc2UgaWYgKCBhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlclxuXHRcdFx0XHRcdC5leGlzdHMoY2FjaGVkX2ZpbGVfcGF0aClcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0Ly8gTG9hZCBmcm9tIGNhY2hlXG5cdFx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMubG9hZF9jaGFwdGVyX2ZpbGUoY2FjaGVfcGF0aCwgZmlsZV9uYW1lKVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gRmV0Y2ggY2hhcHRlciBmcm9tIHRoZSB3ZWJcblx0XHRcdFx0cmV0dXJuIGF3YWl0IHRoaXMuX2dldF9jaGFwdGVyKFxuXHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdGJvb2tfaWQsXG5cdFx0XHRcdFx0Y2hhcHRlcixcblx0XHRcdFx0KTtcblx0XHRcdH0sXG5cdFx0KVxuXG5cdFx0aWYgKFxuXHRcdFx0ZGF0YSA9PT0gbnVsbFxuXHRcdFx0fHwgT2JqZWN0LmtleXMoZGF0YSkubGVuZ3RoID09IDBcblx0XHQpIHtcblx0XHRcdC8vIEZhaWxlZCB0byBsb2FkIG9yIGRvd25sb2FkIGNoYXB0ZXJcblx0XHRcdHJldHVybiBbXTtcblx0XHR9XG5cblx0XHRuZXcgUHJvbWlzZShhc3luYyAob2ssIGVycikgPT4ge1xuXHRcdFx0Ly8gQ2FjaGUgY2hhcHRlciBpZiBub3QgZG93bmxvYWRlZFxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdCFhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlclxuXHRcdFx0XHRcdFx0LmV4aXN0cyhkb3dubG9hZF9maWxlX3BhdGgpXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHRoaXMuY2FjaGVfY2hhcHRlcihcblx0XHRcdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRcdFx0Ym9va19pZCxcblx0XHRcdFx0XHRcdGNoYXB0ZXIsXG5cdFx0XHRcdFx0XHRkYXRhLFxuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Muc3RvcmVfbG9jYWxseSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9rKG51bGwpXG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGVycihlKVxuXHRcdFx0fVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gZGF0YTtcblx0fVxuXG5cdGdldF9jYWNoZV9wYXRoKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5vcm1hbGl6ZVBhdGgodGhpcy5wbHVnaW4ubWFuaWZlc3QuZGlyICsgXCIvLm15YmlibGVjYWNoZVwiKTtcblx0fVxuXG5cdGdldF9kb3dubG9hZF9wYXRoKCk6IHN0cmluZyB7XG5cdFx0cmV0dXJuIG5vcm1hbGl6ZVBhdGgodGhpcy5wbHVnaW4ubWFuaWZlc3QuZGlyICsgXCIvLmNoYXB0ZXJzXCIpO1xuXHR9XG5cblx0YXN5bmMgZ2V0X3RyYW5zbGF0aW9uKHRyYW5zbGF0aW9uOiBzdHJpbmcpOiBQcm9taXNlPFRyYW5zbGF0aW9uRGF0YT4ge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnN5bmNfY2FjaGUuc3luYyhcblx0XHRcdFwiZ2V0X3RyYW5zbGF0aW9uX1wiICsgdHJhbnNsYXRpb24sXG5cdFx0XHQoKSA9PiB0aGlzLl9nZXRfdHJhbnNsYXRpb24odHJhbnNsYXRpb24pLFxuXHRcdClcblx0fVxuXG5cdGFzeW5jIF9nZXRfZGVmYXVsdF90cmFuc2xhdGlvbigpOiBQcm9taXNlPHN0cmluZz4ge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnN5bmNfY2FjaGUuc3luYyhcblx0XHRcdFwiZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb25cIixcblx0XHRcdCgpID0+IHRoaXMuX2dldF9kZWZhdWx0X3RyYW5zbGF0aW9uKCksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgZ2V0X3RyYW5zbGF0aW9ucygpOiBQcm9taXNlPFRyYW5zbGF0aW9ucz4ge1xuXHRcdHJldHVybiBhd2FpdCB0aGlzLnN5bmNfY2FjaGUuc3luYyhcblx0XHRcdFwiZ2V0X3RyYW5zbGF0aW9uc1wiLFxuXHRcdFx0KCkgPT4gdGhpcy5fZ2V0X3RyYW5zbGF0aW9ucygpLFxuXHRcdClcblx0fVxuXG5cdGFzeW5jIGdldF92ZXJzZShcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdFx0dmVyc2U6IG51bWJlcixcblx0KTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRsZXQga2V5ID0gXCJnZXRfdmVyc2VfezB9X3sxfV97Mn1fezN9XCIuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCksIFN0cmluZyhjaGFwdGVyKSwgU3RyaW5nKHZlcnNlKSlcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5zeW5jX2NhY2hlLnN5bmMoXG5cdFx0XHRrZXksXG5cdFx0XHQoKSA9PiB0aGlzLl9nZXRfdmVyc2UoXG5cdFx0XHRcdHRyYW5zbGF0aW9uLFxuXHRcdFx0XHRib29rX2lkLFxuXHRcdFx0XHRjaGFwdGVyLFxuXHRcdFx0XHR2ZXJzZSxcblx0XHRcdCksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgZ2V0X3ZlcnNlX2NvdW50KHRyYW5zbGF0aW9uOnN0cmluZyk6IFByb21pc2U8VmVyc2VDb3VudHM+IHtcblx0XHRyZXR1cm4gYXdhaXQgdGhpcy5zeW5jX2NhY2hlLnN5bmMoXG5cdFx0XHRcImdldF92ZXJzZV9jb3VudF9cIit0cmFuc2xhdGlvbixcblx0XHRcdCgpID0+IHRoaXMuX2dldF92ZXJzZV9jb3VudCh0cmFuc2xhdGlvbiksXG5cdFx0KVxuXHR9XG5cblx0YXN5bmMgY2xlYXJfbG9jYWxfZmlsZXMoKSB7XG5cdFx0dGhpcy5jYWNoZV9jbGVhcl90aW1lciA9IG51bGw7XG5cblx0XHRsZXQgY2FjaGVfcGF0aCA9IHRoaXMuZ2V0X2NhY2hlX3BhdGgoKTtcblx0XHRpZiAoYXdhaXQgdGhpcy5wbHVnaW4uYXBwLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKGNhY2hlX3BhdGgpKSB7XG5cdFx0XHRpZiAoIWF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnRyYXNoU3lzdGVtKGNhY2hlX3BhdGgpKSB7XG5cdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLnRyYXNoTG9jYWwoY2FjaGVfcGF0aCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bGV0IGRvd25sb2FkX3BhdGggPSB0aGlzLmdldF9kb3dubG9hZF9wYXRoKCk7XG5cdFx0aWYgKGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhkb3dubG9hZF9wYXRoKSkge1xuXHRcdFx0aWYgKCFhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci50cmFzaFN5c3RlbShkb3dubG9hZF9wYXRoKSkge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci50cmFzaExvY2FsKGRvd25sb2FkX3BhdGgpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRfY2hhcHRlcl9maWxlKGZvbGRlcjpzdHJpbmcsIHBhdGg6IHN0cmluZyk6IFByb21pc2U8Q2hhcHRlckRhdGE+IHtcblx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5ta2Rpcihmb2xkZXIpXG5cdFx0bGV0IHJhdyA9IGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyXG5cdFx0XHQucmVhZChmb2xkZXIgKyBcIi9cIiArIHBhdGgpXG5cdFx0O1xuXHRcdFxuXHRcdGxldCB2ZXJzZV9saXN0ID0gW11cblx0XHRpZiAocmF3LnN0YXJ0c1dpdGgoXCJbXCIpKSB7XG5cdFx0XHR2ZXJzZV9saXN0ID0gSlNPTi5wYXJzZShyYXcpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHZlcnNlX2xpc3QgPSByYXcuc3BsaXQoXCJcXG5cIilcblx0XHR9XG5cdFx0XG5cdFx0bGV0IHZlcnNlczpDaGFwdGVyRGF0YSA9IHt9XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgIT0gdmVyc2VfbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0aWYgKHZlcnNlX2xpc3RbaV0ubGVuZ3RoID09IDApIHtcblx0XHRcdFx0Y29udGludWVcblx0XHRcdH1cblx0XHRcdHZlcnNlc1tpKzFdID0gdmVyc2VfbGlzdFtpXVxuXHRcdH1cblx0XHRyZXR1cm4gdmVyc2VzXG5cdH1cblxuXHRtYWtlX2NoYXB0ZXJfZmlsZShjaGFwdGVyX2RhdGE6Q2hhcHRlckRhdGEpOiBzdHJpbmcge1xuXHRcdGxldCBhZGRlZF92ZXJzZV9jb3VudCA9IDBcblx0XHRsZXQgYm9keSA9IFwiXCI7XG5cdFx0Zm9yIChsZXQgaSA9IDE7IGFkZGVkX3ZlcnNlX2NvdW50ICE9PSBPYmplY3Qua2V5cyhjaGFwdGVyX2RhdGEpLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRpZiAoaSBpbiBjaGFwdGVyX2RhdGEpIHtcblx0XHRcdFx0Ym9keSArPSBjaGFwdGVyX2RhdGFbaV1cblx0XHRcdFx0YWRkZWRfdmVyc2VfY291bnQgKz0gMVxuXHRcdFx0fVxuXHRcdFx0aWYgKGFkZGVkX3ZlcnNlX2NvdW50ICE9PSBPYmplY3Qua2V5cyhjaGFwdGVyX2RhdGEpLmxlbmd0aCkge1xuXHRcdFx0XHRib2R5ICs9IFwiXFxuXCJcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIGJvZHlcblx0fVxuXG5cdC8vLyBNYWtlcyB0aGUgZmlsZSBuYW1lIGZvciBkb3dubG9hZGVkIGNoYXB0ZXJzXG5cdG1ha2VfY2hhcHRlcl9maWxlX25hbWUodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDogbnVtYmVyLCBjaGFwdGVyOiBOdW1iZXIpOiBzdHJpbmcge1xuXHRcdHJldHVybiBcInswfSB7MX0gezJ9LnR4dFwiLmZvcm1hdCh0cmFuc2xhdGlvbiwgU3RyaW5nKGJvb2tfaWQpLCBTdHJpbmcoY2hhcHRlcikpO1xuXHRcdFxuXHR9XG5cblx0bWFrZV9jaGFwdGVyX2tleSh0cmFuc2xhdGlvbjogc3RyaW5nLCBib29rX2lkOiBudW1iZXIsIGNoYXB0ZXI6IE51bWJlcikge1xuXHRcdHJldHVybiBcInswfS57MX0uezJ9XCIuZm9ybWF0KHRyYW5zbGF0aW9uLCBTdHJpbmcoYm9va19pZCksIFN0cmluZyhjaGFwdGVyKSk7XG5cdH1cblxuXHQvLy8gU2F2ZXMgY2hhcHRlciBkYXRhIHRvIGxvY2FsIGRpc2tcblx0YXN5bmMgc2F2ZV9jaGFwdGVyX2RhdGEoXG5cdFx0Y2hhcHRlcl9kYXRhOkNoYXB0ZXJEYXRhLFxuXHRcdHRyYW5zbGF0aW9uOnN0cmluZyxcblx0XHRib29rX2lkOm51bWJlcixcblx0XHRjaGFwdGVyOm51bWJlcixcblx0KSB7XG5cdFx0Ly8gU2F2ZSBjaGFwdGVyIHRvIGxvY2FsIGZpbGUgc3l0ZW1cblx0XHRsZXQgcGF0aCA9IHRoaXMuZ2V0X2Rvd25sb2FkX3BhdGgoKTtcblx0XHR0aGlzLnBsdWdpbi5hcHAudmF1bHQuYWRhcHRlci5ta2RpcihwYXRoKTtcblx0XHRsZXQgZmlsZV9uYW1lID0gdGhpc1xuXHRcdFx0Lm1ha2VfY2hhcHRlcl9maWxlX25hbWUodHJhbnNsYXRpb24sIGJvb2tfaWQsIGNoYXB0ZXIpO1xuXHRcdGxldCBmaWxlX3BhdGggPSBub3JtYWxpemVQYXRoKFxuXHRcdFx0cGF0aCArIFwiL1wiICsgZmlsZV9uYW1lLFxuXHRcdCk7XG5cdFx0aWYgKFxuXHRcdFx0IWF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLmV4aXN0cyhmaWxlX3BhdGgpXG5cdFx0KSB7XG5cdFx0XHRsZXQgYm9keSA9IFwiXCI7XG5cdFx0XHRmb3IgKGNvbnN0IGlfIGluIGNoYXB0ZXJfZGF0YSkge1xuXHRcdFx0XHRjb25zdCBpID0gTnVtYmVyKGlfKVxuXHRcdFx0XHRib2R5ICs9IGNoYXB0ZXJfZGF0YVtpXTtcblx0XHRcdFx0aWYgKGkgIT09IE9iamVjdC5rZXlzKGNoYXB0ZXJfZGF0YSkubGVuZ3RoKSB7XG5cdFx0XHRcdFx0Ym9keSArPSBcIlxcblwiXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmFwcC52YXVsdC5hZGFwdGVyLndyaXRlKFxuXHRcdFx0XHRmaWxlX3BhdGgsXG5cdFx0XHRcdGJvZHksXG5cdFx0XHQpO1xuXHRcdH1cblx0fVxufVxuXG50eXBlIEJvb2tLZXkgPSBzdHJpbmc7XG50eXBlIENoYXB0ZXJLZXkgPSBzdHJpbmc7XG5cbnR5cGUgVHJhbnNsYXRpb25zID0gUmVjb3JkPHN0cmluZywgVHJhbnNsYXRpb24+O1xuaW50ZXJmYWNlIFRyYW5zbGF0aW9uIHtcblx0ZGlzcGxheV9uYW1lOiBzdHJpbmcsXG5cdGFiYnJldmlhdGVkX25hbWU6IHN0cmluZyxcblx0bGFuZ3VhZ2U6IHN0cmluZyxcbn1cblxuY2xhc3MgQm9sbHNMaWZlQmlibGVBUEkgZXh0ZW5kcyBCaWJsZUFQSSB7XG5cdHBsdWdpbjogTXlCaWJsZVxuXHR0cmFuc2xhdGlvbnM6IFRyYW5zbGF0aW9ucyA9IHt9XG5cdHRyYW5zbGF0aW9uX21hcHM6IFJlY29yZDxzdHJpbmcsIEFycmF5PEJvb2tEYXRhPj4gPSB7fVxuXHRjYWNoZV9jbGVhcl90aW1lcjogUHJvbWlzZTxudWxsPiB8IG51bGwgPSBudWxsXG5cdHN5bmNfY2FjaGU6IFN5bmNDYWNoZSA9IG5ldyBTeW5jQ2FjaGUoKVxuXG5cdGFzeW5jIF9nZXRfY2hhcHRlcihcblx0XHR0cmFuc2xhdGlvbjogc3RyaW5nLFxuXHRcdGJvb2tfaWQ6IG51bWJlcixcblx0XHRjaGFwdGVyOiBudW1iZXIsXG5cdCk6IFByb21pc2U8Q2hhcHRlckRhdGE+IHtcblx0XHQvLyBGZXRjaCBjaGFwdGVyIGZyb20gdGhlIHdlYlxuXHRcdHRyeSB7XG5cdFx0XHRsZXQgdmVyc2VfZGF0YV9saXN0ID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9nZXQtY2hhcHRlci97MH0vezF9L3syfS9cIlxuXHRcdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKVxuXHRcdFx0KSk7XG5cblx0XHRcdGxldCB0ZXh0czpDaGFwdGVyRGF0YSA9IHt9XG5cdFx0XHRmb3IgKGNvbnN0IGRhdGEgb2YgdmVyc2VfZGF0YV9saXN0KSB7XG5cdFx0XHRcdGxldCB2ZXJzZSA9IGRhdGFbXCJ2ZXJzZVwiXVxuXHRcdFx0XHR0ZXh0c1t2ZXJzZV0gPSBkYXRhW1widGV4dFwiXVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdGV4dHNcblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubWVzc2FnZS5zdGFydHNXaXRoKFwiTm8gYm9vayBleGlzdHMgYnkgbmFtZVwiKSkge1xuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBlO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIF9nZXRfdHJhbnNsYXRpb24odHJhbnNsYXRpb246IHN0cmluZyk6IFByb21pc2U8VHJhbnNsYXRpb25EYXRhPiB7XG5cdFx0bGV0IHZlcnNlcyA9IEpTT04ucGFyc2UoXG5cdFx0XHRhd2FpdCBodHRwR2V0KFxuXHRcdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9zdGF0aWMvdHJhbnNsYXRpb25zL3swfS5qc29uXCIuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdFx0KVxuXHRcdCk7XG5cblx0XHRsZXQgYmlibGU6IFRyYW5zbGF0aW9uRGF0YSA9IHtcblx0XHRcdHRyYW5zbGF0aW9uOiB0cmFuc2xhdGlvbixcblx0XHRcdGJvb2tzOiB7fSxcblx0XHR9O1xuXG5cdFx0YXdhaXQgbmV3IFByb21pc2UoYXN5bmMgKG9rLCBlcnIpID0+IHtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdGxldCBpID0gMDtcblx0XHRcdFx0bGV0IGN1cnJfYm9va19pZCA9IC0xO1xuXHRcdFx0XHRsZXQgY3Vycl9jaGFwdGVyID0gLTE7XG5cdFx0XHRcdGZvciAoY29uc3QgZGF0YSBvZiB2ZXJzZXMpIHtcblx0XHRcdFx0XHRsZXQgdmVyc2UgPSBkYXRhW1widmVyc2VcIl1cblx0XG5cdFx0XHRcdFx0Y3Vycl9ib29rX2lkID0gZGF0YVtcImJvb2tcIl1cblx0XHRcdFx0XHRjdXJyX2NoYXB0ZXIgPSBkYXRhW1wiY2hhcHRlclwiXVxuXHRcblx0XHRcdFx0XHRpZiAoIShjdXJyX2Jvb2tfaWQgaW4gYmlibGUuYm9va3MpKSB7XG5cdFx0XHRcdFx0XHRiaWJsZS5ib29rc1tjdXJyX2Jvb2tfaWRdID0gW11cdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIShjdXJyX2NoYXB0ZXIgaW4gYmlibGUuYm9va3NbY3Vycl9ib29rX2lkXSkpIHtcblx0XHRcdFx0XHRcdGJpYmxlLmJvb2tzW2N1cnJfYm9va19pZF1bY3Vycl9jaGFwdGVyXSA9IHt9XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRiaWJsZS5ib29rc1tjdXJyX2Jvb2tfaWRdW2N1cnJfY2hhcHRlcl1bdmVyc2VdID0gZGF0YVtcInRleHRcIl1cblx0XHRcdFx0XHRpICs9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0b2sobnVsbCk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGVycihlKVxuXHRcdFx0fVxuXHRcdH0pLmNhdGNoKGUgPT4ge1xuXHRcdFx0dGhyb3cgZVxuXHRcdH0pXG5cblx0XHRyZXR1cm4gYmlibGU7XG5cdH1cblxuXHRhc3luYyBfZ2V0X2Jvb2tfZGF0YSh0cmFuc2xhdGlvbjogc3RyaW5nLCBib29rX2lkOkJvb2tJZCk6IFByb21pc2U8Qm9va0RhdGE+IHtcblx0XHRsZXQgYm9va3MgPSBhd2FpdCB0aGlzLmdldF9ib29rc19kYXRhKHRyYW5zbGF0aW9uKTtcblx0XHRmb3IgKGxldCBib29rIG9mIGJvb2tzKSB7XG5cdFx0XHRpZiAoYm9vay5pZCA9PSBib29rX2lkKSB7XG5cdFx0XHRcdHJldHVybiBib29rO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoKTtcblx0fVxuXG5cdGFzeW5jIF9nZXRfYm9va3NfZGF0YSh0cmFuc2xhdGlvbjogc3RyaW5nKTogUHJvbWlzZTxCb29rRGF0YVtdPiB7XG5cdFx0bGV0IGJvb2tzID0gYXdhaXQgdGhpcy5nZXRfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uKTtcblx0XHRib29rcy5zb3J0KGZ1bmN0aW9uKHgsIHkpIHtcblx0XHRcdGlmICh4LmlkIDwgeS5pZCkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoeC5pZCA+IHkuaWQpIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9KTtcblx0XHRyZXR1cm4gYm9va3M7XG5cdH1cblxuXHRhc3luYyBfZ2V0X2RlZmF1bHRfdHJhbnNsYXRpb24oKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRyZXR1cm4gXCJZTFRcIjtcblx0fVxuXG5cdGFzeW5jIF9nZXRfdHJhbnNsYXRpb25zKCk6IFByb21pc2U8VHJhbnNsYXRpb25zPiB7XG5cdFx0aWYgKE9iamVjdC5rZXlzKHRoaXMudHJhbnNsYXRpb25zKS5sZW5ndGggPT09IDApIHtcblx0XHRcdGxldCBsaXN0ID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XHRcImh0dHBzOi8vYm9sbHMubGlmZS9zdGF0aWMvYm9sbHMvYXBwL3ZpZXdzL2xhbmd1YWdlcy5qc29uXCJcblx0XHRcdCkpO1xuXHRcdFx0Zm9yIChsZXQgbGFuZ3VhZ2Ugb2YgbGlzdCkge1xuXHRcdFx0XHRmb3IgKGxldCBpdGVtIG9mIGxhbmd1YWdlW1widHJhbnNsYXRpb25zXCJdKSB7XG5cdFx0XHRcdFx0aWYgKGl0ZW1bXCJzaG9ydF9uYW1lXCJdIGluIHRoaXMudHJhbnNsYXRpb25zKSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJUcmFuc2xhdGlvbiBhbHJlYWR5IGFkZGVkIHRvIG1hcFwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGhpcy50cmFuc2xhdGlvbnNbaXRlbVtcInNob3J0X25hbWVcIl1dID0ge1xuXHRcdFx0XHRcdFx0YWJicmV2aWF0ZWRfbmFtZTogaXRlbVtcInNob3J0X25hbWVcIl0sXG5cdFx0XHRcdFx0XHRkaXNwbGF5X25hbWU6IGl0ZW1bXCJmdWxsX25hbWVcIl0sXG5cdFx0XHRcdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2VbXCJsYW5ndWFnZVwiXSxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLnRyYW5zbGF0aW9ucztcblx0fVxuXG5cdGFzeW5jIF9nZXRfdmVyc2VfY291bnQodHJhbnNsYXRpb246c3RyaW5nKTogUHJvbWlzZTxWZXJzZUNvdW50cz4ge1xuXHRcdGxldCBqc29uID0gSlNPTi5wYXJzZShhd2FpdCBodHRwR2V0KFxuXHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvZ2V0LXZlcnNlLWNvdW50cy97MH0vXCIuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdCkpO1xuXHRcdGxldCBjb3VudHMgPSBuZXcgVmVyc2VDb3VudHMoKTtcblx0XHRjb3VudHMuYm9va3MgPSBqc29uO1xuXHRcdHJldHVybiBjb3VudHNcblx0fVxuXG5cdGFzeW5jIGJvb2tfdG9faWQodHJhbnNsYXRpb246IHN0cmluZywgYm9vazogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcblx0XHRsZXQgYm9va18gPSBib29rLnRvTG93ZXJDYXNlKCk7XG5cdFx0bGV0IG1hcCA9IGF3YWl0IHRoaXMuZ2V0X3RyYW5zbGF0aW9uX21hcCh0cmFuc2xhdGlvbik7XG5cdFx0Zm9yIChsZXQgaSBpbiBtYXApIHtcblx0XHRcdGxldCBib29rX2RhdGEgPSBtYXBbaV07XG5cdFx0XHRpZiAoYm9va18gPT0gYm9va19kYXRhW1wibmFtZVwiXS50b0xvd2VyQ2FzZSgpKSB7XG5cdFx0XHRcdHJldHVybiBOdW1iZXIoaSkgKyAxO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoJ05vIGJvb2sgZXhpc3RzIGJ5IG5hbWUgezB9LicuZm9ybWF0KGJvb2spKTtcblx0fVxuXG5cdGNoYXB0ZXJfa2V5KHRyYW5zbGF0aW9uOiBzdHJpbmcsIGJvb2tfaWQ6IG51bWJlciwgY2hhcHRlcjogTnVtYmVyKSB7XG5cdFx0cmV0dXJuIFwiezB9LnsxfS57Mn1cIi5mb3JtYXQodHJhbnNsYXRpb24sIFN0cmluZyhib29rX2lkKSwgU3RyaW5nKGNoYXB0ZXIpKTtcblx0fVxuXG5cdGFzeW5jIGdlbmVyYXRlX3RyYW5zbGF0aW9uX21hcCh0cmFuc2xhdGlvbjogc3RyaW5nKSB7XG5cdFx0bGV0IG1hcDogQXJyYXk8UmVjb3JkPHN0cmluZywgYW55Pj4gPSBhd2FpdCByZXF1ZXN0VXJsKFxuXHRcdFx0XCJodHRwczovL2JvbGxzLmxpZmUvZ2V0LWJvb2tzL3swfS9cIi5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KS5qc29uO1xuXHRcdGxldCBib29rX2RhdGE6IEFycmF5PEJvb2tEYXRhPiA9IFtdO1xuXHRcdGZvciAobGV0IGl0ZW0gb2YgbWFwKSB7XG5cdFx0XHRsZXQgY2hhcHRlcl9saXN0ID0gWy4uLkFycmF5KGl0ZW1bXCJjaGFwdGVyc1wiXSkua2V5cygpXS5tYXAoeCA9PiB4KzEpXG5cdFx0XHRib29rX2RhdGEucHVzaChuZXcgQm9va0RhdGEoXG5cdFx0XHRcdGl0ZW1bXCJib29raWRcIl0sXG5cdFx0XHRcdGl0ZW1bXCJuYW1lXCJdLFxuXHRcdFx0XHRjaGFwdGVyX2xpc3QsXG5cdFx0XHQpKTtcblx0XHR9XG5cdFx0dGhpcy50cmFuc2xhdGlvbl9tYXBzW3RyYW5zbGF0aW9uXSA9IGJvb2tfZGF0YTtcblx0fVxuXG5cdGFzeW5jIGlkX3RvX2Jvb2sodHJhbnNsYXRpb246IHN0cmluZywgYm9va19pZDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0XHRsZXQgbWFwID0gYXdhaXQgdGhpcy5nZXRfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uKTtcblx0XHRyZXR1cm4gbWFwW2Jvb2tfaWQgLSAxXVtcIm5hbWVcIl07XG5cdH1cblxuXHRhc3luYyBnZXRfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uOiBzdHJpbmcpOiBQcm9taXNlPEFycmF5PEJvb2tEYXRhPj4ge1xuXHRcdGlmICghKHRyYW5zbGF0aW9uIGluIHRoaXMudHJhbnNsYXRpb25fbWFwcykpIHtcblx0XHRcdGF3YWl0IHRoaXMuZ2VuZXJhdGVfdHJhbnNsYXRpb25fbWFwKHRyYW5zbGF0aW9uKTtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMudHJhbnNsYXRpb25fbWFwc1t0cmFuc2xhdGlvbl07XG5cdH1cbn1cblxuY2xhc3MgQnVpbGRlck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwbHVnaW46IE15QmlibGVcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnJlbmRlcigpO1xuXHR9XG5cblx0cmVuZGVyKCkge1xuXHRcdGxldCBjb250YWluZXJFbCA9IHRoaXMuY29udGVudEVsO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpLm5hbWVFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJCb29rIGJ1aWxkZXJcIiB9KVxuXG5cdFx0Ly8gVG9wIHNldHRpbmdzXG5cblx0XHR0aGlzLnJlbmRlckJpYmxlRm9sZGVyKG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdUcmFuc2xhdGlvbicpXG5cdFx0XHQuc2V0RGVzYygnQnVpbGRzIHlvdXIgQmlibGUgYWNjb3JkaW5nIHRvIHRoZSBsYXlvdXQgb2YgdGhpcyB0cmFubHNhdGlvbi4gSWYgXCJCdWlsZCB3aXRoIGR5bmFtaWMgdmVyc2VzXCIgaXMgYWN0aXZlLCB0aGVuIHRoZSB0ZXh0IGZyb20gdGhpcyB2ZXJzaW9uIHdpbGwgYmUgYnVpbHQgaW50byB5b3VyIEJpYmxlLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oYXN5bmMgZHJvcCA9PiB7XG5cdFx0XHRcdGRyb3AuYWRkT3B0aW9uKFNFTEVDVEVEX1RSQU5TTEFUSU9OX09QVElPTl9LRVksIFNFTEVDVEVEX1RSQU5TTEFUSU9OX09QVElPTi5mb3JtYXQodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVhZGluZ190cmFuc2xhdGlvbikpXG5cblx0XHRcdFx0bGV0IHRyYW5zbGF0aW9ucyA9IGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5nZXRfdHJhbnNsYXRpb25zKCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRsZXQgdHJhbnNsYXRpb25zX2xpc3QgPSBbXTtcblx0XHRcdFx0Zm9yIChjb25zdCBrZXkgaW4gdHJhbnNsYXRpb25zKSB7XG5cdFx0XHRcdFx0dHJhbnNsYXRpb25zX2xpc3QucHVzaChrZXkpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHRyYW5zbGF0aW9uc19saXN0ID0gdHJhbnNsYXRpb25zX2xpc3Quc29ydCgoYSwgYikgPT4ge1xuXHRcdFx0XHRcdGlmICh0cmFuc2xhdGlvbnNbYV0ubGFuZ3VhZ2UgPCB0cmFuc2xhdGlvbnNbYl0ubGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHRyYW5zbGF0aW9uc1thXS5sYW5ndWFnZSA+IHRyYW5zbGF0aW9uc1tiXS5sYW5ndWFnZSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKGEgPCBiKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChhID4gYikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdH0pXG5cblx0XHRcdFx0Zm9yIChjb25zdCBpIGluIHRyYW5zbGF0aW9uc19saXN0KSB7XG5cdFx0XHRcdFx0bGV0IGtleSA9IHRyYW5zbGF0aW9uc19saXN0W2ldO1xuXHRcdFx0XHRcdGRyb3AuYWRkT3B0aW9uKFxuXHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0dHJhbnNsYXRpb25fdG9fZGlzcGxheV9uYW1lKHRyYW5zbGF0aW9uc1trZXldKSxcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRyb3Aub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNldHRpbmdzLnNldF90cmFuc2xhdGlvbih2YWx1ZSwgdGhpcy5wbHVnaW4pO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0XHRkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRyYW5zbGF0aW9uKTtcblx0XHRcdH0pXG5cdFx0O1xuXG5cdFx0dGhpcy5yZW5kZXJCdWlsZEJ1dHRvbihuZXcgU2V0dGluZyhjb250YWluZXJFbCkpO1xuXG5cdFx0Ly8gQ2hhcHRlcnNcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKS5uYW1lRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ2hhcHRlcnNcIiB9KVxuXHRcdFxuXHRcdHRoaXMucmVuZGVyQ2hhcHRlck5hbWUobmV3IFNldHRpbmcoY29udGFpbmVyRWwpKTtcblxuXHRcdHRoaXMucmVuZGVyQ2hhcHRlckZvcm1hdChuZXcgU2V0dGluZyhjb250YWluZXJFbCkpO1xuXHRcdFx0XHRcdFxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1BhZCBudW1iZXJzJylcblx0XHRcdC5zZXREZXNjKCdXaGVuIGFjdGl2ZSwgcGFkcyBjaGFwdGVyIG51bWJlcnMgd2l0aCBleHRyYSB6ZXJvcy4gRm9yIGV4YW1wbGUsIFwiUHNhbG1zIDVcIiBiZWNvbWVzIFwiUHNhbG1zIDAwNVwiLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJUb2dnbGUgYWxpZ25tZW50IHBhZGRpbmcgb2YgY2hhcHRlciBudW1iZXJzXCIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wYWRkZWRfY2hhcHRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9jaGFwdGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKVxuXG5cdFx0Ly8gVmVyc2VzXG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbCkubmFtZUVsLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlZlcnNlc1wiIH0pXG5cblx0XHR0aGlzLnJlbmRlclZlcnNlRm9ybWF0KG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKSlcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ0J1aWxkIHdpdGggZHluYW1pYyB2ZXJzZXMnKVxuXHRcdFx0LnNldERlc2MoJ1doZW4gYWN0aXZlLCB5b3VyIEJpYmxlIHdpbGwgYmUgYnVpbHQgd2l0aCB2ZXJzZSByZWZlcmVuY2VzIHRoYXQgY2FuIGJlIHF1aWNrbHkgY2hhbmdlZCB3aGVuIHlvdSBzd2l0Y2ggdHJhbnNsYXRpb25zLiBXaGVuIGluYWN0aXZlLCB0aGUgdGV4dCBvZiB0aGUgdHJhbnNsYXRpb24gaXMgYnVpbHQgZGlyZWN0bHkgaW50byB5b3VyIEJpYmxlLicpXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJUb2dnbGUgZ2VuZXJhdGluZyB3aXRoIGR5bmFtaWMgdmVyc2VzXCIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5idWlsZF93aXRoX2R5bmFtaWNfdmVyc2VzKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYnVpbGRfd2l0aF9keW5hbWljX3ZlcnNlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSlcblxuXHRcdC8vIEJvb2tzXG5cdFx0bGV0IGJvb2tzX2hlYWRlciA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdGJvb2tzX2hlYWRlci5uYW1lRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQm9va3NcIiB9KVxuXHRcdGJvb2tzX2hlYWRlci5hZGRUb2dnbGUodG9nZ2xlID0+IHt0b2dnbGVcblx0XHRcdC5zZXRUb29sdGlwKFwiVG9nZ2xlIGlmIGJvb2tzIHNob3VsZCBnZW5lcmF0ZSBmb2xkZXJzXCIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX2ZvbGRlcnNfZW5hYmxlZClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX2ZvbGRlcnNfZW5hYmxlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdH0pXG5cdFx0dGhpcy5yZW5kZXJCb29rRm9ybWF0KG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKSk7XG5cdFx0dGhpcy5yZW5kZXJOYW1lRGVsaW1ldGVyKG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKSk7XG5cdFx0dGhpcy5yZW5kZXJCb29rQ2FwaXRhbGl6YXRpb24obmV3IFNldHRpbmcoY29udGFpbmVyRWwpKTtcblx0XHR0aGlzLnJlbmRlckJvb2tBYmJyZXZpYXRpb24obmV3IFNldHRpbmcoY29udGFpbmVyRWwpKTtcblx0XHR0aGlzLnJlbmRlclBhZGRlZE9yZGVyTnVtcyhuZXcgU2V0dGluZyhjb250YWluZXJFbCkpO1xuXG5cdFx0Ly8gQm9vayBpbmRleFxuXHRcdGxldCBpbmRleF9oZWFkZXIgID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0bGV0IGluZGV4X25hbWUgID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0bGV0IGluZGV4X2xpbmtzICA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdGxldCBpbmRleF9ib2R5ICA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdGluZGV4X2hlYWRlclxuXHRcdFx0LmFkZFRvZ2dsZSh0b2dnbGUgPT4ge3RvZ2dsZVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlRvZ2dsZSBib29rIGluZGV4IGdlbmVyYXRpb25cIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2VuYWJsZWQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyB2YWx1ZSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfZW5hYmxlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5uYW1lRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQm9vayBpbmRleFwiIH0pXG5cdFx0O1xuXG5cdFx0dGhpcy5yZW5kZXJJbmRleE5hbWUoaW5kZXhfbmFtZSlcblx0XHR0aGlzLnJlbmRlckluZGV4Qm9va0xpbmsoaW5kZXhfbGlua3MpXG5cdFx0dGhpcy5yZW5kZXJJbmRleEJvZHkoaW5kZXhfYm9keSlcblxuXHRcdC8vIENoYXB0ZXIgaW5kZXhcblx0XHRsZXQgY2hhcHRlcl9pbmRleF9oZWFkZXIgID0gbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0bGV0IGNoYXB0ZXJfaW5kZXhfbmFtZSAgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRsZXQgY2hhcHRlcl9pbmRleF9saW5rcyAgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRsZXQgY2hhcHRlcl9pbmRleF9ib2R5ICA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdGNoYXB0ZXJfaW5kZXhfaGVhZGVyXG5cdFx0XHQuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB7dG9nZ2xlXG5cdFx0XHRcdC5zZXRUb29sdGlwKFwiVG9nZ2xlIGNoYXB0ZXIgaW5kZXggZ2VuZXJhdGlvblwiKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9pbmRleF9lbmFibGVkKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfaW5kZXhfZW5hYmxlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHRcdC5uYW1lRWwuY3JlYXRlRWwoXCJoM1wiLCB7IHRleHQ6IFwiQ2hhcHRlciBpbmRleHNcIiB9KVxuXHRcdDtcblx0XHR0aGlzLnJlbmRlckNoYXB0ZXJJbmRleE5hbWUoY2hhcHRlcl9pbmRleF9uYW1lKVxuXHRcdHRoaXMucmVuZGVyQ2hhcHRlckluZGV4TGluayhjaGFwdGVyX2luZGV4X2xpbmtzKVxuXHRcdHRoaXMucmVuZGVyQ2hhcHRlckluZGV4Qm9keShjaGFwdGVyX2luZGV4X2JvZHkpXG5cblx0XHQvLyBBZnRlclxuXG5cdFx0dGhpcy5yZW5kZXJCdWlsZEJ1dHRvbihuZXcgU2V0dGluZyhjb250YWluZXJFbCkpO1xuXHR9XG5cblx0Ly8gVG9wIHJlbmRlcmVyc1xuXG5cdHJlbmRlckJpYmxlRm9sZGVyKHNldHRpbmc6IFNldHRpbmcpIHtcblx0XHRzZXR0aW5nLmNsZWFyKClcblx0XHRzZXR0aW5nXG5cdFx0XHQuc2V0TmFtZSgnRm9sZGVyJylcblx0XHRcdC5zZXREZXNjKCdUaGUgcGF0aCB0byB0aGUgZm9sZGVyIHdoZXJlIHlvdXIgQmlibGUgd2lsbCBiZSBwbGFjZWQuIFRoZSBmb2xkZXIgc2hvdWxkIGJlIGVtcHR5IGZvciB5b3VyIEJpYmxlLiBJZiB0aGUgcGF0aCBkb2VzIG5vdCBleGlzdCBpdCB3aWxsIGJlIGNyZWF0ZWQuJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5iaWJsZV9mb2xkZXJcblx0XHRcdFx0XHRcdD0gREVGQVVMVF9TRVRUSU5HUy5iaWJsZV9mb2xkZXI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJCaWJsZUZvbGRlcihzZXR0aW5nKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoXCJFeGFtcGxlOiBcIiArIERFRkFVTFRfU0VUVElOR1MuYmlibGVfZm9sZGVyKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlibGVfZm9sZGVyKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlibGVfZm9sZGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0O1xuXHR9XG5cblx0cmVuZGVyQnVpbGRCdXR0b24oc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmdcblx0XHRcdC5hZGRCdXR0b24oYnRuID0+IGJ0blxuXHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkJ1aWxkXCIpXG5cdFx0XHRcdC5zZXRUb29sdGlwKFwiQnVpbGQgeW91ciBiaWJsZVwiKVxuXHRcdFx0XHQuc2V0Q3RhKClcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgXyA9PiB7XG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpXG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYnVpbGRfYmlibGUoKVxuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0fVxuXG5cdC8vIEJvb2sgcmVuZGVyZXJzXG5cblx0cmVuZGVyQm9va0Zvcm1hdChzZXR0aW5nOiBTZXR0aW5nKSB7XG5cdFx0c2V0dGluZy5jbGVhcigpXG5cdFx0c2V0dGluZ1xuXHRcdFx0LnNldE5hbWUoJ05hbWUgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCdUaGUgZm9ybWF0IGZvciB0aGUgbmFtZXMgb2YgdGhlIGZvbGRlcnMgb2YgZWFjaCBib29rIG9mIHRoZSBiaWJsZS4gRm9yIGV4YW1wbGUsIFwie29yZGVyfSB7bmFtZX1cIiB3b3VsZCBiZWNvbWUgXCIyIEV4b2R1c1wiLiBMZWF2ZSBibGFuayB0byBub3QgaGF2ZSBmb2xkZXJzIGZvciBlYWNoIGJvb2suJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZm9ybWF0XG5cdFx0XHRcdFx0XHQ9IERFRkFVTFRfU0VUVElOR1MuYm9va19uYW1lX2Zvcm1hdDtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckJvb2tGb3JtYXQoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKFwiRXhhbXBsZTogXCIgKyBERUZBVUxUX1NFVFRJTkdTLmJvb2tfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0fVxuXG5cdHJlbmRlckJvb2tBYmJyZXZpYXRpb24oc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmcuY2xlYXIoKVxuXHRcdHNldHRpbmdcblx0XHRcdC5zZXROYW1lKCdBYmJyZXZpYXRlIG5hbWVzJylcblx0XHRcdC5zZXREZXNjKCdXaGVuIGFjdGl2ZSwgVGhlIG5hbWVzIG9mIGJvb2tzIHdpbGwgYmUgYWJicmV2aWF0ZWQgdG8gdGhyZWUgbGV0dGVycy4gRm9yIGV4YW1wbGUsIFwiR2VuZXNpc1wiIGJlY29tZXMgXCJHZW5cIiBhbmQgXCIxIEtpbmdzXCIgYmVjb21lcyBcIjFLaVwiLiAoTWF5IGNhdXNlIGlzc3VlcyBpbiBzb21lIHRyYW5zbGF0aW9ucy4pJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlRvZ2dsZSBib29rIG5hbWUgYWJicmV2aWF0aW9uXCIpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfYWJicmV2aWF0ZWQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHQ7XG5cdH1cblxuXHRyZW5kZXJCb29rQ2FwaXRhbGl6YXRpb24oc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmcuY2xlYXIoKVxuXHRcdHNldHRpbmdcblx0XHRcdC5zZXROYW1lKCdOYW1lIGNhcGl0YWxpemF0aW9uJylcblx0XHRcdC5zZXREZXNjKCdEaWN0YXRlcyB0aGUgY2FwaXRhbGl6YXRpb24gb2YgYm9vayBuYW1lcy4nKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3AgPT4gZHJvcFxuXHRcdFx0XHQuYWRkT3B0aW9uKFwibG93ZXJfY2FzZVwiLCBcIkxvd2VyIGNhc2VcIilcblx0XHRcdFx0LmFkZE9wdGlvbihcIm5hbWVfY2FzZVwiLCBcIk5hbWUgY2FzZVwiKVxuXHRcdFx0XHQuYWRkT3B0aW9uKFwidXBwZXJfY2FzZVwiLCBcIlVwcGVyIGNhc2VcIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9jYXBpdGFsaXphdGlvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0fVxuXG5cdHJlbmRlck5hbWVEZWxpbWV0ZXIoc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmcuY2xlYXIoKVxuXHRcdHNldHRpbmdcblx0XHRcdC5zZXROYW1lKCdOYW1lIGRlbGltaXRlcicpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGNoYXJhY3RlcnMgc2VwYXJhdGluZyB3b3JkcyBpbiBib29rIG5hbWVzLCBzdWNoIGFzIHRoZSBzcGFjZXMgaW4gXCIxIEpvaG5cIiBvciBcIlNvbmcgb2YgU29sb21vblwiLicpXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oYnRuID0+IGJ0blxuXHRcdFx0XHQuc2V0SWNvbihcInJvdGF0ZS1jY3dcIilcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB2YWx1ZVwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuYm9va19uYW1lX2RlbGltaXRlclxuXHRcdFx0XHRcdFx0PSBERUZBVUxUX1NFVFRJTkdTLmJvb2tfbmFtZV9kZWxpbWl0ZXI7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJOYW1lRGVsaW1ldGVyKHNldHRpbmcpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcignRXhhbXBsZTogXCInICsgREVGQVVMVF9TRVRUSU5HUy5ib29rX25hbWVfZGVsaW1pdGVyICsgJ1wiJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmJvb2tfbmFtZV9kZWxpbWl0ZXIpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ib29rX25hbWVfZGVsaW1pdGVyID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0O1xuXHR9XG5cblx0cmVuZGVyUGFkZGVkT3JkZXJOdW1zKHNldHRpbmc6IFNldHRpbmcpIHtcblx0XHRzZXR0aW5nLmNsZWFyKClcblx0XHRzZXR0aW5nXG5cdFx0XHQuc2V0TmFtZSgnUGFkIG9yZGVyIG51bWJlcnMnKVxuXHRcdFx0LnNldERlc2MoJ1doZW4gQWN0aXZlLCBwYWRzIG9yZGVyIG51bWJlcnMgd2l0aCBleHRyYSB6ZXJvcy4gRm9yIGV4YW1wbGUsIFwiMSBHZW5lc2lzXCIgd291bGQgYmVjb21lIFwiMDEgR2Vuc2lzXCIgd2hlbiBhY3RpdmUuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlRvZ2dsZSBhbGlnbm1lbnQgcGFkZGluZyBvZiBib29rIG9yZGVyIG51bWJlcnNcIilcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlcilcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnBhZGRlZF9vcmRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0fVxuXG5cdC8vIENoYXB0ZXIgcmVuZGVyZXJzXG5cblx0cmVuZGVyQ2hhcHRlckZvcm1hdChzZXR0aW5nOiBTZXR0aW5nKSB7XG5cdFx0c2V0dGluZy5jbGVhcigpXG5cdFx0c2V0dGluZ1xuXHRcdFx0LnNldE5hbWUoJ0JvZHkgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCdUaGUgZm9ybWF0IGZvciB0aGUgY29udGVudHMgb2YgY2hhcHRlcnMuJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2JvZHlfZm9ybWF0XG5cdFx0XHRcdFx0XHQ9IERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9ib2R5X2Zvcm1hdDtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckNoYXB0ZXJGb3JtYXQoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFwiICsgREVGQVVMVF9TRVRUSU5HUy5jaGFwdGVyX2JvZHlfZm9ybWF0KVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9ib2R5X2Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfYm9keV9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdClcblx0XHRcdClcblx0XHQ7XG5cdH1cblxuXHRyZW5kZXJDaGFwdGVyTmFtZShzZXR0aW5nOiBTZXR0aW5nKSB7XG5cdFx0c2V0dGluZy5jbGVhcigpXG5cdFx0c2V0dGluZ1xuXHRcdFx0LnNldE5hbWUoJ05hbWUgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCdUaGUgZm9ybWF0IGZvciB0aGUgbmFtZXMgb2YgY2hhcHRlcnMuIEZvciBleGFtcGxlLCBcIntib29rfSB7Y2hhcHRlcn1cIiB3b3VsZCBiZWNvbWUgXCJQc2FsbXMgMjNcIi4nKVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKGJ0biA9PiBidG5cblx0XHRcdFx0LnNldEljb24oXCJyb3RhdGUtY2N3XCIpXG5cdFx0XHRcdC5zZXRUb29sdGlwKFwiUmVzZXQgdmFsdWVcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfbmFtZV9mb3JtYXRcblx0XHRcdFx0XHRcdD0gREVGQVVMVF9TRVRUSU5HUy5jaGFwdGVyX25hbWVfZm9ybWF0O1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyQ2hhcHRlck5hbWUoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX25hbWVfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9uYW1lX2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0fVxuXG5cdC8vIFZlcnNlIHJlbmRlcnNcblxuXHRyZW5kZXJWZXJzZUZvcm1hdChzZXR0aW5nOiBTZXR0aW5nKSB7XG5cdFx0c2V0dGluZy5jbGVhcigpXG5cdFx0c2V0dGluZ1xuXHRcdFx0LnNldE5hbWUoJ0Zvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnRm9ybWF0dGluZyBmb3IgaW5kaXZpZHVhbCB2ZXJzZXMuJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy52ZXJzZV9ib2R5X2Zvcm1hdFxuXHRcdFx0XHRcdFx0PSBERUZBVUxUX1NFVFRJTkdTLnZlcnNlX2JvZHlfZm9ybWF0O1xuXHRcdFx0XHRcdHRoaXMucmVuZGVyVmVyc2VGb3JtYXQoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihcIkV4YW1wbGU6IFwiICsgREVGQVVMVF9TRVRUSU5HUy52ZXJzZV9ib2R5X2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnZlcnNlX2JvZHlfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MudmVyc2VfYm9keV9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHQ7XG5cdH1cblxuXHQvLyBCb29rIGluZGV4XG5cblx0cmVuZGVySW5kZXhOYW1lKHNldHRpbmc6IFNldHRpbmcpIHtcblx0XHRzZXR0aW5nLmNsZWFyKClcblx0XHRzZXR0aW5nXG5cdFx0XHQuc2V0TmFtZSgnTmFtZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoJ1RoZSBmb3JtYXQgZm9yIHRoZSBuYW1lIG9mIHRoZSBib29rIGluZGV4LicpXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oYnRuID0+IGJ0blxuXHRcdFx0XHQuc2V0SWNvbihcInJvdGF0ZS1jY3dcIilcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB2YWx1ZVwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfbmFtZV9mb3JtYXRcblx0XHRcdFx0XHRcdD0gREVGQVVMVF9TRVRUSU5HUy5pbmRleF9uYW1lX2Zvcm1hdDtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckluZGV4TmFtZShzZXR0aW5nKTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5pbmRleF9uYW1lX2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X25hbWVfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfbmFtZV9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHQ7XG5cdH1cblxuXHRyZW5kZXJJbmRleEJvb2tMaW5rKHNldHRpbmc6IFNldHRpbmcpIHtcblx0XHRzZXR0aW5nLmNsZWFyKClcblx0XHRzZXR0aW5nXG5cdFx0XHQuc2V0TmFtZSgnQm9vayBlbGVtZW50IGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGZvcm1hdCBmb3IgZWFjaCBib29rIGVsZW1lbnQgaW4gYSBsaXN0LicpXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oYnRuID0+IGJ0blxuXHRcdFx0XHQuc2V0SWNvbihcInJvdGF0ZS1jY3dcIilcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB2YWx1ZVwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfbGlua19mb3JtYXRcblx0XHRcdFx0XHRcdD0gREVGQVVMVF9TRVRUSU5HUy5pbmRleF9saW5rX2Zvcm1hdDtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckluZGV4Qm9va0xpbmsoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuaW5kZXhfbGlua19mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9saW5rX2Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2xpbmtfZm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0O1xuXHRcdHNldHRpbmcuc2V0RGlzYWJsZWQoIXRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2VuYWJsZWQpXG5cdH1cblxuXHRyZW5kZXJJbmRleEJvZHkoc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmcuY2xlYXIoKVxuXHRcdHNldHRpbmdcblx0XHRcdC5zZXROYW1lKCdCb2R5IGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGZvcm1hdCBmb3IgdGhlIGNvbnRlbnQgb2YgdGhlIGJvb2sgaW5kZXguJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9mb3JtYXRcblx0XHRcdFx0XHRcdD0gREVGQVVMVF9TRVRUSU5HUy5pbmRleF9mb3JtYXQ7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJJbmRleEJvZHkoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmluZGV4X2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2Zvcm1hdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0XHRzZXR0aW5nLnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9lbmFibGVkKVxuXHR9XG5cblx0Ly8gQ2hhcHRlciBpbmRleFxuXG5cdHJlbmRlckNoYXB0ZXJJbmRleE5hbWUoc2V0dGluZzogU2V0dGluZykge1xuXHRcdHNldHRpbmcuY2xlYXIoKVxuXHRcdHNldHRpbmdcblx0XHRcdC5zZXROYW1lKCdOYW1lIGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGZvcm1hdCBmb3IgdGhlIG5hbWUgb2YgdGhlIGNoYXB0ZXIgaW5kZXguJylcblx0XHRcdC5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXG5cdFx0XHRcdC5zZXRJY29uKFwicm90YXRlLWNjd1wiKVxuXHRcdFx0XHQuc2V0VG9vbHRpcChcIlJlc2V0IHZhbHVlXCIpXG5cdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X25hbWVfZm9ybWF0XG5cdFx0XHRcdFx0XHQ9IERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9pbmRleF9uYW1lX2Zvcm1hdDtcblx0XHRcdFx0XHR0aGlzLnJlbmRlckNoYXB0ZXJJbmRleE5hbWUoc2V0dGluZyk7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9pbmRleF9uYW1lX2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfaW5kZXhfbmFtZV9mb3JtYXQpXG5cdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X25hbWVfZm9ybWF0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0O1xuXHRcdHNldHRpbmcuc2V0RGlzYWJsZWQoIXRoaXMucGx1Z2luLnNldHRpbmdzLmluZGV4X2VuYWJsZWQpXG5cdH1cblxuXHRyZW5kZXJDaGFwdGVySW5kZXhMaW5rKHNldHRpbmc6IFNldHRpbmcpIHtcblx0XHRzZXR0aW5nLmNsZWFyKClcblx0XHRzZXR0aW5nXG5cdFx0XHQuc2V0TmFtZSgnQ2hhcHRlciBlbGVtZW50IGZvcm1hdCcpXG5cdFx0XHQuc2V0RGVzYygnVGhlIGZvcm1hdCBmb3IgZWFjaCBjaGFwdGVyIGVsZW1lbnQgaW4gYSBsaXN0LicpXG5cdFx0XHQuYWRkRXh0cmFCdXR0b24oYnRuID0+IGJ0blxuXHRcdFx0XHQuc2V0SWNvbihcInJvdGF0ZS1jY3dcIilcblx0XHRcdFx0LnNldFRvb2x0aXAoXCJSZXNldCB2YWx1ZVwiKVxuXHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9pbmRleF9saW5rX2Zvcm1hdFxuXHRcdFx0XHRcdFx0PSBERUZBVUxUX1NFVFRJTkdTLmNoYXB0ZXJfaW5kZXhfbGlua19mb3JtYXQ7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDaGFwdGVySW5kZXhMaW5rKHNldHRpbmcpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHQodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihERUZBVUxUX1NFVFRJTkdTLmNoYXB0ZXJfaW5kZXhfbGlua19mb3JtYXQpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGFwdGVyX2luZGV4X2xpbmtfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9pbmRleF9saW5rX2Zvcm1hdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdDtcblx0XHRzZXR0aW5nLnNldERpc2FibGVkKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmRleF9lbmFibGVkKVxuXHR9XG5cblx0cmVuZGVyQ2hhcHRlckluZGV4Qm9keShzZXR0aW5nOiBTZXR0aW5nKSB7XG5cdFx0c2V0dGluZy5jbGVhcigpXG5cdFx0c2V0dGluZ1xuXHRcdFx0LnNldE5hbWUoJ0NoYXB0ZXIgZm9ybWF0Jylcblx0XHRcdC5zZXREZXNjKCdUaGUgZm9ybWF0IGZvciB0aGUgY29udGVudCBvZiB0aGUgY2hhcHRlciBpbmRleC4nKVxuXHRcdFx0LmFkZEV4dHJhQnV0dG9uKGJ0biA9PiBidG5cblx0XHRcdFx0LnNldEljb24oXCJyb3RhdGUtY2N3XCIpXG5cdFx0XHRcdC5zZXRUb29sdGlwKFwiUmVzZXQgdmFsdWVcIilcblx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfaW5kZXhfZm9ybWF0XG5cdFx0XHRcdFx0XHQ9IERFRkFVTFRfU0VUVElOR1MuY2hhcHRlcl9pbmRleF9mb3JtYXQ7XG5cdFx0XHRcdFx0dGhpcy5yZW5kZXJDaGFwdGVySW5kZXhCb2R5KHNldHRpbmcpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoREVGQVVMVF9TRVRUSU5HUy5jaGFwdGVyX2luZGV4X2Zvcm1hdClcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXB0ZXJfaW5kZXhfZm9ybWF0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhcHRlcl9pbmRleF9mb3JtYXQgPSB2YWx1ZTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0fSlcblx0XHRcdClcblx0XHQ7XG5cdFx0c2V0dGluZy5zZXREaXNhYmxlZCghdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5kZXhfZW5hYmxlZClcblx0fVxuXG5cdHJlZnJlc2goKSB7XG5cdFx0dGhpcy5jb250ZW50RWwuZW1wdHkoKVxuXHRcdHRoaXMucmVuZGVyKClcblx0fVxufVxuXG5jbGFzcyBFcnJvck1vZGFsIGV4dGVuZHMgTW9kYWwge1xuXHRwbHVnaW46IE15QmlibGVcblx0dGl0bGU6IHN0cmluZ1xuXHRib2R5OiBzdHJpbmdcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlLCB0aXRsZTpzdHJpbmcsIGJvZHk6c3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0XHR0aGlzLnRpdGxlID0gdGl0bGU7XG5cdFx0dGhpcy5ib2R5ID0gYm9keTtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogdGhpcy50aXRsZSB9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogdGhpcy5ib2R5IH0pO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2xvc2VcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgQ2xlYXJMb2NhbEZpbGVzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdHBsdWdpbjogTXlCaWJsZTtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeUJpYmxlKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdG9uT3BlbigpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblxuXHRcdGxldCBiaWJsZV9wYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYmlibGVfZm9sZGVyO1xuXG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwiaDFcIiwgeyB0ZXh0OiBcIkNsZWFyIGxvY2FsIGZpbGVzP1wiIH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInNwYW5cIiwge1xuXHRcdFx0dGV4dDogXCJZb3UgYXJlIGFib3V0IHRvIGNsZWFyIG91dCBhbGwgZmlsZXMgYWRkZWQgYnkgTXkgQmlibGUgZnJvbSB5b3VyIGZpbGUgc3lzdGVtLiBUaGlzIGluY2x1ZGVzIHRlbXBvcmF5IGNhY2hlZCBjaGFwdGVycyBhbmQgdHJhbnNsYXRpb25zIHlvdSBtYW51YWxseSBkb3dubG9hZGVkLlwiXG5cdFx0XHRcdC5mb3JtYXQoYmlibGVfcGF0aClcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHtcblx0XHRcdHRleHQ6IFwiRG8geW91IHdhbnQgdG8gY2xlYXIgdGhlc2UgZmlsZXM/XCJcblx0XHR9KTtcblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJwXCIsIHt9KTtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDYW5jZWxcIilcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHR0aGlzLmNsb3NlKCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJDbGVhciBmaWxlc1wiKVxuXHRcdFx0XHRcdC5zZXRDdGEoKVxuXHRcdFx0XHRcdC5vbkNsaWNrKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5jbGVhcl9sb2NhbF9maWxlcygpO1xuXHRcdFx0XHRcdFx0bmV3IE5vdGljZShcIkZpbGVzIGNsZWFyZWQhXCIpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcblx0XHRjb250ZW50RWwuZW1wdHkoKTtcblx0fVxufVxuXG5jbGFzcyBDbGVhck9sZEJpYmxlRmlsZXNNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBNeUJpYmxlXG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdHN1cGVyKGFwcCk7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRvbk9wZW4oKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cblx0XHRsZXQgYmlibGVfcGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmJpYmxlX2ZvbGRlcjtcblxuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcImgxXCIsIHsgdGV4dDogXCJCaWJsZSBmb2xkZXIgaXMgbm90IGVtcHR5XCIgfSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBcIlRoZSBCaWJsZSBmb2xkZXIgaW4geW91ciBzZXR0aW5ncyBpcyBub3QgZW1wdHkuIElmIHlvdSBidWlsdCBhIEJpYmxlIGluIHRoaXMgZm9sZGVyIGJlZm9yZSB0aGUgbmV3IGJpYmxlIG1heSBiZSBpbnRlcmxhY2VkIHdpdGggdGhlIG9sZCBvbmUuXCJcblx0XHRcdFx0LmZvcm1hdChiaWJsZV9wYXRoKVxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJEbyB5b3Ugd2FudCB0byBjbGVhciB0aGUgZm9sZGVyIGJlZm9yZSBidWlsZGluZyB5b3VyIEJpYmxlP1wiXG5cdFx0fSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwicFwiLCB7fSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250ZW50RWwpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2FuY2VsXCIpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0fSlcblx0XHRcdClcblx0XHRcdC5hZGRCdXR0b24oKGJ0bikgPT5cblx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0LnNldEJ1dHRvblRleHQoXCJCdWlsZCB3aXRob3V0IGNsZWFyaW5nXCIpXG5cdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uX2J1aWxkX2JpYmxlKGJpYmxlX3BhdGgpO1xuXHRcdFx0XHRcdH0pXG5cdFx0XHQpXG5cdFx0XHQuYWRkQnV0dG9uKChidG4pID0+XG5cdFx0XHRcdGJ0blxuXHRcdFx0XHRcdC5zZXRCdXR0b25UZXh0KFwiQ2xlYXIgYW5kIGJ1aWxkXCIpXG5cdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0bGV0IG5vdGljZSA9IG5ldyBOb3RpY2UoXCJDbGVhcmluZyBiaWJsZSBmb2xkZXIuLi5cIiwgMClcblxuXHRcdFx0XHRcdFx0bGV0IGFic3RyYWN0ID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKFxuXHRcdFx0XHRcdFx0XHRub3JtYWxpemVQYXRoKGJpYmxlX3BhdGgsKVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGlmIChhYnN0cmFjdCAhPSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmRlbGV0ZShhYnN0cmFjdCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR0aGlzLmFwcC52YXVsdC5hZGFwdGVyLm1rZGlyKG5vcm1hbGl6ZVBhdGgoYmlibGVfcGF0aCkpO1xuXG5cdFx0XHRcdFx0XHRub3RpY2UuaGlkZSgpXG5cdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5fYnVpbGRfYmlibGUoYmlibGVfcGF0aCk7XG5cdFx0XHRcdFx0fSlcblx0XHRcdCk7XG5cdH1cblxuXHRvbkNsb3NlKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXHRcdGNvbnRlbnRFbC5lbXB0eSgpO1xuXHR9XG59XG5cbmNsYXNzIERvd25sb2FkQmlibGVNb2RhbCBleHRlbmRzIE1vZGFsIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUpIHtcblx0XHRzdXBlcihhcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xuXG5cdFx0bGV0IHRyYW5zbGF0aW9uID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MudHJhbnNsYXRpb247XG5cblx0XHRjb250ZW50RWwuY3JlYXRlRWwoXCJoMVwiLCB7IHRleHQ6IFwiRG93bmxvYWQgYmlibGU/XCIgfSk7XG5cdFx0Y29udGVudEVsLmNyZWF0ZUVsKFwic3BhblwiLCB7XG5cdFx0XHR0ZXh0OiBcIllvdSBhcmUgYWJvdXQgdG8gZG93bmxvYWQgdGhlIGVudGlyZSB7MH0gdHJhbnNsYXRpb24gb2YgdGhlIEJpYmxlLCBhY2NvcmRpbmcgdG8geW91ciBzZXR0aW5ncy5cIlxuXHRcdFx0XHQuZm9ybWF0KHRyYW5zbGF0aW9uKVxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge1xuXHRcdFx0dGV4dDogXCJEbyB5b3Ugd2FudCB0byBjb250aW51ZT9cIlxuXHRcdH0pO1xuXHRcdGNvbnRlbnRFbC5jcmVhdGVFbChcInBcIiwge30pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGVudEVsKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkNhbmNlbFwiKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdHRoaXMuY2xvc2UoKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KVxuXHRcdFx0LmFkZEJ1dHRvbigoYnRuKSA9PlxuXHRcdFx0XHRidG5cblx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dChcIkRvd25sb2FkXCIpXG5cdFx0XHRcdFx0LnNldEN0YSgpXG5cdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xuXHRcdFx0XHRcdFx0dGhpcy5kb3dubG9hZEJpYmxlKHRyYW5zbGF0aW9uKTtcblx0XHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxuXG5cdG9uQ2xvc2UoKSB7XG5cdFx0Y29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cblxuXHRhc3luYyBkb3dubG9hZEJpYmxlKHRyYW5zbGF0aW9uOiBzdHJpbmcpIHtcblx0XHRuZXcgTm90aWNlKFxuXHRcdFx0J1N0YXJ0ZWQgZG93bmxvYWQgb2YgdGhlIHswfSB0cmFuc2xhdGlvbiEnXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KTtcblxuXHRcdGxldCBiaWJsZSA9IGF3YWl0IHRoaXMucGx1Z2luLmJpYmxlX2FwaS5nZXRfdHJhbnNsYXRpb24odHJhbnNsYXRpb24pO1xuXHRcdGZvciAoY29uc3QgYm9va19pZCBpbiBiaWJsZS5ib29rcykge1xuXHRcdFx0Zm9yIChjb25zdCBjaGFwdGVyX2tleSBvZiBPYmplY3Qua2V5cyhiaWJsZS5ib29rc1tib29rX2lkXSkpIHtcblx0XHRcdFx0Y29uc3QgY2hhcHRlciA9IE51bWJlcihjaGFwdGVyX2tleSlcblx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uYmlibGVfYXBpLmNhY2hlX2NoYXB0ZXIoXG5cdFx0XHRcdFx0dHJhbnNsYXRpb24sXG5cdFx0XHRcdFx0TnVtYmVyKGJvb2tfaWQpLFxuXHRcdFx0XHRcdGNoYXB0ZXIgKyAxLFxuXHRcdFx0XHRcdGJpYmxlLmJvb2tzW2Jvb2tfaWRdW2NoYXB0ZXJdLFxuXHRcdFx0XHRcdHRydWUsXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0bmV3IE5vdGljZShcblx0XHRcdCdDb21wbGV0ZWQgZG93bmxvYWQgb2YgdGhlIHswfSB0cmFuc2xhdGlvbiEnXG5cdFx0XHRcdC5mb3JtYXQodHJhbnNsYXRpb24pXG5cdFx0KTtcblx0fVxufVxuICBcbmV4cG9ydCBjbGFzcyBRdWlja0NoYW5nZVRyYW5zbGF0aW9uZU1vZGFsIGV4dGVuZHMgRnV6enlTdWdnZXN0TW9kYWw8VHJhbnNsYXRpb24+IHtcblx0cGx1Z2luOiBNeUJpYmxlXG5cdHRyYW5zbGF0aW9uczogVHJhbnNsYXRpb25zXG5cdG9uQ2hvc2U6IChjaG9zZW46VHJhbnNsYXRpb24pID0+ICh2b2lkfFByb21pc2U8dm9pZD4pIHwgbnVsbFxuXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogTXlCaWJsZSkge1xuXHRcdHN1cGVyKHBsdWdpbi5hcHApO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0Ly8gUmV0dXJucyBhbGwgYXZhaWxhYmxlIHN1Z2dlc3Rpb25zLlxuXHRnZXRJdGVtcygpOiBUcmFuc2xhdGlvbltdIHtcblx0XHRsZXQgdHJhbnNsYXRpb25zX2xpc3QgPSBPYmplY3Qua2V5cyh0aGlzLnRyYW5zbGF0aW9ucykubWFwKGsgPT4gdGhpcy50cmFuc2xhdGlvbnNba10pXG5cdFx0cmV0dXJuIHRyYW5zbGF0aW9uc19saXN0XG5cdH1cblxuXHRnZXRJdGVtVGV4dChpdGVtOlRyYW5zbGF0aW9uKTpzdHJpbmcge1xuXHRcdHJldHVybiB0cmFuc2xhdGlvbl90b19kaXNwbGF5X25hbWUoaXRlbSlcblx0fVxuXG5cdC8vIFBlcmZvcm0gYWN0aW9uIG9uIHRoZSBzZWxlY3RlZCBzdWdnZXN0aW9uLlxuXHRvbkNob29zZUl0ZW0oaXRlbTogVHJhbnNsYXRpb24sIGV2dDogTW91c2VFdmVudCB8IEtleWJvYXJkRXZlbnQpIHtcblx0XHRpZiAodGhpcy5vbkNob3NlICE9PSBudWxsKSB7XG5cdFx0XHR0aGlzLm9uQ2hvc2UoaXRlbSlcblx0XHR9XG5cdH1cbn1cblxuY2xhc3MgU2V0dGluZ3NUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNeUJpYmxlO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15QmlibGUpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnVHJhbnNsYXRpb24nKVxuXHRcdFx0LnNldERlc2MoJ1RoZSB2ZXJzaW9uIG9mIHRoZSBCaWJsZSB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIGluIGR5bmFtaWMgdmVyc2VzLicpXG5cdFx0XHQuYWRkRHJvcGRvd24oYXN5bmMgZHJvcCA9PiB7XG5cdFx0XHRcdGxldCB0cmFuc2xhdGlvbnMgPSBhd2FpdCB0aGlzLnBsdWdpbi5iaWJsZV9hcGkuZ2V0X3RyYW5zbGF0aW9ucygpO1xuXHRcdFx0XHRcblx0XHRcdFx0bGV0IHRyYW5zbGF0aW9uc19saXN0ID0gW107XG5cdFx0XHRcdGZvciAoY29uc3Qga2V5IGluIHRyYW5zbGF0aW9ucykge1xuXHRcdFx0XHRcdHRyYW5zbGF0aW9uc19saXN0LnB1c2goa2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0XHR0cmFuc2xhdGlvbnNfbGlzdCA9IHRyYW5zbGF0aW9uc19saXN0LnNvcnQoKGEsIGIpID0+IHtcblx0XHRcdFx0XHRpZiAodHJhbnNsYXRpb25zW2FdLmxhbmd1YWdlIDwgdHJhbnNsYXRpb25zW2JdLmxhbmd1YWdlKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICh0cmFuc2xhdGlvbnNbYV0ubGFuZ3VhZ2UgPiB0cmFuc2xhdGlvbnNbYl0ubGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGlmIChhIDwgYikge1xuXHRcdFx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoYSA+IGIpIHtcblx0XHRcdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9KVxuXG5cdFx0XHRcdGZvciAoY29uc3QgaSBpbiB0cmFuc2xhdGlvbnNfbGlzdCkge1xuXHRcdFx0XHRcdGxldCBrZXkgPSB0cmFuc2xhdGlvbnNfbGlzdFtpXTtcblx0XHRcdFx0XHRkcm9wLmFkZE9wdGlvbihcblx0XHRcdFx0XHRcdGtleSxcblx0XHRcdFx0XHRcdFwiezB9IC0gezF9IC0gezJ9XCIuZm9ybWF0KFxuXHRcdFx0XHRcdFx0XHR0cmFuc2xhdGlvbnNba2V5XS5sYW5ndWFnZSxcblx0XHRcdFx0XHRcdFx0a2V5LFxuXHRcdFx0XHRcdFx0XHR0cmFuc2xhdGlvbnNba2V5XS5kaXNwbGF5X25hbWUsXG5cdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkcm9wLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWFkaW5nX3RyYW5zbGF0aW9uID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdGRyb3Auc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVhZGluZ190cmFuc2xhdGlvbik7XG5cdFx0XHR9KVxuXHRcdDtcblxuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldERlc2MoJ0xvb2tpbmcgZm9yIGJ1aWxkIHNldHRpbmdzPyBUaGV5IGhhdmUgYmVlbiBtb3ZlZCB0byB0aGUgYEJvb2sgYnVpbGRlcmAgbWVudS4gWW91IGNhbiBhY2Nlc3MgdGhlIG1lbnUgdmlhIHRoZSBgTXkgQmlibGU6IEJ1aWxkIEJpYmxlYCBjb21tYW5kLicpXG5cdFx0O1xuXHR9XG59XG5cbmNvbnN0IERFRkFVTFRfTkFNRV9NQVA6IFJlY29yZDxzdHJpbmcsIEJvb2tJZD4gPSB7XG5cdFwiR2VuZXNpc1wiOiAxLFxuXHRcIkV4b2R1c1wiOiAyLFxuXHRcIkxldml0aWN1c1wiOiAzLFxuXHRcIk51bWJlcnNcIjogNCxcblx0XCJEZXV0ZXJvbm9teVwiOiA1LFxuXHRcIkpvc2h1YVwiOiA2LFxuXHRcIkp1ZGdlc1wiOiA3LFxuXHRcIlJ1dGhcIjogOCxcblx0XCIxIFNhbXVlbFwiOiA5LFxuXHRcIjIgU2FtdWVsXCI6IDEwLFxuXHRcIjEgS2luZ3NcIjogMTEsXG5cdFwiMiBLaW5nc1wiOiAxMixcblx0XCIxIENocm9uaWNsZXNcIjogMTMsXG5cdFwiMiBDaHJvbmljbGVzXCI6IDE0LFxuXHRcIkV6cmFcIjogMTUsXG5cdFwiTmVoZW1pYWhcIjogMTYsXG5cdFwiRXN0aGVyXCI6IDE3LFxuXHRcIkpvYlwiOiAxOCxcblx0XCJQc2FsbXNcIjogMTksXG5cdFwiUHNhbG1cIjogMTksIC8vIEFsdGVybmF0ZSBzcGVsbGluZ1xuXHRcIlByb3ZlcmJzXCI6IDIwLFxuXHRcIkVjY2xlc2lhc3Rlc1wiOiAyMSxcblx0XCJTb25nIG9mIFNvbG9tb25cIjogMjIsXG5cdFwiSXNhaWFoXCI6IDIzLFxuXHRcIkplcmVtaWFoXCI6IDI0LFxuXHRcIkxhbWVudGF0aW9uc1wiOiAyNSxcblx0XCJFemVraWVsXCI6IDI2LFxuXHRcIkRhbmllbFwiOiAyNyxcblx0XCJIb3NlYVwiOiAyOCxcblx0XCJKb2VsXCI6IDI5LFxuXHRcIkFtb3NcIjogMzAsXG5cdFwiT2JhZGlhaFwiOiAzMSxcblx0XCJKb25haFwiOiAzMixcblx0XCJNaWNhaFwiOiAzMyxcblx0XCJOYWh1bVwiOiAzNCxcblx0XCJIYWJha2t1a1wiOiAzNSxcblx0XCJaZXBoYW5pYWhcIjogMzYsXG5cdFwiSGFnZ2FpXCI6IDM3LFxuXHRcIlplY2hhcmlhaFwiOiAzOCxcblx0XCJNYWxhY2hpXCI6IDM5LFxuXHRcIk1hdHRoZXdcIjogNDAsXG5cdFwiTWFya1wiOiA0MSxcblx0XCJMdWtlXCI6IDQyLFxuXHRcIkpvaG5cIjogNDMsXG5cdFwiQWN0c1wiOiA0NCxcblx0XCJSb21hbnNcIjogNDUsXG5cdFwiMSBDb3JpbnRoaWFuc1wiOiA0Nixcblx0XCIyIENvcmludGhpYW5zXCI6IDQ3LFxuXHRcIkdhbGF0aWFuc1wiOiA0OCxcblx0XCJFcGhlc2lhbnNcIjogNDksXG5cdFwiUGhpbGlwcGlhbnNcIjogNTAsXG5cdFwiQ29sb3NzaWFuc1wiOiA1MSxcblx0XCIxIFRoZXNzYWxvbmlhbnNcIjogNTIsXG5cdFwiMiBUaGVzc2Fsb25pYW5zXCI6IDUzLFxuXHRcIjEgVGltb3RoeVwiOiA1NCxcblx0XCIyIFRpbW90aHlcIjogNTUsXG5cdFwiVGl0dXNcIjogNTYsXG5cdFwiUGhpbGVtb25cIjogNTcsXG5cdFwiSGVicmV3c1wiOiA1OCxcblx0XCJKYW1lc1wiOiA1OSxcblx0XCIxIFBldGVyXCI6IDYwLFxuXHRcIjIgUGV0ZXJcIjogNjEsXG5cdFwiMSBKb2huXCI6IDYyLFxuXHRcIjIgSm9oblwiOiA2Myxcblx0XCIzIEpvaG5cIjogNjQsXG5cdFwiSnVkZVwiOiA2NSxcblx0XCJSZXZlbGF0aW9uXCI6IDY2LFxuXHRcIjEgRXNkcmFzXCI6IDY3LFxuXHRcIlRvYml0XCI6IDY4LFxuXHRcIkp1ZGl0aFwiOiA2OSxcblx0XCJXaXNkb21cIjogNzAsXG5cdFwiU2lyYWNoXCI6IDcxLFxuXHRcIkVwaXN0bGUgb2YgSmVyZW1pYWhcIjogNzIsXG5cdFwiQmFydWNoXCI6IDczLFxuXHRcIjEgTWFjY2FiZWVzXCI6IDc0LFxuXHRcIjIgTWFjY2FiZWVzXCI6IDc1LFxuXHRcIjMgTWFjY2FiZWVzXCI6IDc2LFxuXHRcIjIgRXNkcmFzXCI6IDc3LFxuXHRcIlN1c2FubmFcIjogNzgsXG5cdFwiQmVsIGFuZCBEcmFnb25cIjogNzksXG5cdFwiNCBNYWNjYWJlZXNcIjogODAsXG5cdFwiR3JlZWsgQWRkaXRpb25zIHRvIEVzdGhlclwiOiA4MSxcblx0XCIzIEhvbHkgQ2hpbGRyZW4ncyBTb25nXCI6IDgyLFxuXHRcIlByYXllciBvZiBNYW5hc3NlaFwiOiA4Myxcblx0XCJBemFyaWFoXCI6IDg4LCAvLyBKdW1wIGluIG51bWJlclxufSIsICJjb25zdCBFX1RJTUVPVVQgPSBuZXcgRXJyb3IoJ3RpbWVvdXQgd2hpbGUgd2FpdGluZyBmb3IgbXV0ZXggdG8gYmVjb21lIGF2YWlsYWJsZScpO1xuY29uc3QgRV9BTFJFQURZX0xPQ0tFRCA9IG5ldyBFcnJvcignbXV0ZXggYWxyZWFkeSBsb2NrZWQnKTtcbmNvbnN0IEVfQ0FOQ0VMRUQgPSBuZXcgRXJyb3IoJ3JlcXVlc3QgZm9yIGxvY2sgY2FuY2VsZWQnKTtcblxudmFyIF9fYXdhaXRlciQyID0gKHVuZGVmaW5lZCAmJiB1bmRlZmluZWQuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5jbGFzcyBTZW1hcGhvcmUge1xuICAgIGNvbnN0cnVjdG9yKF92YWx1ZSwgX2NhbmNlbEVycm9yID0gRV9DQU5DRUxFRCkge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IF92YWx1ZTtcbiAgICAgICAgdGhpcy5fY2FuY2VsRXJyb3IgPSBfY2FuY2VsRXJyb3I7XG4gICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzID0gW107XG4gICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVycyA9IFtdO1xuICAgIH1cbiAgICBhY3F1aXJlKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0pXG4gICAgICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0gPSBbXTtcbiAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzW3dlaWdodCAtIDFdLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrLCB3ZWlnaHQgPSAxKSB7XG4gICAgICAgIHJldHVybiBfX2F3YWl0ZXIkMih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICAgICAgICAgIGNvbnN0IFt2YWx1ZSwgcmVsZWFzZV0gPSB5aWVsZCB0aGlzLmFjcXVpcmUod2VpZ2h0KTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHlpZWxkIGNhbGxiYWNrKHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHdhaXRGb3JVbmxvY2sod2VpZ2h0ID0gMSkge1xuICAgICAgICBpZiAod2VpZ2h0IDw9IDApXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgd2VpZ2h0ICR7d2VpZ2h0fTogbXVzdCBiZSBwb3NpdGl2ZWApO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdKVxuICAgICAgICAgICAgICAgIHRoaXMuX3dlaWdodGVkV2FpdGVyc1t3ZWlnaHQgLSAxXSA9IFtdO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdLnB1c2gocmVzb2x2ZSk7XG4gICAgICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaXNMb2NrZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl92YWx1ZSA8PSAwO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh2YWx1ZSkge1xuICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgIH1cbiAgICByZWxlYXNlKHdlaWdodCA9IDEpIHtcbiAgICAgICAgaWYgKHdlaWdodCA8PSAwKVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgdGhpcy5fdmFsdWUgKz0gd2VpZ2h0O1xuICAgICAgICB0aGlzLl9kaXNwYXRjaCgpO1xuICAgIH1cbiAgICBjYW5jZWwoKSB7XG4gICAgICAgIHRoaXMuX3dlaWdodGVkUXVldWVzLmZvckVhY2goKHF1ZXVlKSA9PiBxdWV1ZS5mb3JFYWNoKChlbnRyeSkgPT4gZW50cnkucmVqZWN0KHRoaXMuX2NhbmNlbEVycm9yKSkpO1xuICAgICAgICB0aGlzLl93ZWlnaHRlZFF1ZXVlcyA9IFtdO1xuICAgIH1cbiAgICBfZGlzcGF0Y2goKSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgZm9yIChsZXQgd2VpZ2h0ID0gdGhpcy5fdmFsdWU7IHdlaWdodCA+IDA7IHdlaWdodC0tKSB7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZUVudHJ5ID0gKF9hID0gdGhpcy5fd2VpZ2h0ZWRRdWV1ZXNbd2VpZ2h0IC0gMV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zaGlmdCgpO1xuICAgICAgICAgICAgaWYgKCFxdWV1ZUVudHJ5KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNWYWx1ZSA9IHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNXZWlnaHQgPSB3ZWlnaHQ7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSAtPSB3ZWlnaHQ7XG4gICAgICAgICAgICB3ZWlnaHQgPSB0aGlzLl92YWx1ZSArIDE7XG4gICAgICAgICAgICBxdWV1ZUVudHJ5LnJlc29sdmUoW3ByZXZpb3VzVmFsdWUsIHRoaXMuX25ld1JlbGVhc2VyKHByZXZpb3VzV2VpZ2h0KV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2RyYWluVW5sb2NrV2FpdGVycygpO1xuICAgIH1cbiAgICBfbmV3UmVsZWFzZXIod2VpZ2h0KSB7XG4gICAgICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAgIGlmIChjYWxsZWQpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVsZWFzZSh3ZWlnaHQpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBfZHJhaW5VbmxvY2tXYWl0ZXJzKCkge1xuICAgICAgICBmb3IgKGxldCB3ZWlnaHQgPSB0aGlzLl92YWx1ZTsgd2VpZ2h0ID4gMDsgd2VpZ2h0LS0pIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdKVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdLmZvckVhY2goKHdhaXRlcikgPT4gd2FpdGVyKCkpO1xuICAgICAgICAgICAgdGhpcy5fd2VpZ2h0ZWRXYWl0ZXJzW3dlaWdodCAtIDFdID0gW107XG4gICAgICAgIH1cbiAgICB9XG59XG5cbnZhciBfX2F3YWl0ZXIkMSA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuY2xhc3MgTXV0ZXgge1xuICAgIGNvbnN0cnVjdG9yKGNhbmNlbEVycm9yKSB7XG4gICAgICAgIHRoaXMuX3NlbWFwaG9yZSA9IG5ldyBTZW1hcGhvcmUoMSwgY2FuY2VsRXJyb3IpO1xuICAgIH1cbiAgICBhY3F1aXJlKCkge1xuICAgICAgICByZXR1cm4gX19hd2FpdGVyJDEodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICBjb25zdCBbLCByZWxlYXNlcl0gPSB5aWVsZCB0aGlzLl9zZW1hcGhvcmUuYWNxdWlyZSgpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbGVhc2VyO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZW1hcGhvcmUucnVuRXhjbHVzaXZlKCgpID0+IGNhbGxiYWNrKCkpO1xuICAgIH1cbiAgICBpc0xvY2tlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NlbWFwaG9yZS5pc0xvY2tlZCgpO1xuICAgIH1cbiAgICB3YWl0Rm9yVW5sb2NrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLndhaXRGb3JVbmxvY2soKTtcbiAgICB9XG4gICAgcmVsZWFzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NlbWFwaG9yZS5pc0xvY2tlZCgpKVxuICAgICAgICAgICAgdGhpcy5fc2VtYXBob3JlLnJlbGVhc2UoKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2VtYXBob3JlLmNhbmNlbCgpO1xuICAgIH1cbn1cblxudmFyIF9fYXdhaXRlciA9ICh1bmRlZmluZWQgJiYgdW5kZWZpbmVkLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xuZnVuY3Rpb24gd2l0aFRpbWVvdXQoc3luYywgdGltZW91dCwgdGltZW91dEVycm9yID0gRV9USU1FT1VUKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWNxdWlyZTogKHdlaWdodCkgPT4ge1xuICAgICAgICAgICAgaWYgKHdlaWdodCAhPT0gdW5kZWZpbmVkICYmIHdlaWdodCA8PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBpbnZhbGlkIHdlaWdodCAke3dlaWdodH06IG11c3QgYmUgcG9zaXRpdmVgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGlzVGltZW91dCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpc1RpbWVvdXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICByZWplY3QodGltZW91dEVycm9yKTtcbiAgICAgICAgICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0aWNrZXQgPSB5aWVsZCBzeW5jLmFjcXVpcmUod2VpZ2h0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzVGltZW91dCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVsZWFzZSA9IEFycmF5LmlzQXJyYXkodGlja2V0KSA/IHRpY2tldFsxXSA6IHRpY2tldDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aWNrZXQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNUaW1lb3V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSxcbiAgICAgICAgcnVuRXhjbHVzaXZlKGNhbGxiYWNrLCB3ZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uKiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IHJlbGVhc2UgPSAoKSA9PiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdGlja2V0ID0geWllbGQgdGhpcy5hY3F1aXJlKHdlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRpY2tldCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSB0aWNrZXRbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY2FsbGJhY2sodGlja2V0WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbGVhc2UgPSB0aWNrZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4geWllbGQgY2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVsZWFzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZWxlYXNlKHdlaWdodCkge1xuICAgICAgICAgICAgc3luYy5yZWxlYXNlKHdlaWdodCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNhbmNlbCgpIHtcbiAgICAgICAgICAgIHJldHVybiBzeW5jLmNhbmNlbCgpO1xuICAgICAgICB9LFxuICAgICAgICB3YWl0Rm9yVW5sb2NrOiAod2VpZ2h0KSA9PiB7XG4gICAgICAgICAgICBpZiAod2VpZ2h0ICE9PSB1bmRlZmluZWQgJiYgd2VpZ2h0IDw9IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYGludmFsaWQgd2VpZ2h0ICR7d2VpZ2h0fTogbXVzdCBiZSBwb3NpdGl2ZWApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBzeW5jLndhaXRGb3JVbmxvY2sod2VpZ2h0KS50aGVuKHJlc29sdmUpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gcmVqZWN0KHRpbWVvdXRFcnJvciksIHRpbWVvdXQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGlzTG9ja2VkOiAoKSA9PiBzeW5jLmlzTG9ja2VkKCksXG4gICAgICAgIGdldFZhbHVlOiAoKSA9PiBzeW5jLmdldFZhbHVlKCksXG4gICAgICAgIHNldFZhbHVlOiAodmFsdWUpID0+IHN5bmMuc2V0VmFsdWUodmFsdWUpLFxuICAgIH07XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGlzbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuZnVuY3Rpb24gdHJ5QWNxdWlyZShzeW5jLCBhbHJlYWR5QWNxdWlyZWRFcnJvciA9IEVfQUxSRUFEWV9MT0NLRUQpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHJldHVybiB3aXRoVGltZW91dChzeW5jLCAwLCBhbHJlYWR5QWNxdWlyZWRFcnJvcik7XG59XG5cbmV4cG9ydCB7IEVfQUxSRUFEWV9MT0NLRUQsIEVfQ0FOQ0VMRUQsIEVfVElNRU9VVCwgTXV0ZXgsIFNlbWFwaG9yZSwgdHJ5QWNxdWlyZSwgd2l0aFRpbWVvdXQgfTtcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQVlPOzs7QUNaUCxJQUFNLFlBQVksSUFBSSxNQUFNLHFEQUFxRDtBQUNqRixJQUFNLG1CQUFtQixJQUFJLE1BQU0sc0JBQXNCO0FBQ3pELElBQU0sYUFBYSxJQUFJ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LFlBQVk7QUFBQSxFQUNaLFVBQVU7QUFBQSxFQUNWLE9BQU87QUFBQSxFQUNQLFVBQVU7QUFBQSxFQUNWLFNBQVM7QUFBQTtBQUFBLEVBQ1QsWUFBWTtBQUFBLEVBQ1osZ0JBQWdCO0FBQUEsRUFDaEIsbUJBQW1CO0FBQUEsRUFDbkIsVUFBVTtBQUFBLEVBQ1YsWUFBWTtBQUFBLEVBQ1osZ0JBQWdCO0FBQUEsRUFDaEIsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsU0FBUztBQUFBLEVBQ1QsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUFBLEVBQ1IsV0FBVztBQUFBLEVBQ1gsU0FBUztBQUFBLEVBQ1QsU0FBUztBQUFBLEVBQ1QsU0FBUztBQUFBLEVBQ1QsWUFBWTtBQUFBLEVBQ1osYUFBYTtBQUFBLEVBQ2IsVUFBVTtBQUFBLEVBQ1YsYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUFBLEVBQ1IsUUFBUTtBQUFBLEVBQ1IsVUFBVTtBQUFBLEVBQ1YsaUJBQWlCO0FBQUEsRUFDakIsaUJBQWlCO0FBQUEsRUFDakIsYUFBYTtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsZUFBZTtBQUFBLEVBQ2YsY0FBYztBQUFBLEVBQ2QsbUJBQW1CO0FBQUEsRUFDbkIsbUJBQW1CO0FBQUEsRUFDbkIsYUFBYTtBQUFBLEVBQ2IsYUFBYTtBQUFBLEVBQ2IsU0FBUztBQUFBLEVBQ1QsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsU0FBUztBQUFBLEVBQ1QsV0FBVztBQUFBLEVBQ1gsV0FBVztBQUFBLEVBQ1gsVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsUUFBUTtBQUFBLEVBQ1IsY0FBYztBQUFBLEVBQ2QsWUFBWTtBQUFBLEVBQ1osU0FBUztBQUFBLEVBQ1QsVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUFBLEVBQ1YsdUJBQXVCO0FBQUEsRUFDdkIsVUFBVTtBQUFBLEVBQ1YsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsZUFBZTtBQUFBLEVBQ2YsWUFBWTtBQUFBLEVBQ1osV0FBVztBQUFBLEVBQ1gsa0JBQWtCO0FBQUEsRUFDbEIsZUFBZTtBQUFBLEVBQ2YsNkJBQTZCO0FBQUEsRUFDN0IsMEJBQTBCO0FBQUEsRUFDMUIsc0JBQXNCO0FBQUEsRUFDdEIsV0FBVztBQUFBO0FBQ1o7IiwKICAibmFtZXMiOiBbInZlcnNlIl0KfQo=
